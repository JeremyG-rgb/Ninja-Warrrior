/*! For license information please see game-library.7a3963c9fa1109057a01.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(c,l,d){"use strict";d.r(l),d.d(l,"BaseTextureCache",(function(){return C})),d.d(l,"CanvasRenderTarget",(function(){return R})),d.d(l,"DATA_URI",(function(){return L})),d.d(l,"ProgramCache",(function(){return I})),d.d(l,"TextureCache",(function(){return A})),d.d(l,"clearTextureCache",(function(){return clearTextureCache})),d.d(l,"correctBlendMode",(function(){return correctBlendMode})),d.d(l,"createIndicesForQuads",(function(){return createIndicesForQuads})),d.d(l,"decomposeDataUri",(function(){return decomposeDataUri})),d.d(l,"deprecation",(function(){return deprecation})),d.d(l,"destroyTextureCache",(function(){return destroyTextureCache})),d.d(l,"determineCrossOrigin",(function(){return determineCrossOrigin})),d.d(l,"getBufferType",(function(){return getBufferType})),d.d(l,"getResolutionOfUrl",(function(){return getResolutionOfUrl})),d.d(l,"hex2rgb",(function(){return hex2rgb})),d.d(l,"hex2string",(function(){return hex2string})),d.d(l,"interleaveTypedArrays",(function(){return interleaveTypedArrays})),d.d(l,"isPow2",(function(){return isPow2})),d.d(l,"isWebGLSupported",(function(){return isWebGLSupported})),d.d(l,"log2",(function(){return log2})),d.d(l,"nextPow2",(function(){return nextPow2})),d.d(l,"premultiplyBlendMode",(function(){return E})),d.d(l,"premultiplyRgba",(function(){return premultiplyRgba})),d.d(l,"premultiplyTint",(function(){return premultiplyTint})),d.d(l,"premultiplyTintToRgba",(function(){return premultiplyTintToRgba})),d.d(l,"removeItems",(function(){return removeItems})),d.d(l,"rgb2hex",(function(){return rgb2hex})),d.d(l,"sayHello",(function(){return sayHello})),d.d(l,"sign",(function(){return sign})),d.d(l,"skipHello",(function(){return skipHello})),d.d(l,"string2hex",(function(){return string2hex})),d.d(l,"trimCanvas",(function(){return trimCanvas})),d.d(l,"uid",(function(){return uid}));var f=d(4);d.d(l,"isMobile",(function(){return f.a}));var m=d(55),_=d.n(m);d.d(l,"EventEmitter",(function(){return _.a}));var y=d(56),g=d.n(y);d.d(l,"earcut",(function(){return g.a}));var v=d(27),b=d.n(v);d.d(l,"url",(function(){return b.a}));var x=d(1);f.b.RETINA_PREFIX=/@([0-9\.]+)x/,f.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var T,S=!1;function skipHello(){S=!0}function sayHello(c){var l;if(!S){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var d=["\n %c %c %c PixiJS 5.3.7 - ✰ "+c+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(l=window.console).log.apply(l,d)}else window.console&&window.console.log("PixiJS 5.3.7 - "+c+" - http://www.pixijs.com/");S=!0}}function isWebGLSupported(){return void 0===T&&(T=function supported(){var c={stencil:!0,failIfMajorPerformanceCaveat:f.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var l=document.createElement("canvas"),d=l.getContext("webgl",c)||l.getContext("experimental-webgl",c),m=!(!d||!d.getContextAttributes().stencil);if(d){var _=d.getExtension("WEBGL_lose_context");_&&_.loseContext()}return d=null,m}catch(c){return!1}}()),T}function hex2rgb(c,l){return void 0===l&&(l=[]),l[0]=(c>>16&255)/255,l[1]=(c>>8&255)/255,l[2]=(255&c)/255,l}function hex2string(c){var l=c.toString(16);return"#"+(l="000000".substr(0,6-l.length)+l)}function string2hex(c){return"string"==typeof c&&"#"===c[0]&&(c=c.substr(1)),parseInt(c,16)}function rgb2hex(c){return(255*c[0]<<16)+(255*c[1]<<8)+(255*c[2]|0)}var E=function mapPremultipliedBlendModes(){for(var c=[],l=[],d=0;d<32;d++)c[d]=d,l[d]=d;c[x.b.NORMAL_NPM]=x.b.NORMAL,c[x.b.ADD_NPM]=x.b.ADD,c[x.b.SCREEN_NPM]=x.b.SCREEN,l[x.b.NORMAL]=x.b.NORMAL_NPM,l[x.b.ADD]=x.b.ADD_NPM,l[x.b.SCREEN]=x.b.SCREEN_NPM;var f=[];return f.push(l),f.push(c),f}();function correctBlendMode(c,l){return E[l?1:0][c]}function premultiplyRgba(c,l,d,f){return d=d||new Float32Array(4),f||void 0===f?(d[0]=c[0]*l,d[1]=c[1]*l,d[2]=c[2]*l):(d[0]=c[0],d[1]=c[1],d[2]=c[2]),d[3]=l,d}function premultiplyTint(c,l){if(1===l)return(255*l<<24)+c;if(0===l)return 0;var d=c>>16&255,f=c>>8&255,m=255&c;return(255*l<<24)+((d=d*l+.5|0)<<16)+((f=f*l+.5|0)<<8)+(m=m*l+.5|0)}function premultiplyTintToRgba(c,l,d,f){return(d=d||new Float32Array(4))[0]=(c>>16&255)/255,d[1]=(c>>8&255)/255,d[2]=(255&c)/255,(f||void 0===f)&&(d[0]*=l,d[1]*=l,d[2]*=l),d[3]=l,d}function createIndicesForQuads(c,l){void 0===l&&(l=null);var d=6*c;if((l=l||new Uint16Array(d)).length!==d)throw new Error("Out buffer length is incorrect, got "+l.length+" and expected "+d);for(var f=0,m=0;f<d;f+=6,m+=4)l[f+0]=m+0,l[f+1]=m+1,l[f+2]=m+2,l[f+3]=m+0,l[f+4]=m+2,l[f+5]=m+3;return l}function getBufferType(c){if(4===c.BYTES_PER_ELEMENT)return c instanceof Float32Array?"Float32Array":c instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===c.BYTES_PER_ELEMENT){if(c instanceof Uint16Array)return"Uint16Array"}else if(1===c.BYTES_PER_ELEMENT&&c instanceof Uint8Array)return"Uint8Array";return null}var P={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function interleaveTypedArrays(c,l){for(var d=0,f=0,m={},_=0;_<c.length;_++)f+=l[_],d+=c[_].length;var y=new ArrayBuffer(4*d),g=null,v=0;for(_=0;_<c.length;_++){var b=l[_],x=c[_],T=getBufferType(x);m[T]||(m[T]=new P[T](y)),g=m[T];for(var S=0;S<x.length;S++){g[(S/b|0)*f+v+S%b]=x[S]}v+=b}return new Float32Array(y)}function nextPow2(c){return c+=0===c?1:0,--c,c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,(c|=c>>>16)+1}function isPow2(c){return!(c&c-1||!c)}function log2(c){var l=(c>65535?1:0)<<4,d=((c>>>=l)>255?1:0)<<3;return l|=d,l|=d=((c>>>=d)>15?1:0)<<2,(l|=d=((c>>>=d)>3?1:0)<<1)|(c>>>=d)>>1}function removeItems(c,l,d){var f,m=c.length;if(!(l>=m||0===d)){var _=m-(d=l+d>m?m-l:d);for(f=l;f<_;++f)c[f]=c[f+d];c.length=_}}function sign(c){return 0===c?0:c<0?-1:1}var w=0;function uid(){return++w}var O={};function deprecation(c,l,d){if(void 0===d&&(d=3),!O[l]){var f=(new Error).stack;void 0===f?console.warn("PixiJS Deprecation Warning: ",l+"\nDeprecated since v"+c):(f=f.split("\n").splice(d).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",l+"\nDeprecated since v"+c),console.warn(f),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",l+"\nDeprecated since v"+c),console.warn(f))),O[l]=!0}}var I={},A=Object.create(null),C=Object.create(null);function destroyTextureCache(){var c;for(c in A)A[c].destroy();for(c in C)C[c].destroy()}function clearTextureCache(){var c;for(c in A)delete A[c];for(c in C)delete C[c]}var R=function(){function CanvasRenderTarget(c,l,d){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=d||f.b.RESOLUTION,this.resize(c,l)}return CanvasRenderTarget.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},CanvasRenderTarget.prototype.resize=function(c,l){this.canvas.width=c*this.resolution,this.canvas.height=l*this.resolution},CanvasRenderTarget.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(CanvasRenderTarget.prototype,"width",{get:function(){return this.canvas.width},set:function(c){this.canvas.width=c},enumerable:!1,configurable:!0}),Object.defineProperty(CanvasRenderTarget.prototype,"height",{get:function(){return this.canvas.height},set:function(c){this.canvas.height=c},enumerable:!1,configurable:!0}),CanvasRenderTarget}();function trimCanvas(c){var l,d,f,m=c.width,_=c.height,y=c.getContext("2d"),g=y.getImageData(0,0,m,_).data,v=g.length,b={top:null,left:null,right:null,bottom:null},x=null;for(l=0;l<v;l+=4)0!==g[l+3]&&(d=l/4%m,f=~~(l/4/m),null===b.top&&(b.top=f),(null===b.left||d<b.left)&&(b.left=d),(null===b.right||b.right<d)&&(b.right=d+1),(null===b.bottom||b.bottom<f)&&(b.bottom=f));return null!==b.top&&(m=b.right-b.left,_=b.bottom-b.top+1,x=y.getImageData(b.left,b.top,m,_)),{height:_,width:m,data:x}}var D,L=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function decomposeDataUri(c){var l=L.exec(c);if(l)return{mediaType:l[1]?l[1].toLowerCase():void 0,subType:l[2]?l[2].toLowerCase():void 0,charset:l[3]?l[3].toLowerCase():void 0,encoding:l[4]?l[4].toLowerCase():void 0,data:l[5]}}function determineCrossOrigin(c,l){if(void 0===l&&(l=window.location),0===c.indexOf("data:"))return"";l=l||window.location,D||(D=document.createElement("a")),D.href=c;var d=Object(v.parse)(D.href),f=!d.port&&""===l.port||d.port===l.port;return d.hostname===l.hostname&&f&&d.protocol===l.protocol?"":"anonymous"}function getResolutionOfUrl(c,l){var d=f.b.RETINA_PREFIX.exec(c);return d?parseFloat(d[1]):void 0!==l?l:1}},function(c,l,d){"use strict";var f,m,_,y,g,v,b,x,T,S,E,P,w,O,I,A,C;d.d(l,"a",(function(){return P})),d.d(l,"b",(function(){return y})),d.d(l,"c",(function(){return _})),d.d(l,"d",(function(){return w})),d.d(l,"e",(function(){return g})),d.d(l,"f",(function(){return f})),d.d(l,"g",(function(){return v})),d.d(l,"h",(function(){return O})),d.d(l,"i",(function(){return A})),d.d(l,"j",(function(){return E})),d.d(l,"k",(function(){return C})),d.d(l,"l",(function(){return I})),d.d(l,"m",(function(){return m})),d.d(l,"n",(function(){return T})),d.d(l,"o",(function(){return b})),d.d(l,"p",(function(){return x})),d.d(l,"q",(function(){return S})),function(c){c[c.WEBGL_LEGACY=0]="WEBGL_LEGACY",c[c.WEBGL=1]="WEBGL",c[c.WEBGL2=2]="WEBGL2"}(f||(f={})),function(c){c[c.UNKNOWN=0]="UNKNOWN",c[c.WEBGL=1]="WEBGL",c[c.CANVAS=2]="CANVAS"}(m||(m={})),function(c){c[c.COLOR=16384]="COLOR",c[c.DEPTH=256]="DEPTH",c[c.STENCIL=1024]="STENCIL"}(_||(_={})),function(c){c[c.NORMAL=0]="NORMAL",c[c.ADD=1]="ADD",c[c.MULTIPLY=2]="MULTIPLY",c[c.SCREEN=3]="SCREEN",c[c.OVERLAY=4]="OVERLAY",c[c.DARKEN=5]="DARKEN",c[c.LIGHTEN=6]="LIGHTEN",c[c.COLOR_DODGE=7]="COLOR_DODGE",c[c.COLOR_BURN=8]="COLOR_BURN",c[c.HARD_LIGHT=9]="HARD_LIGHT",c[c.SOFT_LIGHT=10]="SOFT_LIGHT",c[c.DIFFERENCE=11]="DIFFERENCE",c[c.EXCLUSION=12]="EXCLUSION",c[c.HUE=13]="HUE",c[c.SATURATION=14]="SATURATION",c[c.COLOR=15]="COLOR",c[c.LUMINOSITY=16]="LUMINOSITY",c[c.NORMAL_NPM=17]="NORMAL_NPM",c[c.ADD_NPM=18]="ADD_NPM",c[c.SCREEN_NPM=19]="SCREEN_NPM",c[c.NONE=20]="NONE",c[c.SRC_OVER=0]="SRC_OVER",c[c.SRC_IN=21]="SRC_IN",c[c.SRC_OUT=22]="SRC_OUT",c[c.SRC_ATOP=23]="SRC_ATOP",c[c.DST_OVER=24]="DST_OVER",c[c.DST_IN=25]="DST_IN",c[c.DST_OUT=26]="DST_OUT",c[c.DST_ATOP=27]="DST_ATOP",c[c.ERASE=26]="ERASE",c[c.SUBTRACT=28]="SUBTRACT",c[c.XOR=29]="XOR"}(y||(y={})),function(c){c[c.POINTS=0]="POINTS",c[c.LINES=1]="LINES",c[c.LINE_LOOP=2]="LINE_LOOP",c[c.LINE_STRIP=3]="LINE_STRIP",c[c.TRIANGLES=4]="TRIANGLES",c[c.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",c[c.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(g||(g={})),function(c){c[c.RGBA=6408]="RGBA",c[c.RGB=6407]="RGB",c[c.ALPHA=6406]="ALPHA",c[c.LUMINANCE=6409]="LUMINANCE",c[c.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",c[c.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",c[c.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(v||(v={})),function(c){c[c.TEXTURE_2D=3553]="TEXTURE_2D",c[c.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",c[c.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",c[c.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",c[c.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",c[c.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",c[c.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",c[c.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",c[c.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(b||(b={})),function(c){c[c.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",c[c.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",c[c.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",c[c.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",c[c.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",c[c.FLOAT=5126]="FLOAT",c[c.HALF_FLOAT=36193]="HALF_FLOAT"}(x||(x={})),function(c){c[c.NEAREST=0]="NEAREST",c[c.LINEAR=1]="LINEAR"}(T||(T={})),function(c){c[c.CLAMP=33071]="CLAMP",c[c.REPEAT=10497]="REPEAT",c[c.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(S||(S={})),function(c){c[c.OFF=0]="OFF",c[c.POW2=1]="POW2",c[c.ON=2]="ON"}(E||(E={})),function(c){c[c.NPM=0]="NPM",c[c.UNPACK=1]="UNPACK",c[c.PMA=2]="PMA",c[c.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",c[c.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",c[c.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(P||(P={})),function(c){c[c.NO=0]="NO",c[c.YES=1]="YES",c[c.AUTO=2]="AUTO",c[c.BLEND=0]="BLEND",c[c.CLEAR=1]="CLEAR",c[c.BLIT=2]="BLIT"}(w||(w={})),function(c){c[c.AUTO=0]="AUTO",c[c.MANUAL=1]="MANUAL"}(O||(O={})),function(c){c.LOW="lowp",c.MEDIUM="mediump",c.HIGH="highp"}(I||(I={})),function(c){c[c.NONE=0]="NONE",c[c.SCISSOR=1]="SCISSOR",c[c.STENCIL=2]="STENCIL",c[c.SPRITE=3]="SPRITE"}(A||(A={})),function(c){c[c.NONE=0]="NONE",c[c.LOW=2]="LOW",c[c.MEDIUM=4]="MEDIUM",c[c.HIGH=8]="HIGH"}(C||(C={}))},function(c,l,d){"use strict";d.d(l,"a",(function(){return ce})),d.d(l,"b",(function(){return ie})),d.d(l,"c",(function(){return Y})),d.d(l,"d",(function(){return U})),d.d(l,"e",(function(){return E})),d.d(l,"f",(function(){return ae})),d.d(l,"g",(function(){return de})),d.d(l,"h",(function(){return me})),d.d(l,"i",(function(){return _e})),d.d(l,"j",(function(){return le})),d.d(l,"k",(function(){return ue})),d.d(l,"l",(function(){return q})),d.d(l,"m",(function(){return Dt})),d.d(l,"n",(function(){return nt})),d.d(l,"o",(function(){return j})),d.d(l,"p",(function(){return ct})),d.d(l,"q",(function(){return Wt})),d.d(l,"r",(function(){return $t})),d.d(l,"s",(function(){return $})),d.d(l,"t",(function(){return Yt})),d.d(l,"u",(function(){return _t})),d.d(l,"v",(function(){return st})),d.d(l,"w",(function(){return Ct})),d.d(l,"x",(function(){return tt})),d.d(l,"y",(function(){return et})),d.d(l,"z",(function(){return z})),d.d(l,"A",(function(){return V})),d.d(l,"B",(function(){return ne})),d.d(l,"C",(function(){return Mt})),d.d(l,"D",(function(){return Bt})),d.d(l,"E",(function(){return Rt})),d.d(l,"F",(function(){return N})),d.d(l,"G",(function(){return H})),d.d(l,"H",(function(){return Lt})),d.d(l,"I",(function(){return G})),d.d(l,"J",(function(){return it})),d.d(l,"K",(function(){return he})),d.d(l,"L",(function(){return autoDetectRenderer})),d.d(l,"M",(function(){return checkMaxIfStatementsInShader})),d.d(l,"N",(function(){return se})),d.d(l,"O",(function(){return oe})),d.d(l,"P",(function(){return B})),d.d(l,"Q",(function(){return ee})),d.d(l,"R",(function(){return St}));var f=d(4),m=d(1),_=d(0),y=d(7),g=d(5),v=d(3);f.b.PREFER_ENV=_.isMobile.any?m.f.WEBGL:m.f.WEBGL2,f.b.STRICT_TEXTURE_CACHE=!1;var b=[];function autoDetectResource(c,l){if(!c)return null;var d="";if("string"==typeof c){var f=/\.(\w{3,4})(?:$|\?|#)/i.exec(c);f&&(d=f[1].toLowerCase())}for(var m=b.length-1;m>=0;--m){var _=b[m];if(_.test&&_.test(c,d))return new _(c,l)}throw new Error("Unrecognized source type to auto-detect Resource")}var extendStatics=function(c,l){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};function __extends(c,l){function __(){this.constructor=c}extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}var x=function(){function Resource(c,l){void 0===c&&(c=0),void 0===l&&(l=0),this._width=c,this._height=l,this.destroyed=!1,this.internal=!1,this.onResize=new y.a("setRealSize"),this.onUpdate=new y.a("update"),this.onError=new y.a("onError")}return Resource.prototype.bind=function(c){this.onResize.add(c),this.onUpdate.add(c),this.onError.add(c),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},Resource.prototype.unbind=function(c){this.onResize.remove(c),this.onUpdate.remove(c),this.onError.remove(c)},Resource.prototype.resize=function(c,l){c===this._width&&l===this._height||(this._width=c,this._height=l,this.onResize.emit(c,l))},Object.defineProperty(Resource.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),Resource.prototype.update=function(){this.destroyed||this.onUpdate.emit()},Resource.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(Resource.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(Resource.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Resource.prototype.style=function(c,l,d){return!1},Resource.prototype.dispose=function(){},Resource.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Resource.test=function(c,l){return!1},Resource}(),T=function(c){function BufferResource(l,d){var f=this,m=d||{},_=m.width,y=m.height;if(!_||!y)throw new Error("BufferResource width or height invalid");return(f=c.call(this,_,y)||this).data=l,f}return __extends(BufferResource,c),BufferResource.prototype.upload=function(c,l,d){var f=c.gl;return f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.alphaMode===m.a.UNPACK),d.width===l.width&&d.height===l.height?f.texSubImage2D(l.target,0,0,0,l.width,l.height,l.format,l.type,this.data):(d.width=l.width,d.height=l.height,f.texImage2D(l.target,0,d.internalFormat,l.width,l.height,0,l.format,d.type,this.data)),!0},BufferResource.prototype.dispose=function(){this.data=null},BufferResource.test=function(c){return c instanceof Float32Array||c instanceof Uint8Array||c instanceof Uint32Array},BufferResource}(x),S={scaleMode:m.n.NEAREST,format:m.g.RGBA,alphaMode:m.a.NPM},E=function(c){function BaseTexture(l,d){void 0===l&&(l=null),void 0===d&&(d=null);var y=c.call(this)||this,g=(d=d||{}).alphaMode,v=d.mipmap,b=d.anisotropicLevel,T=d.scaleMode,S=d.width,E=d.height,P=d.wrapMode,w=d.format,O=d.type,I=d.target,A=d.resolution,C=d.resourceOptions;return!l||l instanceof x||((l=autoDetectResource(l,C)).internal=!0),y.width=S||0,y.height=E||0,y.resolution=A||f.b.RESOLUTION,y.mipmap=void 0!==v?v:f.b.MIPMAP_TEXTURES,y.anisotropicLevel=void 0!==b?b:f.b.ANISOTROPIC_LEVEL,y.wrapMode=P||f.b.WRAP_MODE,y.scaleMode=void 0!==T?T:f.b.SCALE_MODE,y.format=w||m.g.RGBA,y.type=O||m.p.UNSIGNED_BYTE,y.target=I||m.o.TEXTURE_2D,y.alphaMode=void 0!==g?g:m.a.UNPACK,void 0!==d.premultiplyAlpha&&(y.premultiplyAlpha=d.premultiplyAlpha),y.uid=Object(_.uid)(),y.touched=0,y.isPowerOfTwo=!1,y._refreshPOT(),y._glTextures={},y.dirtyId=0,y.dirtyStyleId=0,y.cacheId=null,y.valid=S>0&&E>0,y.textureCacheIds=[],y.destroyed=!1,y.resource=null,y._batchEnabled=0,y._batchLocation=0,y.parentTextureArray=null,y.setResource(l),y}return __extends(BaseTexture,c),Object.defineProperty(BaseTexture.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),BaseTexture.prototype.setStyle=function(c,l){var d;return void 0!==c&&c!==this.scaleMode&&(this.scaleMode=c,d=!0),void 0!==l&&l!==this.mipmap&&(this.mipmap=l,d=!0),d&&this.dirtyStyleId++,this},BaseTexture.prototype.setSize=function(c,l,d){return this.resolution=d||this.resolution,this.width=c,this.height=l,this._refreshPOT(),this.update(),this},BaseTexture.prototype.setRealSize=function(c,l,d){return this.resolution=d||this.resolution,this.width=c/this.resolution,this.height=l/this.resolution,this._refreshPOT(),this.update(),this},BaseTexture.prototype._refreshPOT=function(){this.isPowerOfTwo=Object(_.isPow2)(this.realWidth)&&Object(_.isPow2)(this.realHeight)},BaseTexture.prototype.setResolution=function(c){var l=this.resolution;return l===c||(this.resolution=c,this.valid&&(this.width=this.width*l/c,this.height=this.height*l/c,this.emit("update",this)),this._refreshPOT()),this},BaseTexture.prototype.setResource=function(c){if(this.resource===c)return this;if(this.resource)throw new Error("Resource can be set only once");return c.bind(this),this.resource=c,this},BaseTexture.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},BaseTexture.prototype.onError=function(c){this.emit("error",this,c)},BaseTexture.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete _.BaseTextureCache[this.cacheId],delete _.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),BaseTexture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},BaseTexture.prototype.dispose=function(){this.emit("dispose",this)},BaseTexture.prototype.castToBaseTexture=function(){return this},BaseTexture.from=function(c,l,d){void 0===d&&(d=f.b.STRICT_TEXTURE_CACHE);var m="string"==typeof c,y=null;m?y=c:(c._pixiId||(c._pixiId="pixiid_"+Object(_.uid)()),y=c._pixiId);var g=_.BaseTextureCache[y];if(m&&d&&!g)throw new Error('The cacheId "'+y+'" does not exist in BaseTextureCache.');return g||((g=new BaseTexture(c,l)).cacheId=y,BaseTexture.addToCache(g,y)),g},BaseTexture.fromBuffer=function(c,l,d,f){c=c||new Float32Array(l*d*4);var _=new T(c,{width:l,height:d}),y=c instanceof Float32Array?m.p.FLOAT:m.p.UNSIGNED_BYTE;return new BaseTexture(_,Object.assign(S,f||{width:l,height:d,type:y}))},BaseTexture.addToCache=function(c,l){l&&(-1===c.textureCacheIds.indexOf(l)&&c.textureCacheIds.push(l),_.BaseTextureCache[l]&&console.warn("BaseTexture added to the cache with an id ["+l+"] that already had an entry"),_.BaseTextureCache[l]=c)},BaseTexture.removeFromCache=function(c){if("string"==typeof c){var l=_.BaseTextureCache[c];if(l){var d=l.textureCacheIds.indexOf(c);return d>-1&&l.textureCacheIds.splice(d,1),delete _.BaseTextureCache[c],l}}else if(c&&c.textureCacheIds){for(var f=0;f<c.textureCacheIds.length;++f)delete _.BaseTextureCache[c.textureCacheIds[f]];return c.textureCacheIds.length=0,c}return null},BaseTexture._globalBatch=0,BaseTexture}(_.EventEmitter),P=function(c){function AbstractMultiResource(l,d){var f=this,m=d||{},_=m.width,y=m.height;(f=c.call(this,_,y)||this).items=[],f.itemDirtyIds=[];for(var g=0;g<l;g++){var v=new E;f.items.push(v),f.itemDirtyIds.push(-2)}return f.length=l,f._load=null,f.baseTexture=null,f}return __extends(AbstractMultiResource,c),AbstractMultiResource.prototype.initFromArray=function(c,l){for(var d=0;d<this.length;d++)c[d]&&(c[d].castToBaseTexture?this.addBaseTextureAt(c[d].castToBaseTexture(),d):c[d]instanceof x?this.addResourceAt(c[d],d):this.addResourceAt(autoDetectResource(c[d],l),d))},AbstractMultiResource.prototype.dispose=function(){for(var c=0,l=this.length;c<l;c++)this.items[c].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},AbstractMultiResource.prototype.addResourceAt=function(c,l){if(!this.items[l])throw new Error("Index "+l+" is out of bounds");return c.valid&&!this.valid&&this.resize(c.width,c.height),this.items[l].setResource(c),this},AbstractMultiResource.prototype.bind=function(l){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");c.prototype.bind.call(this,l);for(var d=0;d<this.length;d++)this.items[d].parentTextureArray=l,this.items[d].on("update",l.update,l)},AbstractMultiResource.prototype.unbind=function(l){c.prototype.unbind.call(this,l);for(var d=0;d<this.length;d++)this.items[d].parentTextureArray=null,this.items[d].off("update",l.update,l)},AbstractMultiResource.prototype.load=function(){var c=this;if(this._load)return this._load;var l=this.items.map((function(c){return c.resource})).filter((function(c){return c})).map((function(c){return c.load()}));return this._load=Promise.all(l).then((function(){var l=c.items[0],d=l.realWidth,f=l.realHeight;return c.resize(d,f),Promise.resolve(c)})),this._load},AbstractMultiResource}(x),w=function(c){function ArrayResource(l,d){var f,m,_=this,y=d||{},g=y.width,v=y.height;return Array.isArray(l)?(f=l,m=l.length):m=l,_=c.call(this,m,{width:g,height:v})||this,f&&_.initFromArray(f,d),_}return __extends(ArrayResource,c),ArrayResource.prototype.addBaseTextureAt=function(c,l){if(!c.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(c.resource,l),this},ArrayResource.prototype.bind=function(l){c.prototype.bind.call(this,l),l.target=m.o.TEXTURE_2D_ARRAY},ArrayResource.prototype.upload=function(c,l,d){var f=this,m=f.length,_=f.itemDirtyIds,y=f.items,g=c.gl;d.dirtyId<0&&g.texImage3D(g.TEXTURE_2D_ARRAY,0,l.format,this._width,this._height,m,0,l.format,l.type,null);for(var v=0;v<m;v++){var b=y[v];_[v]<b.dirtyId&&(_[v]=b.dirtyId,b.valid&&g.texSubImage3D(g.TEXTURE_2D_ARRAY,0,0,0,v,b.resource.width,b.resource.height,1,l.format,l.type,b.resource.source))}return!0},ArrayResource}(P),O=function(c){function BaseImageResource(l){var d=this,f=l,m=f.naturalWidth||f.videoWidth||f.width,_=f.naturalHeight||f.videoHeight||f.height;return(d=c.call(this,m,_)||this).source=l,d.noSubImage=!1,d}return __extends(BaseImageResource,c),BaseImageResource.crossOrigin=function(c,l,d){void 0===d&&0!==l.indexOf("data:")?c.crossOrigin=Object(_.determineCrossOrigin)(l):!1!==d&&(c.crossOrigin="string"==typeof d?d:"anonymous")},BaseImageResource.prototype.upload=function(c,l,d,f){var _=c.gl,y=l.realWidth,g=l.realHeight;return f=f||this.source,_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.alphaMode===m.a.UNPACK),this.noSubImage||l.target!==_.TEXTURE_2D||d.width!==y||d.height!==g?(d.width=y,d.height=g,_.texImage2D(l.target,0,l.format,l.format,l.type,f)):_.texSubImage2D(_.TEXTURE_2D,0,0,0,l.format,l.type,f),!0},BaseImageResource.prototype.update=function(){if(!this.destroyed){var l=this.source,d=l.naturalWidth||l.videoWidth||l.width,f=l.naturalHeight||l.videoHeight||l.height;this.resize(d,f),c.prototype.update.call(this)}},BaseImageResource.prototype.dispose=function(){this.source=null},BaseImageResource}(x),I=function(c){function CanvasResource(){return null!==c&&c.apply(this,arguments)||this}return __extends(CanvasResource,c),CanvasResource.test=function(c){var l=window.OffscreenCanvas;return!!(l&&c instanceof l)||c instanceof HTMLCanvasElement},CanvasResource}(O),A=function(c){function CubeResource(l,d){var f=this,_=d||{},y=_.width,g=_.height,v=_.autoLoad,b=_.linkBaseTexture;if(l&&l.length!==CubeResource.SIDES)throw new Error("Invalid length. Got "+l.length+", expected 6");f=c.call(this,6,{width:y,height:g})||this;for(var x=0;x<CubeResource.SIDES;x++)f.items[x].target=m.o.TEXTURE_CUBE_MAP_POSITIVE_X+x;return f.linkBaseTexture=!1!==b,l&&f.initFromArray(l,d),!1!==v&&f.load(),f}return __extends(CubeResource,c),CubeResource.prototype.bind=function(l){c.prototype.bind.call(this,l),l.target=m.o.TEXTURE_CUBE_MAP},CubeResource.prototype.addBaseTextureAt=function(c,l,d){if(void 0===d&&(d=this.linkBaseTexture),!this.items[l])throw new Error("Index "+l+" is out of bounds");if(!this.linkBaseTexture||c.parentTextureArray||Object.keys(c._glTextures).length>0){if(!c.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(c.resource,l)}else c.target=m.o.TEXTURE_CUBE_MAP_POSITIVE_X+l,c.parentTextureArray=this.baseTexture,this.items[l]=c;return c.valid&&!this.valid&&this.resize(c.realWidth,c.realHeight),this.items[l]=c,this},CubeResource.prototype.upload=function(c,l,d){for(var f=this.itemDirtyIds,m=0;m<CubeResource.SIDES;m++){var _=this.items[m];f[m]<_.dirtyId&&(_.valid&&_.resource?(_.resource.upload(c,_,d),f[m]=_.dirtyId):f[m]<-1&&(c.gl.texImage2D(_.target,0,d.internalFormat,l.realWidth,l.realHeight,0,l.format,d.type,null),f[m]=-1))}return!0},CubeResource.test=function(c){return Array.isArray(c)&&c.length===CubeResource.SIDES},CubeResource.SIDES=6,CubeResource}(P),C=function(c){function ImageResource(l,d){var m=this;if(d=d||{},!(l instanceof HTMLImageElement)){var _=new Image;O.crossOrigin(_,l,d.crossorigin),_.src=l,l=_}return m=c.call(this,l)||this,!l.complete&&m._width&&m._height&&(m._width=0,m._height=0),m.url=l.src,m._process=null,m.preserveBitmap=!1,m.createBitmap=(void 0!==d.createBitmap?d.createBitmap:f.b.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,m.alphaMode="number"==typeof d.alphaMode?d.alphaMode:null,void 0!==d.premultiplyAlpha&&(m.premultiplyAlpha=d.premultiplyAlpha),m.bitmap=null,m._load=null,!1!==d.autoLoad&&m.load(),m}return __extends(ImageResource,c),ImageResource.prototype.load=function(c){var l=this;return this._load||(void 0!==c&&(this.createBitmap=c),this._load=new Promise((function(c,d){var f=l.source;l.url=f.src;var completed=function(){l.destroyed||(f.onload=null,f.onerror=null,l.resize(f.width,f.height),l._load=null,l.createBitmap?c(l.process()):c(l))};f.complete&&f.src?completed():(f.onload=completed,f.onerror=function(c){d(c),l.onError.emit(c)})}))),this._load},ImageResource.prototype.process=function(){var c=this,l=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(l,0,0,l.width,l.height,{premultiplyAlpha:this.alphaMode===m.a.UNPACK?"premultiply":"none"}).then((function(l){return c.destroyed?Promise.reject():(c.bitmap=l,c.update(),c._process=null,Promise.resolve(c))})),this._process):Promise.resolve(this)},ImageResource.prototype.upload=function(l,d,f){if("number"==typeof this.alphaMode&&(d.alphaMode=this.alphaMode),!this.createBitmap)return c.prototype.upload.call(this,l,d,f);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(c.prototype.upload.call(this,l,d,f,this.bitmap),!this.preserveBitmap){var m=!0,_=d._glTextures;for(var y in _){var g=_[y];if(g!==f&&g.dirtyId!==d.dirtyId){m=!1;break}}m&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},ImageResource.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,c.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},ImageResource.test=function(c){return"string"==typeof c||c instanceof HTMLImageElement},ImageResource}(O),R=function(c){function SVGResource(l,d){var f=this;return d=d||{},(f=c.call(this,document.createElement("canvas"))||this)._width=0,f._height=0,f.svg=l,f.scale=d.scale||1,f._overrideWidth=d.width,f._overrideHeight=d.height,f._resolve=null,f._crossorigin=d.crossorigin,f._load=null,!1!==d.autoLoad&&f.load(),f}return __extends(SVGResource,c),SVGResource.prototype.load=function(){var c=this;return this._load||(this._load=new Promise((function(l){if(c._resolve=function(){c.resize(c.source.width,c.source.height),l(c)},/^\<svg/.test(c.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");c.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(c.svg)))}c._loadSvg()}))),this._load},SVGResource.prototype._loadSvg=function(){var c=this,l=new Image;O.crossOrigin(l,this.svg,this._crossorigin),l.src=this.svg,l.onerror=function(d){c._resolve&&(l.onerror=null,c.onError.emit(d))},l.onload=function(){if(c._resolve){var d=l.width,f=l.height;if(!d||!f)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var m=d*c.scale,y=f*c.scale;(c._overrideWidth||c._overrideHeight)&&(m=c._overrideWidth||c._overrideHeight/f*d,y=c._overrideHeight||c._overrideWidth/d*f),m=Math.round(m),y=Math.round(y);var g=c.source;g.width=m,g.height=y,g._pixiId="canvas_"+Object(_.uid)(),g.getContext("2d").drawImage(l,0,0,d,f,0,0,m,y),c._resolve(),c._resolve=null}}},SVGResource.getSize=function(c){var l=SVGResource.SVG_SIZE.exec(c),d={};return l&&(d[l[1]]=Math.round(parseFloat(l[3])),d[l[5]]=Math.round(parseFloat(l[7]))),d},SVGResource.prototype.dispose=function(){c.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},SVGResource.test=function(c,l){return"svg"===l||"string"==typeof c&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(c)||"string"==typeof c&&0===c.indexOf("<svg")},SVGResource.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,SVGResource}(O),D=function(c){function VideoResource(l,d){var f=this;if(d=d||{},!(l instanceof HTMLVideoElement)){var m=document.createElement("video");m.setAttribute("preload","auto"),m.setAttribute("webkit-playsinline",""),m.setAttribute("playsinline",""),"string"==typeof l&&(l=[l]);var _=l[0].src||l[0];O.crossOrigin(m,_,d.crossorigin);for(var y=0;y<l.length;++y){var g=document.createElement("source"),v=l[y],b=v.src,x=v.mime,T=(b=b||l[y]).split("?").shift().toLowerCase(),S=T.substr(T.lastIndexOf(".")+1);x=x||VideoResource.MIME_TYPES[S]||"video/"+S,g.src=b,g.type=x,m.appendChild(g)}l=m}return(f=c.call(this,l)||this).noSubImage=!0,f._autoUpdate=!0,f._isConnectedToTicker=!1,f._updateFPS=d.updateFPS||0,f._msToNextUpdate=0,f.autoPlay=!1!==d.autoPlay,f._load=null,f._resolve=null,f._onCanPlay=f._onCanPlay.bind(f),f._onError=f._onError.bind(f),!1!==d.autoLoad&&f.load(),f}return __extends(VideoResource,c),VideoResource.prototype.update=function(l){if(void 0===l&&(l=0),!this.destroyed){var d=g.a.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-d),(!this._updateFPS||this._msToNextUpdate<=0)&&(c.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},VideoResource.prototype.load=function(){var c=this;if(this._load)return this._load;var l=this.source;return(l.readyState===l.HAVE_ENOUGH_DATA||l.readyState===l.HAVE_FUTURE_DATA)&&l.width&&l.height&&(l.complete=!0),l.addEventListener("play",this._onPlayStart.bind(this)),l.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(l.addEventListener("canplay",this._onCanPlay),l.addEventListener("canplaythrough",this._onCanPlay),l.addEventListener("error",this._onError,!0)),this._load=new Promise((function(d){c.valid?d(c):(c._resolve=d,l.load())})),this._load},VideoResource.prototype._onError=function(c){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(c)},VideoResource.prototype._isSourcePlaying=function(){var c=this.source;return c.currentTime>0&&!1===c.paused&&!1===c.ended&&c.readyState>2},VideoResource.prototype._isSourceReady=function(){var c=this.source;return 3===c.readyState||4===c.readyState},VideoResource.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(g.a.shared.add(this.update,this),this._isConnectedToTicker=!0)},VideoResource.prototype._onPlayStop=function(){this._isConnectedToTicker&&(g.a.shared.remove(this.update,this),this._isConnectedToTicker=!1)},VideoResource.prototype._onCanPlay=function(){var c=this.source;c.removeEventListener("canplay",this._onCanPlay),c.removeEventListener("canplaythrough",this._onCanPlay);var l=this.valid;this.resize(c.videoWidth,c.videoHeight),!l&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&c.play()},VideoResource.prototype.dispose=function(){this._isConnectedToTicker&&g.a.shared.remove(this.update,this);var l=this.source;l&&(l.removeEventListener("error",this._onError,!0),l.pause(),l.src="",l.load()),c.prototype.dispose.call(this)},Object.defineProperty(VideoResource.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(c){c!==this._autoUpdate&&(this._autoUpdate=c,!this._autoUpdate&&this._isConnectedToTicker?(g.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(g.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(VideoResource.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(c){c!==this._updateFPS&&(this._updateFPS=c)},enumerable:!1,configurable:!0}),VideoResource.test=function(c,l){return c instanceof HTMLVideoElement||VideoResource.TYPES.indexOf(l)>-1},VideoResource.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],VideoResource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},VideoResource}(O),L=function(c){function ImageBitmapResource(){return null!==c&&c.apply(this,arguments)||this}return __extends(ImageBitmapResource,c),ImageBitmapResource.test=function(c){return!!window.createImageBitmap&&c instanceof ImageBitmap},ImageBitmapResource}(O);b.push(C,L,I,D,R,T,A,w);var B={Resource:x,BaseImageResource:O,INSTALLED:b,autoDetectResource:autoDetectResource,AbstractMultiResource:P,ArrayResource:w,BufferResource:T,CanvasResource:I,CubeResource:A,ImageResource:C,SVGResource:R,VideoResource:D,ImageBitmapResource:L},N=function(){function System(c){this.renderer=c}return System.prototype.destroy=function(){this.renderer=null},System}(),k=function(c){function DepthResource(){return null!==c&&c.apply(this,arguments)||this}return __extends(DepthResource,c),DepthResource.prototype.upload=function(c,l,d){var f=c.gl;return f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.alphaMode===m.a.UNPACK),d.width===l.width&&d.height===l.height?f.texSubImage2D(l.target,0,0,0,l.width,l.height,l.format,l.type,this.data):(d.width=l.width,d.height=l.height,f.texImage2D(l.target,0,1===c.context.webGLVersion?f.DEPTH_COMPONENT:f.DEPTH_COMPONENT16,l.width,l.height,0,l.format,l.type,this.data)),!0},DepthResource}(T),j=function(){function Framebuffer(c,l){this.width=Math.ceil(c||100),this.height=Math.ceil(l||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new y.a("disposeFramebuffer"),this.multisample=m.k.NONE}return Object.defineProperty(Framebuffer.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),Framebuffer.prototype.addColorTexture=function(c,l){return void 0===c&&(c=0),this.colorTextures[c]=l||new E(null,{scaleMode:m.n.NEAREST,resolution:1,mipmap:m.j.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.addDepthTexture=function(c){return this.depthTexture=c||new E(new k(null,{width:this.width,height:this.height}),{scaleMode:m.n.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:m.j.OFF,format:m.g.DEPTH_COMPONENT,type:m.p.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.resize=function(c,l){if(c=Math.ceil(c),l=Math.ceil(l),c!==this.width||l!==this.height){this.width=c,this.height=l,this.dirtyId++,this.dirtySize++;for(var d=0;d<this.colorTextures.length;d++){var f=this.colorTextures[d],m=f.resolution;f.setSize(c/m,l/m)}if(this.depthTexture){m=this.depthTexture.resolution;this.depthTexture.setSize(c/m,l/m)}}},Framebuffer.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Framebuffer.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},Framebuffer}(),U=function(c){function BaseRenderTexture(l){var d=this;if("number"==typeof l){var f=arguments[0],m=arguments[1],_=arguments[2],y=arguments[3];l={width:f,height:m,scaleMode:_,resolution:y}}d=c.call(this,null,l)||this;var g=l||{},v=g.width,b=g.height;return d.mipmap=0,d.width=Math.ceil(v)||100,d.height=Math.ceil(b)||100,d.valid=!0,d.clearColor=[0,0,0,0],d.framebuffer=new j(d.width*d.resolution,d.height*d.resolution).addColorTexture(0,d),d.maskStack=[],d.filterStack=[{}],d}return __extends(BaseRenderTexture,c),BaseRenderTexture.prototype.resize=function(c,l){c=Math.ceil(c),l=Math.ceil(l),this.framebuffer.resize(c*this.resolution,l*this.resolution)},BaseRenderTexture.prototype.dispose=function(){this.framebuffer.dispose(),c.prototype.dispose.call(this)},BaseRenderTexture.prototype.destroy=function(){c.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},BaseRenderTexture}(E),G=function(){function TextureUvs(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return TextureUvs.prototype.set=function(c,l,d){var f=l.width,m=l.height;if(d){var _=c.width/2/f,y=c.height/2/m,g=c.x/f+_,b=c.y/m+y;d=v.n.add(d,v.n.NW),this.x0=g+_*v.n.uX(d),this.y0=b+y*v.n.uY(d),d=v.n.add(d,2),this.x1=g+_*v.n.uX(d),this.y1=b+y*v.n.uY(d),d=v.n.add(d,2),this.x2=g+_*v.n.uX(d),this.y2=b+y*v.n.uY(d),d=v.n.add(d,2),this.x3=g+_*v.n.uX(d),this.y3=b+y*v.n.uY(d)}else this.x0=c.x/f,this.y0=c.y/m,this.x1=(c.x+c.width)/f,this.y1=c.y/m,this.x2=(c.x+c.width)/f,this.y2=(c.y+c.height)/m,this.x3=c.x/f,this.y3=(c.y+c.height)/m;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},TextureUvs}(),X=new G,H=function(c){function Texture(l,d,f,m,_,y){var g=c.call(this)||this;if(g.noFrame=!1,d||(g.noFrame=!0,d=new v.j(0,0,1,1)),l instanceof Texture&&(l=l.baseTexture),g.baseTexture=l,g._frame=d,g.trim=m,g.valid=!1,g._uvs=X,g.uvMatrix=null,g.orig=f||d,g._rotate=Number(_||0),!0===_)g._rotate=2;else if(g._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return g.defaultAnchor=y?new v.g(y.x,y.y):new v.g(0,0),g._updateID=0,g.textureCacheIds=[],l.valid?g.noFrame?l.valid&&g.onBaseTextureUpdated(l):g.frame=d:l.once("loaded",g.onBaseTextureUpdated,g),g.noFrame&&l.on("update",g.onBaseTextureUpdated,g),g}return __extends(Texture,c),Texture.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},Texture.prototype.onBaseTextureUpdated=function(c){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=c.width,this._frame.height=c.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},Texture.prototype.destroy=function(c){if(this.baseTexture){if(c){var l=this.baseTexture;l&&l.url&&_.TextureCache[l.url]&&Texture.removeFromCache(l.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null},Texture.prototype.clone=function(){return new Texture(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},Texture.prototype.updateUvs=function(){this._uvs===X&&(this._uvs=new G),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},Texture.from=function(c,l,d){void 0===l&&(l={}),void 0===d&&(d=f.b.STRICT_TEXTURE_CACHE);var m="string"==typeof c,y=null;m?y=c:(c._pixiId||(c._pixiId="pixiid_"+Object(_.uid)()),y=c._pixiId);var g=_.TextureCache[y];if(m&&d&&!g)throw new Error('The cacheId "'+y+'" does not exist in TextureCache.');return g||(l.resolution||(l.resolution=Object(_.getResolutionOfUrl)(c)),(g=new Texture(new E(c,l))).baseTexture.cacheId=y,E.addToCache(g.baseTexture,y),Texture.addToCache(g,y)),g},Texture.fromURL=function(c,l){var d=Object.assign({autoLoad:!1},null==l?void 0:l.resourceOptions),f=Texture.from(c,Object.assign({resourceOptions:d},l),!1),m=f.baseTexture.resource;return f.baseTexture.valid?Promise.resolve(f):m.load().then((function(){return Promise.resolve(f)}))},Texture.fromBuffer=function(c,l,d,f){return new Texture(E.fromBuffer(c,l,d,f))},Texture.fromLoader=function(c,l,d){var m=new C(c);m.url=l;var y=new Texture(new E(m,{scaleMode:f.b.SCALE_MODE,resolution:Object(_.getResolutionOfUrl)(l)}));return d||(d=l),E.addToCache(y.baseTexture,d),Texture.addToCache(y,d),d!==l&&(E.addToCache(y.baseTexture,l),Texture.addToCache(y,l)),y},Texture.addToCache=function(c,l){l&&(-1===c.textureCacheIds.indexOf(l)&&c.textureCacheIds.push(l),_.TextureCache[l]&&console.warn("Texture added to the cache with an id ["+l+"] that already had an entry"),_.TextureCache[l]=c)},Texture.removeFromCache=function(c){if("string"==typeof c){var l=_.TextureCache[c];if(l){var d=l.textureCacheIds.indexOf(c);return d>-1&&l.textureCacheIds.splice(d,1),delete _.TextureCache[c],l}}else if(c&&c.textureCacheIds){for(var f=0;f<c.textureCacheIds.length;++f)_.TextureCache[c.textureCacheIds[f]]===c&&delete _.TextureCache[c.textureCacheIds[f]];return c.textureCacheIds.length=0,c}return null},Object.defineProperty(Texture.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"frame",{get:function(){return this._frame},set:function(c){this._frame=c,this.noFrame=!1;var l=c.x,d=c.y,f=c.width,m=c.height,_=l+f>this.baseTexture.width,y=d+m>this.baseTexture.height;if(_||y){var g=_&&y?"and":"or",v="X: "+l+" + "+f+" = "+(l+f)+" > "+this.baseTexture.width,b="Y: "+d+" + "+m+" = "+(d+m)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+v+" "+g+" "+b)}this.valid=f&&m&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=c),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"rotate",{get:function(){return this._rotate},set:function(c){this._rotate=c,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),Texture.prototype.castToBaseTexture=function(){return this.baseTexture},Texture}(_.EventEmitter);function removeAllHandlers(c){c.destroy=function _emptyDestroy(){},c.on=function _emptyOn(){},c.once=function _emptyOnce(){},c.emit=function _emptyEmit(){}}H.EMPTY=new H(new E),removeAllHandlers(H.EMPTY),removeAllHandlers(H.EMPTY.baseTexture),H.WHITE=function createWhiteTexture(){var c=document.createElement("canvas");c.width=16,c.height=16;var l=c.getContext("2d");return l.fillStyle="white",l.fillRect(0,0,16,16),new H(new E(new I(c)))}(),removeAllHandlers(H.WHITE),removeAllHandlers(H.WHITE.baseTexture);var z=function(c){function RenderTexture(l,d){var f=this,m=null;if(!(l instanceof U)){var _=arguments[1],y=arguments[2],g=arguments[3],v=arguments[4];console.warn("Please use RenderTexture.create("+_+", "+y+") instead of the ctor directly."),m=arguments[0],d=null,l=new U({width:_,height:y,scaleMode:g,resolution:v})}return(f=c.call(this,l,d)||this).legacyRenderer=m,f.valid=!0,f.filterFrame=null,f.filterPoolKey=null,f.updateUvs(),f}return __extends(RenderTexture,c),Object.defineProperty(RenderTexture.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),RenderTexture.prototype.resize=function(c,l,d){void 0===d&&(d=!0),c=Math.ceil(c),l=Math.ceil(l),this.valid=c>0&&l>0,this._frame.width=this.orig.width=c,this._frame.height=this.orig.height=l,d&&this.baseTexture.resize(c,l),this.updateUvs()},RenderTexture.prototype.setResolution=function(c){var l=this.baseTexture;l.resolution!==c&&(l.setResolution(c),this.resize(l.width,l.height,!1))},RenderTexture.create=function(c){return"number"==typeof c&&(c={width:c,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new RenderTexture(new U(c))},RenderTexture}(H),V=function(){function RenderTexturePool(c){this.texturePool={},this.textureOptions=c||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return RenderTexturePool.prototype.createTexture=function(c,l){var d=new U(Object.assign({width:c,height:l,resolution:1},this.textureOptions));return new z(d)},RenderTexturePool.prototype.getOptimalTexture=function(c,l,d){void 0===d&&(d=1);var f=RenderTexturePool.SCREEN_KEY;c*=d,l*=d,this.enableFullScreen&&c===this._pixelsWidth&&l===this._pixelsHeight||(f=(65535&(c=Object(_.nextPow2)(c)))<<16|65535&(l=Object(_.nextPow2)(l))),this.texturePool[f]||(this.texturePool[f]=[]);var m=this.texturePool[f].pop();return m||(m=this.createTexture(c,l)),m.filterPoolKey=f,m.setResolution(d),m},RenderTexturePool.prototype.getFilterTexture=function(c,l){var d=this.getOptimalTexture(c.width,c.height,l||c.resolution);return d.filterFrame=c.filterFrame,d},RenderTexturePool.prototype.returnTexture=function(c){var l=c.filterPoolKey;c.filterFrame=null,this.texturePool[l].push(c)},RenderTexturePool.prototype.returnFilterTexture=function(c){this.returnTexture(c)},RenderTexturePool.prototype.clear=function(c){if(c=!1!==c)for(var l in this.texturePool){var d=this.texturePool[l];if(d)for(var f=0;f<d.length;f++)d[f].destroy(!0)}this.texturePool={}},RenderTexturePool.prototype.setScreenSize=function(c){if(c.width!==this._pixelsWidth||c.height!==this._pixelsHeight){var l=RenderTexturePool.SCREEN_KEY,d=this.texturePool[l];if(this.enableFullScreen=c.width>0&&c.height>0,d)for(var f=0;f<d.length;f++)d[f].destroy(!0);this.texturePool[l]=[],this._pixelsWidth=c.width,this._pixelsHeight=c.height}},RenderTexturePool.SCREEN_KEY="screen",RenderTexturePool}(),Y=function(){function Attribute(c,l,d,f,m,_,y){void 0===l&&(l=0),void 0===d&&(d=!1),void 0===f&&(f=5126),this.buffer=c,this.size=l,this.normalized=d,this.type=f,this.stride=m,this.start=_,this.instance=y}return Attribute.prototype.destroy=function(){this.buffer=null},Attribute.from=function(c,l,d,f,m){return new Attribute(c,l,d,f,m)},Attribute}(),W=0,q=function(){function Buffer(c,l,d){void 0===l&&(l=!0),void 0===d&&(d=!1),this.data=c||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=d,this.static=l,this.id=W++,this.disposeRunner=new y.a("disposeBuffer")}return Buffer.prototype.update=function(c){this.data=c||this.data,this._updateID++},Buffer.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Buffer.prototype.destroy=function(){this.dispose(),this.data=null},Buffer.from=function(c){return c instanceof Array&&(c=new Float32Array(c)),new Buffer(c)},Buffer}();function getBufferType(c){if(4===c.BYTES_PER_ELEMENT)return c instanceof Float32Array?"Float32Array":c instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===c.BYTES_PER_ELEMENT){if(c instanceof Uint16Array)return"Uint16Array"}else if(1===c.BYTES_PER_ELEMENT&&c instanceof Uint8Array)return"Uint8Array";return null}var K={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Z={5126:4,5123:2,5121:1},Q=0,J={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},$=function(){function Geometry(c,l){void 0===c&&(c=[]),void 0===l&&(l={}),this.buffers=c,this.indexBuffer=null,this.attributes=l,this.glVertexArrayObjects={},this.id=Q++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new y.a("disposeGeometry"),this.refCount=0}return Geometry.prototype.addAttribute=function(c,l,d,f,m,_,y,g){if(void 0===d&&(d=0),void 0===f&&(f=!1),void 0===g&&(g=!1),!l)throw new Error("You must pass a buffer when creating an attribute");l instanceof q||(l instanceof Array&&(l=new Float32Array(l)),l=new q(l));var v=c.split("|");if(v.length>1){for(var b=0;b<v.length;b++)this.addAttribute(v[b],l,d,f,m);return this}var x=this.buffers.indexOf(l);return-1===x&&(this.buffers.push(l),x=this.buffers.length-1),this.attributes[c]=new Y(x,d,f,m,_,y,g),this.instanced=this.instanced||g,this},Geometry.prototype.getAttribute=function(c){return this.attributes[c]},Geometry.prototype.getBuffer=function(c){return this.buffers[this.getAttribute(c).buffer]},Geometry.prototype.addIndex=function(c){return c instanceof q||(c instanceof Array&&(c=new Uint16Array(c)),c=new q(c)),c.index=!0,this.indexBuffer=c,-1===this.buffers.indexOf(c)&&this.buffers.push(c),this},Geometry.prototype.getIndex=function(){return this.indexBuffer},Geometry.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var c,l=[],d=[],f=new q;for(c in this.attributes){var m=this.attributes[c],_=this.buffers[m.buffer];l.push(_.data),d.push(m.size*Z[m.type]/4),m.buffer=0}for(f.data=function interleaveTypedArrays(c,l){for(var d=0,f=0,m={},_=0;_<c.length;_++)f+=l[_],d+=c[_].length;var y=new ArrayBuffer(4*d),g=null,v=0;for(_=0;_<c.length;_++){var b=l[_],x=c[_],T=getBufferType(x);m[T]||(m[T]=new K[T](y)),g=m[T];for(var S=0;S<x.length;S++)g[(S/b|0)*f+v+S%b]=x[S];v+=b}return new Float32Array(y)}(l,d),c=0;c<this.buffers.length;c++)this.buffers[c]!==this.indexBuffer&&this.buffers[c].destroy();return this.buffers=[f],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},Geometry.prototype.getSize=function(){for(var c in this.attributes){var l=this.attributes[c];return this.buffers[l.buffer].data.length/(l.stride/4||l.size)}return 0},Geometry.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Geometry.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},Geometry.prototype.clone=function(){for(var c=new Geometry,l=0;l<this.buffers.length;l++)c.buffers[l]=new q(this.buffers[l].data.slice(0));for(var l in this.attributes){var d=this.attributes[l];c.attributes[l]=new Y(d.buffer,d.size,d.normalized,d.type,d.stride,d.start,d.instance)}return this.indexBuffer&&(c.indexBuffer=c.buffers[this.buffers.indexOf(this.indexBuffer)],c.indexBuffer.index=!0),c},Geometry.merge=function(c){for(var l,d=new Geometry,f=[],m=[],_=[],y=0;y<c.length;y++){l=c[y];for(var g=0;g<l.buffers.length;g++)m[g]=m[g]||0,m[g]+=l.buffers[g].data.length,_[g]=0}for(y=0;y<l.buffers.length;y++)f[y]=new(J[getBufferType(l.buffers[y].data)])(m[y]),d.buffers[y]=new q(f[y]);for(y=0;y<c.length;y++){l=c[y];for(g=0;g<l.buffers.length;g++)f[g].set(l.buffers[g].data,_[g]),_[g]+=l.buffers[g].data.length}if(d.attributes=l.attributes,l.indexBuffer){d.indexBuffer=d.buffers[l.buffers.indexOf(l.indexBuffer)],d.indexBuffer.index=!0;var v=0,b=0,x=0,T=0;for(y=0;y<l.buffers.length;y++)if(l.buffers[y]!==l.indexBuffer){T=y;break}for(var y in l.attributes){var S=l.attributes[y];(0|S.buffer)===T&&(b+=S.size*Z[S.type]/4)}for(y=0;y<c.length;y++){var E=c[y].indexBuffer.data;for(g=0;g<E.length;g++)d.indexBuffer.data[g+x]+=v;v+=l.buffers[T].data.length/b,x+=E.length}}return d},Geometry}(),tt=function(c){function Quad(){var l=c.call(this)||this;return l.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),l}return __extends(Quad,c),Quad}($),et=function(c){function QuadUv(){var l=c.call(this)||this;return l.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),l.uvs=new Float32Array([0,0,1,0,1,1,0,1]),l.vertexBuffer=new q(l.vertices),l.uvBuffer=new q(l.uvs),l.addAttribute("aVertexPosition",l.vertexBuffer).addAttribute("aTextureCoord",l.uvBuffer).addIndex([0,1,2,0,2,3]),l}return __extends(QuadUv,c),QuadUv.prototype.map=function(c,l){var d=0,f=0;return this.uvs[0]=d,this.uvs[1]=f,this.uvs[2]=d+l.width/c.width,this.uvs[3]=f,this.uvs[4]=d+l.width/c.width,this.uvs[5]=f+l.height/c.height,this.uvs[6]=d,this.uvs[7]=f+l.height/c.height,d=l.x,f=l.y,this.vertices[0]=d,this.vertices[1]=f,this.vertices[2]=d+l.width,this.vertices[3]=f,this.vertices[4]=d+l.width,this.vertices[5]=f+l.height,this.vertices[6]=d,this.vertices[7]=f+l.height,this.invalidate(),this},QuadUv.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},QuadUv}($),rt=0,it=function(){function UniformGroup(c,l){this.uniforms=c,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=rt++,this.static=!!l}return UniformGroup.prototype.update=function(){this.dirtyId++},UniformGroup.prototype.add=function(c,l,d){this.uniforms[c]=new UniformGroup(l,d)},UniformGroup.from=function(c,l){return new UniformGroup(c,l)},UniformGroup}(),nt=function(){function FilterState(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new v.j,this.destinationFrame=new v.j,this.filters=[]}return FilterState.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},FilterState}(),ot=function(c){function FilterSystem(l){var d=c.call(this,l)||this;return d.defaultFilterStack=[{}],d.texturePool=new V,d.texturePool.setScreenSize(l.view),d.statePool=[],d.quad=new tt,d.quadUv=new et,d.tempRect=new v.j,d.activeState={},d.globalUniforms=new it({outputFrame:d.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),d.forceClear=!1,d.useMaxPadding=!1,d}return __extends(FilterSystem,c),FilterSystem.prototype.push=function(c,l){for(var d=this.renderer,f=this.defaultFilterStack,m=this.statePool.pop()||new nt,_=l[0].resolution,y=l[0].padding,g=l[0].autoFit,v=l[0].legacy,b=1;b<l.length;b++){var x=l[b];_=Math.min(_,x.resolution),y=this.useMaxPadding?Math.max(y,x.padding):y+x.padding,g=g&&x.autoFit,v=v||x.legacy}1===f.length&&(this.defaultFilterStack[0].renderTexture=d.renderTexture.current),f.push(m),m.resolution=_,m.legacy=v,m.target=c,m.sourceFrame.copyFrom(c.filterArea||c.getBounds(!0)),m.sourceFrame.pad(y),g&&m.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),m.sourceFrame.ceil(_),m.renderTexture=this.getOptimalFilterTexture(m.sourceFrame.width,m.sourceFrame.height,_),m.filters=l,m.destinationFrame.width=m.renderTexture.width,m.destinationFrame.height=m.renderTexture.height;var T=this.tempRect;T.width=m.sourceFrame.width,T.height=m.sourceFrame.height,m.renderTexture.filterFrame=m.sourceFrame,d.renderTexture.bind(m.renderTexture,m.sourceFrame,T),d.renderTexture.clear()},FilterSystem.prototype.pop=function(){var c=this.defaultFilterStack,l=c.pop(),d=l.filters;this.activeState=l;var f=this.globalUniforms.uniforms;f.outputFrame=l.sourceFrame,f.resolution=l.resolution;var _=f.inputSize,y=f.inputPixel,g=f.inputClamp;if(_[0]=l.destinationFrame.width,_[1]=l.destinationFrame.height,_[2]=1/_[0],_[3]=1/_[1],y[0]=_[0]*l.resolution,y[1]=_[1]*l.resolution,y[2]=1/y[0],y[3]=1/y[1],g[0]=.5*y[2],g[1]=.5*y[3],g[2]=l.sourceFrame.width*_[2]-.5*y[2],g[3]=l.sourceFrame.height*_[3]-.5*y[3],l.legacy){var v=f.filterArea;v[0]=l.destinationFrame.width,v[1]=l.destinationFrame.height,v[2]=l.sourceFrame.x,v[3]=l.sourceFrame.y,f.filterClamp=f.inputClamp}this.globalUniforms.update();var b=c[c.length-1];if(l.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===d.length)d[0].apply(this,l.renderTexture,b.renderTexture,m.d.BLEND,l),this.returnFilterTexture(l.renderTexture);else{var x=l.renderTexture,T=this.getOptimalFilterTexture(x.width,x.height,l.resolution);T.filterFrame=x.filterFrame;var S=0;for(S=0;S<d.length-1;++S){d[S].apply(this,x,T,m.d.CLEAR,l);var E=x;x=T,T=E}d[S].apply(this,x,b.renderTexture,m.d.BLEND,l),this.returnFilterTexture(x),this.returnFilterTexture(T)}l.clear(),this.statePool.push(l)},FilterSystem.prototype.bindAndClear=function(c,l){if(void 0===l&&(l=m.d.CLEAR),c&&c.filterFrame){var d=this.tempRect;d.width=c.filterFrame.width,d.height=c.filterFrame.height,this.renderer.renderTexture.bind(c,c.filterFrame,d)}else this.renderer.renderTexture.bind(c);"boolean"==typeof l&&(l=l?m.d.CLEAR:m.d.BLEND,Object(_.deprecation)("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(l===m.d.CLEAR||l===m.d.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},FilterSystem.prototype.applyFilter=function(c,l,d,f){var _=this.renderer;this.bindAndClear(d,f),c.uniforms.uSampler=l,c.uniforms.filterGlobals=this.globalUniforms,_.state.set(c.state),_.shader.bind(c),c.legacy?(this.quadUv.map(l._frame,l.filterFrame),_.geometry.bind(this.quadUv),_.geometry.draw(m.e.TRIANGLES)):(_.geometry.bind(this.quad),_.geometry.draw(m.e.TRIANGLE_STRIP))},FilterSystem.prototype.calculateSpriteMatrix=function(c,l){var d=this.activeState,f=d.sourceFrame,m=d.destinationFrame,_=l._texture.orig,y=c.set(m.width,0,0,m.height,f.x,f.y),g=l.worldTransform.copyTo(v.d.TEMP_MATRIX);return g.invert(),y.prepend(g),y.scale(1/_.width,1/_.height),y.translate(l.anchor.x,l.anchor.y),y},FilterSystem.prototype.destroy=function(){this.texturePool.clear(!1)},FilterSystem.prototype.getOptimalFilterTexture=function(c,l,d){return void 0===d&&(d=1),this.texturePool.getOptimalTexture(c,l,d)},FilterSystem.prototype.getFilterTexture=function(c,l){if("number"==typeof c){var d=c;c=l,l=d}c=c||this.activeState.renderTexture;var f=this.texturePool.getOptimalTexture(c.width,c.height,l||c.resolution);return f.filterFrame=c.filterFrame,f},FilterSystem.prototype.returnFilterTexture=function(c){this.texturePool.returnTexture(c)},FilterSystem.prototype.emptyPool=function(){this.texturePool.clear(!0)},FilterSystem.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},FilterSystem}(N),st=function(){function ObjectRenderer(c){this.renderer=c}return ObjectRenderer.prototype.flush=function(){},ObjectRenderer.prototype.destroy=function(){this.renderer=null},ObjectRenderer.prototype.start=function(){},ObjectRenderer.prototype.stop=function(){this.flush()},ObjectRenderer.prototype.render=function(c){},ObjectRenderer}(),at=function(c){function BatchSystem(l){var d=c.call(this,l)||this;return d.emptyRenderer=new st(l),d.currentRenderer=d.emptyRenderer,d}return __extends(BatchSystem,c),BatchSystem.prototype.setObjectRenderer=function(c){this.currentRenderer!==c&&(this.currentRenderer.stop(),this.currentRenderer=c,this.currentRenderer.start())},BatchSystem.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},BatchSystem.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},BatchSystem.prototype.copyBoundTextures=function(c,l){for(var d=this.renderer.texture.boundTextures,f=l-1;f>=0;--f)c[f]=d[f]||null,c[f]&&(c[f]._batchLocation=f)},BatchSystem.prototype.boundArray=function(c,l,d,f){for(var m=c.elements,_=c.ids,y=c.count,g=0,v=0;v<y;v++){var b=m[v],x=b._batchLocation;if(x>=0&&x<f&&l[x]===b)_[v]=x;else for(;g<f;){var T=l[g];if(!T||T._batchEnabled!==d||T._batchLocation!==g){_[v]=g,b._batchLocation=g,l[g]=b;break}g++}}},BatchSystem}(N),ut=0,ht=function(c){function ContextSystem(l){var d=c.call(this,l)||this;return d.webGLVersion=1,d.extensions={},d.supports={uint32Indices:!1},d.handleContextLost=d.handleContextLost.bind(d),d.handleContextRestored=d.handleContextRestored.bind(d),l.view.addEventListener("webglcontextlost",d.handleContextLost,!1),l.view.addEventListener("webglcontextrestored",d.handleContextRestored,!1),d}return __extends(ContextSystem,c),Object.defineProperty(ContextSystem.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),ContextSystem.prototype.contextChange=function(c){this.gl=c,this.renderer.gl=c,this.renderer.CONTEXT_UID=ut++,c.isContextLost()&&c.getExtension("WEBGL_lose_context")&&c.getExtension("WEBGL_lose_context").restoreContext()},ContextSystem.prototype.initFromContext=function(c){this.gl=c,this.validateContext(c),this.renderer.gl=c,this.renderer.CONTEXT_UID=ut++,this.renderer.runners.contextChange.emit(c)},ContextSystem.prototype.initFromOptions=function(c){var l=this.createContext(this.renderer.view,c);this.initFromContext(l)},ContextSystem.prototype.createContext=function(c,l){var d;if(f.b.PREFER_ENV>=m.f.WEBGL2&&(d=c.getContext("webgl2",l)),d)this.webGLVersion=2;else if(this.webGLVersion=1,!(d=c.getContext("webgl",l)||c.getContext("experimental-webgl",l)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=d,this.getExtensions(),this.gl},ContextSystem.prototype.getExtensions=function(){var c=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:c.getExtension("WEBGL_draw_buffers"),depthTexture:c.getExtension("WEBGL_depth_texture"),loseContext:c.getExtension("WEBGL_lose_context"),vertexArrayObject:c.getExtension("OES_vertex_array_object")||c.getExtension("MOZ_OES_vertex_array_object")||c.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:c.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:c.getExtension("OES_element_index_uint"),floatTexture:c.getExtension("OES_texture_float"),floatTextureLinear:c.getExtension("OES_texture_float_linear"),textureHalfFloat:c.getExtension("OES_texture_half_float"),textureHalfFloatLinear:c.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:c.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:c.getExtension("EXT_color_buffer_float"),floatTextureLinear:c.getExtension("OES_texture_float_linear")})},ContextSystem.prototype.handleContextLost=function(c){c.preventDefault()},ContextSystem.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},ContextSystem.prototype.destroy=function(){var c=this.renderer.view;c.removeEventListener("webglcontextlost",this.handleContextLost),c.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},ContextSystem.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},ContextSystem.prototype.validateContext=function(c){var l=c.getContextAttributes(),d="WebGL2RenderingContext"in window&&c instanceof window.WebGL2RenderingContext;d&&(this.webGLVersion=2),l.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var f=d||!!c.getExtension("OES_element_index_uint");this.supports.uint32Indices=f,f||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},ContextSystem}(N),ct=function ct(c){this.framebuffer=c,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=m.k.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},lt=new v.j,dt=function(c){function FramebufferSystem(l){var d=c.call(this,l)||this;return d.managedFramebuffers=[],d.unknownFramebuffer=new j(10,10),d.msaaSamples=null,d}return __extends(FramebufferSystem,c),FramebufferSystem.prototype.contextChange=function(){var c=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new v.j,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var l=this.renderer.context.extensions.drawBuffers,d=this.renderer.context.extensions.depthTexture;f.b.PREFER_ENV===m.f.WEBGL_LEGACY&&(l=null,d=null),l?c.drawBuffers=function(c){return l.drawBuffersWEBGL(c)}:(this.hasMRT=!1,c.drawBuffers=function(){}),d||(this.writeDepthTexture=!1)}else this.msaaSamples=c.getInternalformatParameter(c.RENDERBUFFER,c.RGBA8,c.SAMPLES)},FramebufferSystem.prototype.bind=function(c,l){var d=this.gl;if(c){var f=c.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(c);this.current!==c&&(this.current=c,d.bindFramebuffer(d.FRAMEBUFFER,f.framebuffer)),f.dirtyId!==c.dirtyId&&(f.dirtyId=c.dirtyId,f.dirtyFormat!==c.dirtyFormat?(f.dirtyFormat=c.dirtyFormat,this.updateFramebuffer(c)):f.dirtySize!==c.dirtySize&&(f.dirtySize=c.dirtySize,this.resizeFramebuffer(c)));for(var m=0;m<c.colorTextures.length;m++){var _=c.colorTextures[m];this.renderer.texture.unbind(_.parentTextureArray||_)}c.depthTexture&&this.renderer.texture.unbind(c.depthTexture),l?this.setViewport(l.x,l.y,l.width,l.height):this.setViewport(0,0,c.width,c.height)}else this.current&&(this.current=null,d.bindFramebuffer(d.FRAMEBUFFER,null)),l?this.setViewport(l.x,l.y,l.width,l.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},FramebufferSystem.prototype.setViewport=function(c,l,d,f){var m=this.viewport;m.width===d&&m.height===f&&m.x===c&&m.y===l||(m.x=c,m.y=l,m.width=d,m.height=f,this.gl.viewport(c,l,d,f))},Object.defineProperty(FramebufferSystem.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),FramebufferSystem.prototype.clear=function(c,l,d,f,_){void 0===_&&(_=m.c.COLOR|m.c.DEPTH);var y=this.gl;y.clearColor(c,l,d,f),y.clear(_)},FramebufferSystem.prototype.initFramebuffer=function(c){var l=this.gl,d=new ct(l.createFramebuffer());return d.multisample=this.detectSamples(c.multisample),c.glFramebuffers[this.CONTEXT_UID]=d,this.managedFramebuffers.push(c),c.disposeRunner.add(this),d},FramebufferSystem.prototype.resizeFramebuffer=function(c){var l=this.gl,d=c.glFramebuffers[this.CONTEXT_UID];d.stencil&&(l.bindRenderbuffer(l.RENDERBUFFER,d.stencil),l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_STENCIL,c.width,c.height));for(var f=c.colorTextures,m=0;m<f.length;m++)this.renderer.texture.bind(f[m],0);c.depthTexture&&this.renderer.texture.bind(c.depthTexture,0)},FramebufferSystem.prototype.updateFramebuffer=function(c){var l=this.gl,d=c.glFramebuffers[this.CONTEXT_UID],f=c.colorTextures.length;l.drawBuffers||(f=Math.min(f,1)),d.multisample>1&&(d.msaaBuffer=l.createRenderbuffer(),l.bindRenderbuffer(l.RENDERBUFFER,d.msaaBuffer),l.renderbufferStorageMultisample(l.RENDERBUFFER,d.multisample,l.RGBA8,c.width,c.height),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.RENDERBUFFER,d.msaaBuffer));for(var m=[],_=0;_<f;_++)if(!(0===_&&d.multisample>1)){var y=c.colorTextures[_],g=y.parentTextureArray||y;this.renderer.texture.bind(g,0),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0+_,y.target,g._glTextures[this.CONTEXT_UID].texture,0),m.push(l.COLOR_ATTACHMENT0+_)}if((m.length>1&&l.drawBuffers(m),c.depthTexture)&&this.writeDepthTexture){var v=c.depthTexture;this.renderer.texture.bind(v,0),l.framebufferTexture2D(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.TEXTURE_2D,v._glTextures[this.CONTEXT_UID].texture,0)}d.stencil||!c.stencil&&!c.depth||(d.stencil=l.createRenderbuffer(),l.bindRenderbuffer(l.RENDERBUFFER,d.stencil),l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_STENCIL,c.width,c.height),c.depthTexture||l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,d.stencil))},FramebufferSystem.prototype.detectSamples=function(c){var l=this.msaaSamples,d=m.k.NONE;if(c<=1||null===l)return d;for(var f=0;f<l.length;f++)if(l[f]<=c){d=l[f];break}return 1===d&&(d=m.k.NONE),d},FramebufferSystem.prototype.blit=function(c,l,d){var f=this,m=f.current,_=f.renderer,y=f.gl,g=f.CONTEXT_UID;if(2===_.context.webGLVersion&&m){var v=m.glFramebuffers[g];if(v){if(!c){if(v.multisample<=1)return;v.blitFramebuffer||(v.blitFramebuffer=new j(m.width,m.height),v.blitFramebuffer.addColorTexture(0,m.colorTextures[0])),(c=v.blitFramebuffer).width=m.width,c.height=m.height}l||((l=lt).width=m.width,l.height=m.height),d||(d=l);var b=l.width===d.width&&l.height===d.height;this.bind(c),y.bindFramebuffer(y.READ_FRAMEBUFFER,v.framebuffer),y.blitFramebuffer(l.x,l.y,l.width,l.height,d.x,d.y,d.width,d.height,y.COLOR_BUFFER_BIT,b?y.NEAREST:y.LINEAR)}}},FramebufferSystem.prototype.disposeFramebuffer=function(c,l){var d=c.glFramebuffers[this.CONTEXT_UID],f=this.gl;if(d){delete c.glFramebuffers[this.CONTEXT_UID];var m=this.managedFramebuffers.indexOf(c);m>=0&&this.managedFramebuffers.splice(m,1),c.disposeRunner.remove(this),l||(f.deleteFramebuffer(d.framebuffer),d.stencil&&f.deleteRenderbuffer(d.stencil))}},FramebufferSystem.prototype.disposeAll=function(c){var l=this.managedFramebuffers;this.managedFramebuffers=[];for(var d=0;d<l.length;d++)this.disposeFramebuffer(l[d],c)},FramebufferSystem.prototype.forceStencil=function(){var c=this.current;if(c){var l=c.glFramebuffers[this.CONTEXT_UID];if(l&&!l.stencil){c.enableStencil();var d=c.width,f=c.height,m=this.gl,_=m.createRenderbuffer();m.bindRenderbuffer(m.RENDERBUFFER,_),m.renderbufferStorage(m.RENDERBUFFER,m.DEPTH_STENCIL,d,f),l.stencil=_,m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,_)}}},FramebufferSystem.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new v.j},FramebufferSystem}(N),pt=function pt(c){this.buffer=c||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},ft={5126:4,5123:2,5121:1},mt=function(c){function GeometrySystem(l){var d=c.call(this,l)||this;return d._activeGeometry=null,d._activeVao=null,d.hasVao=!0,d.hasInstance=!0,d.canUseUInt32ElementIndex=!1,d.managedGeometries={},d.managedBuffers={},d}return __extends(GeometrySystem,c),GeometrySystem.prototype.contextChange=function(){this.disposeAll(!0);var c=this.gl=this.renderer.gl,l=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==l.webGLVersion){var d=this.renderer.context.extensions.vertexArrayObject;f.b.PREFER_ENV===m.f.WEBGL_LEGACY&&(d=null),d?(c.createVertexArray=function(){return d.createVertexArrayOES()},c.bindVertexArray=function(c){return d.bindVertexArrayOES(c)},c.deleteVertexArray=function(c){return d.deleteVertexArrayOES(c)}):(this.hasVao=!1,c.createVertexArray=function(){return null},c.bindVertexArray=function(){return null},c.deleteVertexArray=function(){return null})}if(2!==l.webGLVersion){var _=c.getExtension("ANGLE_instanced_arrays");_?(c.vertexAttribDivisor=function(c,l){return _.vertexAttribDivisorANGLE(c,l)},c.drawElementsInstanced=function(c,l,d,f,m){return _.drawElementsInstancedANGLE(c,l,d,f,m)},c.drawArraysInstanced=function(c,l,d,f){return _.drawArraysInstancedANGLE(c,l,d,f)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===l.webGLVersion||!!l.extensions.uint32ElementIndex},GeometrySystem.prototype.bind=function(c,l){l=l||this.renderer.shader.shader;var d=this.gl,f=c.glVertexArrayObjects[this.CONTEXT_UID],m=!1;f||(this.managedGeometries[c.id]=c,c.disposeRunner.add(this),c.glVertexArrayObjects[this.CONTEXT_UID]=f={},m=!0);var _=f[l.program.id]||this.initGeometryVao(c,l.program,m);this._activeGeometry=c,this._activeVao!==_&&(this._activeVao=_,this.hasVao?d.bindVertexArray(_):this.activateVao(c,l.program)),this.updateBuffers()},GeometrySystem.prototype.reset=function(){this.unbind()},GeometrySystem.prototype.updateBuffers=function(){for(var c=this._activeGeometry,l=this.gl,d=0;d<c.buffers.length;d++){var f=c.buffers[d],m=f._glBuffers[this.CONTEXT_UID];if(f._updateID!==m.updateID){m.updateID=f._updateID;var _=f.index?l.ELEMENT_ARRAY_BUFFER:l.ARRAY_BUFFER;if(l.bindBuffer(_,m.buffer),this._boundBuffer=m,m.byteLength>=f.data.byteLength)l.bufferSubData(_,0,f.data);else{var y=f.static?l.STATIC_DRAW:l.DYNAMIC_DRAW;m.byteLength=f.data.byteLength,l.bufferData(_,f.data,y)}}}},GeometrySystem.prototype.checkCompatibility=function(c,l){var d=c.attributes,f=l.attributeData;for(var m in f)if(!d[m])throw new Error('shader and geometry incompatible, geometry missing the "'+m+'" attribute')},GeometrySystem.prototype.getSignature=function(c,l){var d=c.attributes,f=l.attributeData,m=["g",c.id];for(var _ in d)f[_]&&m.push(_);return m.join("-")},GeometrySystem.prototype.initGeometryVao=function(c,l,d){void 0===d&&(d=!0),this.checkCompatibility(c,l);var f=this.gl,m=this.CONTEXT_UID,_=this.getSignature(c,l),y=c.glVertexArrayObjects[this.CONTEXT_UID],g=y[_];if(g)return y[l.id]=g,g;var v=c.buffers,b=c.attributes,x={},T={};for(var S in v)x[S]=0,T[S]=0;for(var S in b)!b[S].size&&l.attributeData[S]?b[S].size=l.attributeData[S].size:b[S].size||console.warn("PIXI Geometry attribute '"+S+"' size cannot be determined (likely the bound shader does not have the attribute)"),x[b[S].buffer]+=b[S].size*ft[b[S].type];for(var S in b){var E=b[S],P=E.size;void 0===E.stride&&(x[E.buffer]===P*ft[E.type]?E.stride=0:E.stride=x[E.buffer]),void 0===E.start&&(E.start=T[E.buffer],T[E.buffer]+=P*ft[E.type])}g=f.createVertexArray(),f.bindVertexArray(g);for(var w=0;w<v.length;w++){var O=v[w];O._glBuffers[m]||(O._glBuffers[m]=new pt(f.createBuffer()),this.managedBuffers[O.id]=O,O.disposeRunner.add(this)),d&&O._glBuffers[m].refCount++}return this.activateVao(c,l),this._activeVao=g,y[l.id]=g,y[_]=g,g},GeometrySystem.prototype.disposeBuffer=function(c,l){if(this.managedBuffers[c.id]){delete this.managedBuffers[c.id];var d=c._glBuffers[this.CONTEXT_UID],f=this.gl;c.disposeRunner.remove(this),d&&(l||f.deleteBuffer(d.buffer),delete c._glBuffers[this.CONTEXT_UID])}},GeometrySystem.prototype.disposeGeometry=function(c,l){if(this.managedGeometries[c.id]){delete this.managedGeometries[c.id];var d=c.glVertexArrayObjects[this.CONTEXT_UID],f=this.gl,m=c.buffers;if(c.disposeRunner.remove(this),d){for(var _=0;_<m.length;_++){var y=m[_]._glBuffers[this.CONTEXT_UID];y.refCount--,0!==y.refCount||l||this.disposeBuffer(m[_],l)}if(!l)for(var g in d)if("g"===g[0]){var v=d[g];this._activeVao===v&&this.unbind(),f.deleteVertexArray(v)}delete c.glVertexArrayObjects[this.CONTEXT_UID]}}},GeometrySystem.prototype.disposeAll=function(c){for(var l=Object.keys(this.managedGeometries),d=0;d<l.length;d++)this.disposeGeometry(this.managedGeometries[l[d]],c);l=Object.keys(this.managedBuffers);for(d=0;d<l.length;d++)this.disposeBuffer(this.managedBuffers[l[d]],c)},GeometrySystem.prototype.activateVao=function(c,l){var d=this.gl,f=this.CONTEXT_UID,m=c.buffers,_=c.attributes;c.indexBuffer&&d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,c.indexBuffer._glBuffers[f].buffer);var y=null;for(var g in _){var v=_[g],b=m[v.buffer]._glBuffers[f];if(l.attributeData[g]){y!==b&&(d.bindBuffer(d.ARRAY_BUFFER,b.buffer),y=b);var x=l.attributeData[g].location;if(d.enableVertexAttribArray(x),d.vertexAttribPointer(x,v.size,v.type||d.FLOAT,v.normalized,v.stride,v.start),v.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");d.vertexAttribDivisor(x,1)}}}},GeometrySystem.prototype.draw=function(c,l,d,f){var m=this.gl,_=this._activeGeometry;if(_.indexBuffer){var y=_.indexBuffer.data.BYTES_PER_ELEMENT,g=2===y?m.UNSIGNED_SHORT:m.UNSIGNED_INT;2===y||4===y&&this.canUseUInt32ElementIndex?_.instanced?m.drawElementsInstanced(c,l||_.indexBuffer.data.length,g,(d||0)*y,f||1):m.drawElements(c,l||_.indexBuffer.data.length,g,(d||0)*y):console.warn("unsupported index buffer type: uint32")}else _.instanced?m.drawArraysInstanced(c,d,l||_.getSize(),f||1):m.drawArrays(c,d,l||_.getSize());return this},GeometrySystem.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},GeometrySystem}(N),_t=function(){function MaskData(c){void 0===c&&(c=null),this.type=m.i.NONE,this.autoDetect=!0,this.maskObject=c||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return MaskData.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=m.i.NONE,this.autoDetect=!0),this._target=null},MaskData.prototype.copyCountersOrReset=function(c){c?(this._stencilCounter=c._stencilCounter,this._scissorCounter=c._scissorCounter,this._scissorRect=c._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},MaskData}();function compileShader(c,l,d){var f=c.createShader(l);return c.shaderSource(f,d),c.compileShader(f),f}function compileProgram(c,l,d,f){var m=compileShader(c,c.VERTEX_SHADER,l),_=compileShader(c,c.FRAGMENT_SHADER,d),y=c.createProgram();if(c.attachShader(y,m),c.attachShader(y,_),f)for(var g in f)c.bindAttribLocation(y,f[g],g);return c.linkProgram(y),c.getProgramParameter(y,c.LINK_STATUS)||(c.getShaderParameter(m,c.COMPILE_STATUS)||(console.warn(l),console.error(c.getShaderInfoLog(m))),c.getShaderParameter(_,c.COMPILE_STATUS)||(console.warn(d),console.error(c.getShaderInfoLog(_))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",c.getProgramParameter(y,c.VALIDATE_STATUS)),console.error("gl.getError()",c.getError()),""!==c.getProgramInfoLog(y)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",c.getProgramInfoLog(y)),c.deleteProgram(y),y=null),c.deleteShader(m),c.deleteShader(_),y}function booleanArray(c){for(var l=new Array(c),d=0;d<l.length;d++)l[d]=!1;return l}function defaultValue(c,l){switch(c){case"float":return 0;case"vec2":return new Float32Array(2*l);case"vec3":return new Float32Array(3*l);case"vec4":return new Float32Array(4*l);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*l);case"ivec3":return new Int32Array(3*l);case"ivec4":return new Int32Array(4*l);case"bool":return!1;case"bvec2":return booleanArray(2*l);case"bvec3":return booleanArray(3*l);case"bvec4":return booleanArray(4*l);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var yt,gt={},vt=gt;function getTestContext(){if(vt===gt||vt&&vt.isContextLost()){var c=document.createElement("canvas"),l=void 0;f.b.PREFER_ENV>=m.f.WEBGL2&&(l=c.getContext("webgl2",{})),l||((l=c.getContext("webgl",{})||c.getContext("experimental-webgl",{}))?l.getExtension("WEBGL_draw_buffers"):l=null),vt=l}return vt}function setPrecision(c,l,d){if("precision"!==c.substring(0,9)){var f=l;return l===m.l.HIGH&&d!==m.l.HIGH&&(f=m.l.MEDIUM),"precision "+f+" float;\n"+c}return d!==m.l.HIGH&&"precision highp"===c.substring(0,15)?c.replace("precision highp","precision mediump"):c}var bt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(c){return bt[c]}var xt=null,Tt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(c,l){if(!xt){var d=Object.keys(Tt);xt={};for(var f=0;f<d.length;++f){var m=d[f];xt[c[m]]=Tt[m]}}return xt[l]}var St=[{test:function(c){return"float"===c.type&&1===c.size},code:function(c){return'\n            if(uv["'+c+'"] !== ud["'+c+'"].value)\n            {\n                ud["'+c+'"].value = uv["'+c+'"]\n                gl.uniform1f(ud["'+c+'"].location, uv["'+c+'"])\n            }\n            '}},{test:function(c){return("sampler2D"===c.type||"samplerCube"===c.type||"sampler2DArray"===c.type)&&1===c.size&&!c.isArray},code:function(c){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+c+'"], t);\n\n            if(ud["'+c+'"].value !== t)\n            {\n                ud["'+c+'"].value = t;\n                gl.uniform1i(ud["'+c+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(c,l){return"mat3"===c.type&&1===c.size&&void 0!==l.a},code:function(c){return'\n            gl.uniformMatrix3fv(ud["'+c+'"].location, false, uv["'+c+'"].toArray(true));\n            '}},{test:function(c,l){return"vec2"===c.type&&1===c.size&&void 0!==l.x},code:function(c){return'\n                cv = ud["'+c+'"].value;\n                v = uv["'+c+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+c+'"].location, v.x, v.y);\n                }'}},{test:function(c){return"vec2"===c.type&&1===c.size},code:function(c){return'\n                cv = ud["'+c+'"].value;\n                v = uv["'+c+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+c+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(c,l){return"vec4"===c.type&&1===c.size&&void 0!==l.width},code:function(c){return'\n                cv = ud["'+c+'"].value;\n                v = uv["'+c+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+c+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(c){return"vec4"===c.type&&1===c.size},code:function(c){return'\n                cv = ud["'+c+'"].value;\n                v = uv["'+c+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+c+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Et={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Pt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var wt,Ot=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function generateIfTestSrc(c){for(var l="",d=0;d<c;++d)d>0&&(l+="\nelse "),d<c-1&&(l+="if(test == "+d+".0){}");return l}function checkMaxIfStatementsInShader(c,l){if(0===c)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var d=l.createShader(l.FRAGMENT_SHADER);;){var f=Ot.replace(/%forloop%/gi,generateIfTestSrc(c));if(l.shaderSource(d,f),l.compileShader(d),l.getShaderParameter(d,l.COMPILE_STATUS))break;c=c/2|0}return c}var It=0,At={},Ct=function(){function Program(c,l,d){void 0===d&&(d="pixi-shader"),this.id=It++,this.vertexSrc=c||Program.defaultVertexSrc,this.fragmentSrc=l||Program.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(d=d.replace(/\s+/g,"-"),At[d]?(At[d]++,d+="-"+At[d]):At[d]=1,this.vertexSrc="#define SHADER_NAME "+d+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+d+"\n"+this.fragmentSrc,this.vertexSrc=setPrecision(this.vertexSrc,f.b.PRECISION_VERTEX,m.l.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,f.b.PRECISION_FRAGMENT,function getMaxFragmentPrecision(){if(!yt){yt=m.l.MEDIUM;var c=getTestContext();if(c&&c.getShaderPrecisionFormat){var l=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT);yt=l.precision?m.l.HIGH:m.l.MEDIUM}}return yt}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return Program.prototype.extractData=function(c,l){var d=getTestContext();if(d){var f=compileProgram(d,c,l);this.attributeData=this.getAttributeData(f,d),this.uniformData=this.getUniformData(f,d),d.deleteProgram(f)}else this.uniformData={},this.attributeData={}},Program.prototype.getAttributeData=function(c,l){for(var d={},f=[],m=l.getProgramParameter(c,l.ACTIVE_ATTRIBUTES),_=0;_<m;_++){var y=l.getActiveAttrib(c,_),g=mapType(l,y.type),v={type:g,name:y.name,size:mapSize(g),location:0};d[y.name]=v,f.push(v)}f.sort((function(c,l){return c.name>l.name?1:-1}));for(_=0;_<f.length;_++)f[_].location=_;return d},Program.prototype.getUniformData=function(c,l){for(var d={},f=l.getProgramParameter(c,l.ACTIVE_UNIFORMS),m=0;m<f;m++){var _=l.getActiveUniform(c,m),y=_.name.replace(/\[.*?\]$/,""),g=_.name.match(/\[.*?\]$/),v=mapType(l,_.type);d[y]={type:v,size:_.size,isArray:g,value:defaultValue(v,_.size)}}return d},Object.defineProperty(Program,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Program,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),Program.from=function(c,l,d){var f=c+l,m=_.ProgramCache[f];return m||(_.ProgramCache[f]=m=new Program(c,l,d)),m},Program}(),Mt=function(){function Shader(c,l){for(var d in this.program=c,this.uniformGroup=l?l instanceof it?l:new it(l):new it({}),c.uniformData)this.uniformGroup.uniforms[d]instanceof Array&&(this.uniformGroup.uniforms[d]=new Float32Array(this.uniformGroup.uniforms[d]))}return Shader.prototype.checkUniformExists=function(c,l){if(l.uniforms[c])return!0;for(var d in l.uniforms){var f=l.uniforms[d];if(f.group&&this.checkUniformExists(c,f))return!0}return!1},Shader.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(Shader.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),Shader.from=function(c,l,d){return new Shader(Ct.from(c,l),d)},Shader}(),Rt=function(){function State(){this.data=0,this.blendMode=m.b.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(State.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(c){!!(1&this.data)!==c&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(c){!!(2&this.data)!==c&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(c){!!(4&this.data)!==c&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(c){!!(8&this.data)!==c&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(c){!!(16&this.data)!==c&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"blendMode",{get:function(){return this._blendMode},set:function(c){this.blend=c!==m.b.NONE,this._blendMode=c},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(c){this.offsets=!!c,this._polygonOffset=c},enumerable:!1,configurable:!0}),State.for2d=function(){var c=new State;return c.depthTest=!1,c.blend=!0,c},State}(),Dt=function(c){function Filter(l,d,m){var _=this,y=Ct.from(l||Filter.defaultVertexSrc,d||Filter.defaultFragmentSrc);return(_=c.call(this,y,m)||this).padding=0,_.resolution=f.b.FILTER_RESOLUTION,_.enabled=!0,_.autoFit=!0,_.legacy=!!_.program.attributeData.aTextureCoord,_.state=new Rt,_}return __extends(Filter,c),Filter.prototype.apply=function(c,l,d,f,m){c.applyFilter(this,l,d,f)},Object.defineProperty(Filter.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(c){this.state.blendMode=c},enumerable:!1,configurable:!0}),Object.defineProperty(Filter,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Filter,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),Filter}(Mt),Ft=new v.d,Lt=function(){function TextureMatrix(c,l){this._texture=c,this.mapCoord=new v.d,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===l?.5:l,this.isSimple=!1}return Object.defineProperty(TextureMatrix.prototype,"texture",{get:function(){return this._texture},set:function(c){this._texture=c,this._textureID=-1},enumerable:!1,configurable:!0}),TextureMatrix.prototype.multiplyUvs=function(c,l){void 0===l&&(l=c);for(var d=this.mapCoord,f=0;f<c.length;f+=2){var m=c[f],_=c[f+1];l[f]=m*d.a+_*d.c+d.tx,l[f+1]=m*d.b+_*d.d+d.ty}return l},TextureMatrix.prototype.update=function(c){var l=this._texture;if(!l||!l.valid)return!1;if(!c&&this._textureID===l._updateID)return!1;this._textureID=l._updateID,this._updateID++;var d=l._uvs;this.mapCoord.set(d.x1-d.x0,d.y1-d.y0,d.x3-d.x0,d.y3-d.y0,d.x0,d.y0);var f=l.orig,m=l.trim;m&&(Ft.set(f.width/m.width,0,0,f.height/m.height,-m.x/m.width,-m.y/m.height),this.mapCoord.append(Ft));var _=l.baseTexture,y=this.uClampFrame,g=this.clampMargin/_.resolution,v=this.clampOffset;return y[0]=(l._frame.x+g+v)/_.width,y[1]=(l._frame.y+g+v)/_.height,y[2]=(l._frame.x+l._frame.width-g+v)/_.width,y[3]=(l._frame.y+l._frame.height-g+v)/_.height,this.uClampOffset[0]=v/_.realWidth,this.uClampOffset[1]=v/_.realHeight,this.isSimple=l._frame.width===_.width&&l._frame.height===_.height&&0===l.rotate,!0},TextureMatrix}(),Bt=function(c){function SpriteMaskFilter(l){var d=this,f=new v.d;return d=c.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,l.renderable=!1,d.maskSprite=l,d.maskMatrix=f,d}return __extends(SpriteMaskFilter,c),SpriteMaskFilter.prototype.apply=function(c,l,d,f){var m=this.maskSprite,_=m._texture;_.valid&&(_.uvMatrix||(_.uvMatrix=new Lt(_,0)),_.uvMatrix.update(),this.uniforms.npmAlpha=_.baseTexture.alphaMode?0:1,this.uniforms.mask=_,this.uniforms.otherMatrix=c.calculateSpriteMatrix(this.maskMatrix,m).prepend(_.uvMatrix.mapCoord),this.uniforms.alpha=m.worldAlpha,this.uniforms.maskClamp=_.uvMatrix.uClampFrame,c.applyFilter(this,l,d,f))},SpriteMaskFilter}(Dt),Nt=function(c){function MaskSystem(l){var d=c.call(this,l)||this;return d.enableScissor=!1,d.alphaMaskPool=[],d.maskDataPool=[],d.maskStack=[],d.alphaMaskIndex=0,d}return __extends(MaskSystem,c),MaskSystem.prototype.setMaskStack=function(c){this.maskStack=c,this.renderer.scissor.setMaskStack(c),this.renderer.stencil.setMaskStack(c)},MaskSystem.prototype.push=function(c,l){var d=l;if(!d.isMaskData){var f=this.maskDataPool.pop()||new _t;f.pooled=!0,f.maskObject=l,d=f}switch(d.autoDetect&&this.detect(d),d.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),d._target=c,d.type){case m.i.SCISSOR:this.maskStack.push(d),this.renderer.scissor.push(d);break;case m.i.STENCIL:this.maskStack.push(d),this.renderer.stencil.push(d);break;case m.i.SPRITE:d.copyCountersOrReset(null),this.pushSpriteMask(d),this.maskStack.push(d)}},MaskSystem.prototype.pop=function(c){var l=this.maskStack.pop();if(l&&l._target===c){switch(l.type){case m.i.SCISSOR:this.renderer.scissor.pop();break;case m.i.STENCIL:this.renderer.stencil.pop(l.maskObject);break;case m.i.SPRITE:this.popSpriteMask()}l.reset(),l.pooled&&this.maskDataPool.push(l)}},MaskSystem.prototype.detect=function(c){var l=c.maskObject;if(l.isSprite)c.type=m.i.SPRITE;else if(c.type=m.i.STENCIL,this.enableScissor&&l.isFastRect&&l.isFastRect()){var d=l.worldTransform,f=Math.atan2(d.b,d.a),_=Math.atan2(d.d,d.c);f=Math.round(f*(180/Math.PI)*100),_=((_=Math.round(_*(180/Math.PI)*100)-f)%18e3+18e3)%18e3,0===(f=(f%9e3+9e3)%9e3)&&9e3===_&&(c.type=m.i.SCISSOR)}},MaskSystem.prototype.pushSpriteMask=function(c){var l=c.maskObject,d=c._target,f=this.alphaMaskPool[this.alphaMaskIndex];f||(f=this.alphaMaskPool[this.alphaMaskIndex]=[new Bt(l)]),f[0].resolution=this.renderer.resolution,f[0].maskSprite=l;var m=d.filterArea;d.filterArea=l.getBounds(!0),this.renderer.filter.push(d,f),d.filterArea=m,this.alphaMaskIndex++},MaskSystem.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},MaskSystem}(N),kt=function(c){function AbstractMaskSystem(l){var d=c.call(this,l)||this;return d.maskStack=[],d.glConst=0,d}return __extends(AbstractMaskSystem,c),AbstractMaskSystem.prototype.getStackLength=function(){return this.maskStack.length},AbstractMaskSystem.prototype.setMaskStack=function(c){var l=this.renderer.gl,d=this.getStackLength();this.maskStack=c;var f=this.getStackLength();f!==d&&(0===f?l.disable(this.glConst):(l.enable(this.glConst),this._useCurrent()))},AbstractMaskSystem.prototype._useCurrent=function(){},AbstractMaskSystem.prototype.destroy=function(){c.prototype.destroy.call(this),this.maskStack=null},AbstractMaskSystem}(N),jt=function(c){function ScissorSystem(l){var d=c.call(this,l)||this;return d.glConst=WebGLRenderingContext.SCISSOR_TEST,d}return __extends(ScissorSystem,c),ScissorSystem.prototype.getStackLength=function(){var c=this.maskStack[this.maskStack.length-1];return c?c._scissorCounter:0},ScissorSystem.prototype.push=function(c){var l=c.maskObject;l.renderable=!0;var d=c._scissorRect,f=l.getBounds(!0),m=this.renderer.gl;l.renderable=!1,d?f.fit(d):m.enable(m.SCISSOR_TEST),c._scissorCounter++,c._scissorRect=f,this._useCurrent()},ScissorSystem.prototype.pop=function(){var c=this.renderer.gl;this.getStackLength()>0?this._useCurrent():c.disable(c.SCISSOR_TEST)},ScissorSystem.prototype._useCurrent=function(){var c=this.maskStack[this.maskStack.length-1]._scissorRect,l=this.renderer.renderTexture.current,d=this.renderer.projection,f=d.transform,m=d.sourceFrame,_=d.destinationFrame,y=l?l.resolution:this.renderer.resolution,g=(c.x-m.x)*y+_.x,v=(c.y-m.y)*y+_.y,b=c.width*y,x=c.height*y;f&&(g+=f.tx*y,v+=f.ty*y),l||(v=this.renderer.height-x-v),this.renderer.gl.scissor(g,v,b,x)},ScissorSystem}(kt),Ut=function(c){function StencilSystem(l){var d=c.call(this,l)||this;return d.glConst=WebGLRenderingContext.STENCIL_TEST,d}return __extends(StencilSystem,c),StencilSystem.prototype.getStackLength=function(){var c=this.maskStack[this.maskStack.length-1];return c?c._stencilCounter:0},StencilSystem.prototype.push=function(c){var l=c.maskObject,d=this.renderer.gl,f=c._stencilCounter;0===f&&(this.renderer.framebuffer.forceStencil(),d.enable(d.STENCIL_TEST)),c._stencilCounter++,d.colorMask(!1,!1,!1,!1),d.stencilFunc(d.EQUAL,f,this._getBitwiseMask()),d.stencilOp(d.KEEP,d.KEEP,d.INCR),l.renderable=!0,l.render(this.renderer),this.renderer.batch.flush(),l.renderable=!1,this._useCurrent()},StencilSystem.prototype.pop=function(c){var l=this.renderer.gl;0===this.getStackLength()?(l.disable(l.STENCIL_TEST),l.clear(l.STENCIL_BUFFER_BIT),l.clearStencil(0)):(l.colorMask(!1,!1,!1,!1),l.stencilOp(l.KEEP,l.KEEP,l.DECR),c.renderable=!0,c.render(this.renderer),this.renderer.batch.flush(),c.renderable=!1,this._useCurrent())},StencilSystem.prototype._useCurrent=function(){var c=this.renderer.gl;c.colorMask(!0,!0,!0,!0),c.stencilFunc(c.EQUAL,this.getStackLength(),this._getBitwiseMask()),c.stencilOp(c.KEEP,c.KEEP,c.KEEP)},StencilSystem.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},StencilSystem}(kt),Gt=function(c){function ProjectionSystem(l){var d=c.call(this,l)||this;return d.destinationFrame=null,d.sourceFrame=null,d.defaultFrame=null,d.projectionMatrix=new v.d,d.transform=null,d}return __extends(ProjectionSystem,c),ProjectionSystem.prototype.update=function(c,l,d,f){this.destinationFrame=c||this.destinationFrame||this.defaultFrame,this.sourceFrame=l||this.sourceFrame||c,this.calculateProjection(this.destinationFrame,this.sourceFrame,d,f),this.transform&&this.projectionMatrix.append(this.transform);var m=this.renderer;m.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,m.globalUniforms.update(),m.shader.shader&&m.shader.syncUniformGroup(m.shader.shader.uniforms.globals)},ProjectionSystem.prototype.calculateProjection=function(c,l,d,f){var m=this.projectionMatrix,_=f?-1:1;m.identity(),m.a=1/l.width*2,m.d=_*(1/l.height*2),m.tx=-1-l.x*m.a,m.ty=-_-l.y*m.d},ProjectionSystem.prototype.setTransform=function(c){},ProjectionSystem}(N),Xt=new v.j,Ht=new v.j,zt=new v.j,Vt=function(c){function RenderTextureSystem(l){var d=c.call(this,l)||this;return d.clearColor=l._backgroundColorRgba,d.defaultMaskStack=[],d.current=null,d.sourceFrame=new v.j,d.destinationFrame=new v.j,d}return __extends(RenderTextureSystem,c),RenderTextureSystem.prototype.bind=function(c,l,d){void 0===c&&(c=null);var f,m,_,y=this.renderer;this.current=c,c?(_=(f=c.baseTexture).resolution,l||(Xt.width=c.frame.width,Xt.height=c.frame.height,l=Xt),d||(Ht.x=c.frame.x,Ht.y=c.frame.y,Ht.width=l.width,Ht.height=l.height,d=Ht),m=f.framebuffer):(_=y.resolution,l||(Xt.width=y.screen.width,Xt.height=y.screen.height,l=Xt),d||((d=Xt).width=l.width,d.height=l.height)),zt.x=d.x*_,zt.y=d.y*_,zt.width=d.width*_,zt.height=d.height*_,this.renderer.framebuffer.bind(m,zt),this.renderer.projection.update(d,l,_,!m),c?this.renderer.mask.setMaskStack(f.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(l),this.destinationFrame.copyFrom(d)},RenderTextureSystem.prototype.clear=function(c,l){c=this.current?c||this.current.baseTexture.clearColor:c||this.clearColor,this.renderer.framebuffer.clear(c[0],c[1],c[2],c[3],l)},RenderTextureSystem.prototype.resize=function(){this.bind(null)},RenderTextureSystem.prototype.reset=function(){this.bind(null)},RenderTextureSystem}(N),Yt=function Yt(){},Wt=function(){function GLProgram(c,l){this.program=c,this.uniformData=l,this.uniformGroups={}}return GLProgram.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},GLProgram}(),qt=0,Kt={textureCount:0},Zt=function(c){function ShaderSystem(l){var d=c.call(this,l)||this;return d.destroyed=!1,d.systemCheck(),d.gl=null,d.shader=null,d.program=null,d.cache={},d.id=qt++,d}return __extends(ShaderSystem,c),ShaderSystem.prototype.systemCheck=function(){if(!function unsafeEvalSupported(){if("boolean"==typeof wt)return wt;try{var c=new Function("param1","param2","param3","return param1[param2] === param3;");wt=!0===c({a:"b"},"a","b")}catch(c){wt=!1}return wt}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},ShaderSystem.prototype.contextChange=function(c){this.gl=c,this.reset()},ShaderSystem.prototype.bind=function(c,l){c.uniforms.globals=this.renderer.globalUniforms;var d=c.program,f=d.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(c);return this.shader=c,this.program!==d&&(this.program=d,this.gl.useProgram(f.program)),l||(Kt.textureCount=0,this.syncUniformGroup(c.uniformGroup,Kt)),f},ShaderSystem.prototype.setUniforms=function(c){var l=this.shader.program,d=l.glPrograms[this.renderer.CONTEXT_UID];l.syncUniforms(d.uniformData,c,this.renderer)},ShaderSystem.prototype.syncUniformGroup=function(c,l){var d=this.getglProgram();c.static&&c.dirtyId===d.uniformGroups[c.id]||(d.uniformGroups[c.id]=c.dirtyId,this.syncUniforms(c,d,l))},ShaderSystem.prototype.syncUniforms=function(c,l,d){(c.syncUniforms[this.shader.program.id]||this.createSyncGroups(c))(l.uniformData,c.uniforms,this.renderer,d)},ShaderSystem.prototype.createSyncGroups=function(c){var l=this.getSignature(c,this.shader.program.uniformData);return this.cache[l]||(this.cache[l]=function generateUniformsSync(c,l){var d=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var f in c.uniforms){var m=l[f];if(m){for(var _=c.uniforms[f],y=!1,g=0;g<St.length;g++)if(St[g].test(m,_)){d.push(St[g].code(f,_)),y=!0;break}if(!y){var v=(1===m.size?Et:Pt)[m.type].replace("location",'ud["'+f+'"].location');d.push('\n            cv = ud["'+f+'"].value;\n            v = uv["'+f+'"];\n            '+v+";")}}else c.uniforms[f].group&&d.push('\n                    renderer.shader.syncUniformGroup(uv["'+f+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",d.join("\n"))}(c,this.shader.program.uniformData)),c.syncUniforms[this.shader.program.id]=this.cache[l],c.syncUniforms[this.shader.program.id]},ShaderSystem.prototype.getSignature=function(c,l){var d=c.uniforms,f=[];for(var m in d)f.push(m),l[m]&&f.push(l[m].type);return f.join("-")},ShaderSystem.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},ShaderSystem.prototype.generateShader=function(c){var l=this.gl,d=c.program,f={};for(var m in d.attributeData)f[m]=d.attributeData[m].location;var _=compileProgram(l,d.vertexSrc,d.fragmentSrc,f),y={};for(var m in d.uniformData){var g=d.uniformData[m];y[m]={location:l.getUniformLocation(_,m),value:defaultValue(g.type,g.size)}}var v=new Wt(_,y);return d.glPrograms[this.renderer.CONTEXT_UID]=v,v},ShaderSystem.prototype.reset=function(){this.program=null,this.shader=null},ShaderSystem.prototype.destroy=function(){this.destroyed=!0},ShaderSystem}(N);var Qt=function(c){function StateSystem(l){var d=c.call(this,l)||this;return d.gl=null,d.stateId=0,d.polygonOffset=0,d.blendMode=m.b.NONE,d._blendEq=!1,d.map=[],d.map[0]=d.setBlend,d.map[1]=d.setOffset,d.map[2]=d.setCullFace,d.map[3]=d.setDepthTest,d.map[4]=d.setFrontFace,d.checks=[],d.defaultState=new Rt,d.defaultState.blend=!0,d}return __extends(StateSystem,c),StateSystem.prototype.contextChange=function(c){this.gl=c,this.blendModes=function mapWebGLBlendModesToPixi(c,l){return void 0===l&&(l=[]),l[m.b.NORMAL]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.ADD]=[c.ONE,c.ONE],l[m.b.MULTIPLY]=[c.DST_COLOR,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.SCREEN]=[c.ONE,c.ONE_MINUS_SRC_COLOR,c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.OVERLAY]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.DARKEN]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.LIGHTEN]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.COLOR_DODGE]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.COLOR_BURN]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.HARD_LIGHT]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.SOFT_LIGHT]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.DIFFERENCE]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.EXCLUSION]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.HUE]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.SATURATION]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.COLOR]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.LUMINOSITY]=[c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.NONE]=[0,0],l[m.b.NORMAL_NPM]=[c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.ADD_NPM]=[c.SRC_ALPHA,c.ONE,c.ONE,c.ONE],l[m.b.SCREEN_NPM]=[c.SRC_ALPHA,c.ONE_MINUS_SRC_COLOR,c.ONE,c.ONE_MINUS_SRC_ALPHA],l[m.b.SRC_IN]=[c.DST_ALPHA,c.ZERO],l[m.b.SRC_OUT]=[c.ONE_MINUS_DST_ALPHA,c.ZERO],l[m.b.SRC_ATOP]=[c.DST_ALPHA,c.ONE_MINUS_SRC_ALPHA],l[m.b.DST_OVER]=[c.ONE_MINUS_DST_ALPHA,c.ONE],l[m.b.DST_IN]=[c.ZERO,c.SRC_ALPHA],l[m.b.DST_OUT]=[c.ZERO,c.ONE_MINUS_SRC_ALPHA],l[m.b.DST_ATOP]=[c.ONE_MINUS_DST_ALPHA,c.SRC_ALPHA],l[m.b.XOR]=[c.ONE_MINUS_DST_ALPHA,c.ONE_MINUS_SRC_ALPHA],l[m.b.SUBTRACT]=[c.ONE,c.ONE,c.ONE,c.ONE,c.FUNC_REVERSE_SUBTRACT,c.FUNC_ADD],l}(c),this.set(this.defaultState),this.reset()},StateSystem.prototype.set=function(c){if(c=c||this.defaultState,this.stateId!==c.data){for(var l=this.stateId^c.data,d=0;l;)1&l&&this.map[d].call(this,!!(c.data&1<<d)),l>>=1,d++;this.stateId=c.data}for(d=0;d<this.checks.length;d++)this.checks[d](this,c)},StateSystem.prototype.forceState=function(c){c=c||this.defaultState;for(var l=0;l<this.map.length;l++)this.map[l].call(this,!!(c.data&1<<l));for(l=0;l<this.checks.length;l++)this.checks[l](this,c);this.stateId=c.data},StateSystem.prototype.setBlend=function(c){this.updateCheck(StateSystem.checkBlendMode,c),this.gl[c?"enable":"disable"](this.gl.BLEND)},StateSystem.prototype.setOffset=function(c){this.updateCheck(StateSystem.checkPolygonOffset,c),this.gl[c?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},StateSystem.prototype.setDepthTest=function(c){this.gl[c?"enable":"disable"](this.gl.DEPTH_TEST)},StateSystem.prototype.setCullFace=function(c){this.gl[c?"enable":"disable"](this.gl.CULL_FACE)},StateSystem.prototype.setFrontFace=function(c){this.gl.frontFace(this.gl[c?"CW":"CCW"])},StateSystem.prototype.setBlendMode=function(c){if(c!==this.blendMode){this.blendMode=c;var l=this.blendModes[c],d=this.gl;2===l.length?d.blendFunc(l[0],l[1]):d.blendFuncSeparate(l[0],l[1],l[2],l[3]),6===l.length?(this._blendEq=!0,d.blendEquationSeparate(l[4],l[5])):this._blendEq&&(this._blendEq=!1,d.blendEquationSeparate(d.FUNC_ADD,d.FUNC_ADD))}},StateSystem.prototype.setPolygonOffset=function(c,l){this.gl.polygonOffset(c,l)},StateSystem.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},StateSystem.prototype.updateCheck=function(c,l){var d=this.checks.indexOf(c);l&&-1===d?this.checks.push(c):l||-1===d||this.checks.splice(d,1)},StateSystem.checkBlendMode=function(c,l){c.setBlendMode(l.blendMode)},StateSystem.checkPolygonOffset=function(c,l){c.setPolygonOffset(1,l.polygonOffset)},StateSystem}(N),Jt=function(c){function TextureGCSystem(l){var d=c.call(this,l)||this;return d.count=0,d.checkCount=0,d.maxIdle=f.b.GC_MAX_IDLE,d.checkCountMax=f.b.GC_MAX_CHECK_COUNT,d.mode=f.b.GC_MODE,d}return __extends(TextureGCSystem,c),TextureGCSystem.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==m.h.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},TextureGCSystem.prototype.run=function(){for(var c=this.renderer.texture,l=c.managedTextures,d=!1,f=0;f<l.length;f++){var m=l[f];!m.framebuffer&&this.count-m.touched>this.maxIdle&&(c.destroyTexture(m,!0),l[f]=null,d=!0)}if(d){var _=0;for(f=0;f<l.length;f++)null!==l[f]&&(l[_++]=l[f]);l.length=_}},TextureGCSystem.prototype.unload=function(c){var l,d=this.renderer.texture;(null===(l=c._texture)||void 0===l?void 0:l.framebuffer)&&d.destroyTexture(c._texture);for(var f=c.children.length-1;f>=0;f--)this.unload(c.children[f])},TextureGCSystem}(N),$t=function $t(c){this.texture=c,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},te=function(c){function TextureSystem(l){var d=c.call(this,l)||this;return d.boundTextures=[],d.currentLocation=-1,d.managedTextures=[],d._unknownBoundTextures=!1,d.unknownTexture=new E,d}return __extends(TextureSystem,c),TextureSystem.prototype.contextChange=function(){var c=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var l=c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=l;for(var d=0;d<l;d++)this.boundTextures[d]=null;this.emptyTextures={};var f=new $t(c.createTexture());c.bindTexture(c.TEXTURE_2D,f.texture),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[c.TEXTURE_2D]=f,this.emptyTextures[c.TEXTURE_CUBE_MAP]=new $t(c.createTexture()),c.bindTexture(c.TEXTURE_CUBE_MAP,this.emptyTextures[c.TEXTURE_CUBE_MAP].texture);for(d=0;d<6;d++)c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MIN_FILTER,c.LINEAR);for(d=0;d<this.boundTextures.length;d++)this.bind(null,d)},TextureSystem.prototype.bind=function(c,l){void 0===l&&(l=0);var d=this.gl;if(c){if((c=c.castToBaseTexture()).parentTextureArray)return;if(c.valid){c.touched=this.renderer.textureGC.count;var f=c._glTextures[this.CONTEXT_UID]||this.initTexture(c);this.boundTextures[l]!==c&&(this.currentLocation!==l&&(this.currentLocation=l,d.activeTexture(d.TEXTURE0+l)),d.bindTexture(c.target,f.texture)),f.dirtyId!==c.dirtyId&&(this.currentLocation!==l&&(this.currentLocation=l,d.activeTexture(d.TEXTURE0+l)),this.updateTexture(c)),this.boundTextures[l]=c}}else this.currentLocation!==l&&(this.currentLocation=l,d.activeTexture(d.TEXTURE0+l)),d.bindTexture(d.TEXTURE_2D,this.emptyTextures[d.TEXTURE_2D].texture),this.boundTextures[l]=null},TextureSystem.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var c=0;c<this.boundTextures.length;c++)this.boundTextures[c]=this.unknownTexture},TextureSystem.prototype.unbind=function(c){var l=this.gl,d=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var f=0;f<d.length;f++)d[f]===this.unknownTexture&&this.bind(null,f)}for(f=0;f<d.length;f++)d[f]===c&&(this.currentLocation!==f&&(l.activeTexture(l.TEXTURE0+f),this.currentLocation=f),l.bindTexture(c.target,this.emptyTextures[c.target].texture),d[f]=null)},TextureSystem.prototype.initTexture=function(c){var l=new $t(this.gl.createTexture());return l.dirtyId=-1,c._glTextures[this.CONTEXT_UID]=l,this.managedTextures.push(c),c.on("dispose",this.destroyTexture,this),l},TextureSystem.prototype.initTextureType=function(c,l){if(l.internalFormat=c.format,l.type=c.type,2===this.webGLVersion){var d=this.renderer.gl;c.type===d.FLOAT&&c.format===d.RGBA&&(l.internalFormat=d.RGBA32F),c.type===m.p.HALF_FLOAT&&(l.type=d.HALF_FLOAT),l.type===d.HALF_FLOAT&&c.format===d.RGBA&&(l.internalFormat=d.RGBA16F)}},TextureSystem.prototype.updateTexture=function(c){var l=c._glTextures[this.CONTEXT_UID];if(l){var d=this.renderer;if(this.initTextureType(c,l),c.resource&&c.resource.upload(d,c,l));else{var f=c.realWidth,m=c.realHeight,_=d.gl;(l.width!==f||l.height!==m||l.dirtyId<0)&&(l.width=f,l.height=m,_.texImage2D(c.target,0,l.internalFormat,f,m,0,c.format,l.type,null))}c.dirtyStyleId!==l.dirtyStyleId&&this.updateTextureStyle(c),l.dirtyId=c.dirtyId}},TextureSystem.prototype.destroyTexture=function(c,l){var d=this.gl;if((c=c.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(c),d.deleteTexture(c._glTextures[this.CONTEXT_UID].texture),c.off("dispose",this.destroyTexture,this),delete c._glTextures[this.CONTEXT_UID],!l)){var f=this.managedTextures.indexOf(c);-1!==f&&Object(_.removeItems)(this.managedTextures,f,1)}},TextureSystem.prototype.updateTextureStyle=function(c){var l=c._glTextures[this.CONTEXT_UID];l&&(c.mipmap!==m.j.POW2&&2===this.webGLVersion||c.isPowerOfTwo?l.mipmap=c.mipmap>=1:l.mipmap=!1,2===this.webGLVersion||c.isPowerOfTwo?l.wrapMode=c.wrapMode:l.wrapMode=m.q.CLAMP,c.resource&&c.resource.style(this.renderer,c,l)||this.setStyle(c,l),l.dirtyStyleId=c.dirtyStyleId)},TextureSystem.prototype.setStyle=function(c,l){var d=this.gl;if(l.mipmap&&d.generateMipmap(c.target),d.texParameteri(c.target,d.TEXTURE_WRAP_S,l.wrapMode),d.texParameteri(c.target,d.TEXTURE_WRAP_T,l.wrapMode),l.mipmap){d.texParameteri(c.target,d.TEXTURE_MIN_FILTER,c.scaleMode===m.n.LINEAR?d.LINEAR_MIPMAP_LINEAR:d.NEAREST_MIPMAP_NEAREST);var f=this.renderer.context.extensions.anisotropicFiltering;if(f&&c.anisotropicLevel>0&&c.scaleMode===m.n.LINEAR){var _=Math.min(c.anisotropicLevel,d.getParameter(f.MAX_TEXTURE_MAX_ANISOTROPY_EXT));d.texParameterf(c.target,f.TEXTURE_MAX_ANISOTROPY_EXT,_)}}else d.texParameteri(c.target,d.TEXTURE_MIN_FILTER,c.scaleMode===m.n.LINEAR?d.LINEAR:d.NEAREST);d.texParameteri(c.target,d.TEXTURE_MAG_FILTER,c.scaleMode===m.n.LINEAR?d.LINEAR:d.NEAREST)},TextureSystem}(N),ee={FilterSystem:ot,BatchSystem:at,ContextSystem:ht,FramebufferSystem:dt,GeometrySystem:mt,MaskSystem:Nt,ScissorSystem:jt,StencilSystem:Ut,ProjectionSystem:Gt,RenderTextureSystem:Vt,ShaderSystem:Zt,StateSystem:Qt,TextureGCSystem:Jt,TextureSystem:te},re=new v.d,ie=function(c){function AbstractRenderer(l,d){void 0===l&&(l=m.m.UNKNOWN);var y=c.call(this)||this;return(d=Object.assign({},f.b.RENDER_OPTIONS,d)).roundPixels&&(f.b.ROUND_PIXELS=d.roundPixels,Object(_.deprecation)("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),y.options=d,y.type=l,y.screen=new v.j(0,0,d.width,d.height),y.view=d.view||document.createElement("canvas"),y.resolution=d.resolution||f.b.RESOLUTION,y.transparent=d.transparent,y.autoDensity=d.autoDensity||d.autoResize||!1,y.preserveDrawingBuffer=d.preserveDrawingBuffer,y.clearBeforeRender=d.clearBeforeRender,y._backgroundColor=0,y._backgroundColorRgba=[0,0,0,0],y._backgroundColorString="#000000",y.backgroundColor=d.backgroundColor||y._backgroundColor,y._lastObjectRendered=null,y.plugins={},y}return __extends(AbstractRenderer,c),AbstractRenderer.prototype.initPlugins=function(c){for(var l in c)this.plugins[l]=new c[l](this)},Object.defineProperty(AbstractRenderer.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractRenderer.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),AbstractRenderer.prototype.resize=function(c,l){this.screen.width=c,this.screen.height=l,this.view.width=c*this.resolution,this.view.height=l*this.resolution,this.autoDensity&&(this.view.style.width=c+"px",this.view.style.height=l+"px"),this.emit("resize",c,l)},AbstractRenderer.prototype.generateTexture=function(c,l,d,f){0===(f=f||c.getLocalBounds(null,!0)).width&&(f.width=1),0===f.height&&(f.height=1);var m=z.create({width:0|f.width,height:0|f.height,scaleMode:l,resolution:d});return re.tx=-f.x,re.ty=-f.y,this.render(c,m,!1,re,!!c.parent),m},AbstractRenderer.prototype.destroy=function(c){for(var l in this.plugins)this.plugins[l].destroy(),this.plugins[l]=null;c&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var d=this;d.plugins=null,d.type=m.m.UNKNOWN,d.view=null,d.screen=null,d._tempDisplayObjectParent=null,d.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(AbstractRenderer.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(c){this._backgroundColor=c,this._backgroundColorString=Object(_.hex2string)(c),Object(_.hex2rgb)(c,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),AbstractRenderer}(_.EventEmitter),ne=function(c){function Renderer(l){var d=c.call(this,m.m.WEBGL,l)||this;return l=d.options,d.gl=null,d.CONTEXT_UID=0,d.runners={destroy:new y.a("destroy"),contextChange:new y.a("contextChange"),reset:new y.a("reset"),update:new y.a("update"),postrender:new y.a("postrender"),prerender:new y.a("prerender"),resize:new y.a("resize")},d.globalUniforms=new it({projectionMatrix:new v.d},!0),d.addSystem(Nt,"mask").addSystem(ht,"context").addSystem(Qt,"state").addSystem(Zt,"shader").addSystem(te,"texture").addSystem(mt,"geometry").addSystem(dt,"framebuffer").addSystem(jt,"scissor").addSystem(Ut,"stencil").addSystem(Gt,"projection").addSystem(Jt,"textureGC").addSystem(ot,"filter").addSystem(Vt,"renderTexture").addSystem(at,"batch"),d.initPlugins(Renderer.__plugins),l.context?d.context.initFromContext(l.context):d.context.initFromOptions({alpha:!!d.transparent,antialias:l.antialias,premultipliedAlpha:d.transparent&&"notMultiplied"!==d.transparent,stencil:!0,preserveDrawingBuffer:l.preserveDrawingBuffer,powerPreference:d.options.powerPreference}),d.renderingToScreen=!0,Object(_.sayHello)(2===d.context.webGLVersion?"WebGL 2":"WebGL 1"),d.resize(d.options.width,d.options.height),d}return __extends(Renderer,c),Renderer.create=function(c){if(Object(_.isWebGLSupported)())return new Renderer(c);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},Renderer.prototype.addSystem=function(c,l){l||(l=c.name);var d=new c(this);if(this[l])throw new Error('Whoops! The name "'+l+'" is already in use');for(var f in this[l]=d,this.runners)this.runners[f].add(d);return this},Renderer.prototype.render=function(c,l,d,f,m){if(this.renderingToScreen=!l,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=f,!this.context.isLost){if(l||(this._lastObjectRendered=c),!m){var _=c.enableTempParent();c.updateTransform(),c.disableTempParent(_)}this.renderTexture.bind(l),this.batch.currentRenderer.start(),(void 0!==d?d:this.clearBeforeRender)&&this.renderTexture.clear(),c.render(this),this.batch.currentRenderer.flush(),l&&l.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},Renderer.prototype.resize=function(l,d){c.prototype.resize.call(this,l,d),this.runners.resize.emit(l,d)},Renderer.prototype.reset=function(){return this.runners.reset.emit(),this},Renderer.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},Renderer.prototype.destroy=function(l){for(var d in this.runners.destroy.emit(),this.runners)this.runners[d].destroy();c.prototype.destroy.call(this,l),this.gl=null},Renderer.registerPlugin=function(c,l){Renderer.__plugins=Renderer.__plugins||{},Renderer.__plugins[c]=l},Renderer}(ie);function autoDetectRenderer(c){return ne.create(c)}var oe="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",se="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",ae=function ae(){this.texArray=null,this.blend=0,this.type=m.e.TRIANGLES,this.start=0,this.size=0,this.data=null},ue=function(){function BatchTextureArray(){this.elements=[],this.ids=[],this.count=0}return BatchTextureArray.prototype.clear=function(){for(var c=0;c<this.count;c++)this.elements[c]=null;this.count=0},BatchTextureArray}(),he=function(){function ViewableBuffer(c){this.rawBinaryData=new ArrayBuffer(c),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(ViewableBuffer.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),ViewableBuffer.prototype.view=function(c){return this[c+"View"]},ViewableBuffer.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},ViewableBuffer.sizeOf=function(c){switch(c){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(c+" isn't a valid view type")}},ViewableBuffer}(),ce=function(c){function AbstractBatchRenderer(l){var d=c.call(this,l)||this;return d.shaderGenerator=null,d.geometryClass=null,d.vertexSize=null,d.state=Rt.for2d(),d.size=4*f.b.SPRITE_BATCH_SIZE,d._vertexCount=0,d._indexCount=0,d._bufferedElements=[],d._bufferedTextures=[],d._bufferSize=0,d._shader=null,d._packedGeometries=[],d._packedGeometryPoolSize=2,d._flushId=0,d._aBuffers={},d._iBuffers={},d.MAX_TEXTURES=1,d.renderer.on("prerender",d.onPrerender,d),l.runners.contextChange.add(d),d._dcIndex=0,d._aIndex=0,d._iIndex=0,d._attributeBuffer=null,d._indexBuffer=null,d._tempBoundTextures=[],d}return __extends(AbstractBatchRenderer,c),AbstractBatchRenderer.prototype.contextChange=function(){var c=this.renderer.gl;f.b.PREFER_ENV===m.f.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS),f.b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=checkMaxIfStatementsInShader(this.MAX_TEXTURES,c)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var l=0;l<this._packedGeometryPoolSize;l++)this._packedGeometries[l]=new this.geometryClass;this.initFlushBuffers()},AbstractBatchRenderer.prototype.initFlushBuffers=function(){for(var c=AbstractBatchRenderer._drawCallPool,l=AbstractBatchRenderer._textureArrayPool,d=this.size/4,f=Math.floor(d/this.MAX_TEXTURES)+1;c.length<d;)c.push(new ae);for(;l.length<f;)l.push(new ue);for(var m=0;m<this.MAX_TEXTURES;m++)this._tempBoundTextures[m]=null},AbstractBatchRenderer.prototype.onPrerender=function(){this._flushId=0},AbstractBatchRenderer.prototype.render=function(c){c._texture.valid&&(this._vertexCount+c.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=c.vertexData.length/2,this._indexCount+=c.indices.length,this._bufferedTextures[this._bufferSize]=c._texture.baseTexture,this._bufferedElements[this._bufferSize++]=c)},AbstractBatchRenderer.prototype.buildTexturesAndDrawCalls=function(){var c=this._bufferedTextures,l=this.MAX_TEXTURES,d=AbstractBatchRenderer._textureArrayPool,f=this.renderer.batch,m=this._tempBoundTextures,_=this.renderer.textureGC.count,y=++E._globalBatch,g=0,v=d[0],b=0;f.copyBoundTextures(m,l);for(var x=0;x<this._bufferSize;++x){var T=c[x];c[x]=null,T._batchEnabled!==y&&(v.count>=l&&(f.boundArray(v,m,y,l),this.buildDrawCalls(v,b,x),b=x,v=d[++g],++y),T._batchEnabled=y,T.touched=_,v.elements[v.count++]=T)}v.count>0&&(f.boundArray(v,m,y,l),this.buildDrawCalls(v,b,this._bufferSize),++g,++y);for(x=0;x<m.length;x++)m[x]=null;E._globalBatch=y},AbstractBatchRenderer.prototype.buildDrawCalls=function(c,l,d){var f=this,m=f._bufferedElements,y=f._attributeBuffer,g=f._indexBuffer,v=f.vertexSize,b=AbstractBatchRenderer._drawCallPool,x=this._dcIndex,T=this._aIndex,S=this._iIndex,E=b[x];E.start=this._iIndex,E.texArray=c;for(var P=l;P<d;++P){var w=m[P],O=w._texture.baseTexture,I=_.premultiplyBlendMode[O.alphaMode?1:0][w.blendMode];m[P]=null,l<P&&E.blend!==I&&(E.size=S-E.start,l=P,(E=b[++x]).texArray=c,E.start=S),this.packInterleavedGeometry(w,y,g,T,S),T+=w.vertexData.length/2*v,S+=w.indices.length,E.blend=I}l<d&&(E.size=S-E.start,++x),this._dcIndex=x,this._aIndex=T,this._iIndex=S},AbstractBatchRenderer.prototype.bindAndClearTexArray=function(c){for(var l=this.renderer.texture,d=0;d<c.count;d++)l.bind(c.elements[d],c.ids[d]),c.elements[d]=null;c.count=0},AbstractBatchRenderer.prototype.updateGeometry=function(){var c=this,l=c._packedGeometries,d=c._attributeBuffer,m=c._indexBuffer;f.b.CAN_UPLOAD_SAME_BUFFER?(l[this._flushId]._buffer.update(d.rawBinaryData),l[this._flushId]._indexBuffer.update(m),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,l[this._flushId]=new this.geometryClass),l[this._flushId]._buffer.update(d.rawBinaryData),l[this._flushId]._indexBuffer.update(m),this.renderer.geometry.bind(l[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},AbstractBatchRenderer.prototype.drawBatches=function(){for(var c=this._dcIndex,l=this.renderer,d=l.gl,f=l.state,m=AbstractBatchRenderer._drawCallPool,_=null,y=0;y<c;y++){var g=m[y],v=g.texArray,b=g.type,x=g.size,T=g.start,S=g.blend;_!==v&&(_=v,this.bindAndClearTexArray(v)),this.state.blendMode=S,f.set(this.state),d.drawElements(b,x,d.UNSIGNED_SHORT,2*T)}},AbstractBatchRenderer.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},AbstractBatchRenderer.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),f.b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},AbstractBatchRenderer.prototype.stop=function(){this.flush()},AbstractBatchRenderer.prototype.destroy=function(){for(var l=0;l<this._packedGeometryPoolSize;l++)this._packedGeometries[l]&&this._packedGeometries[l].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),c.prototype.destroy.call(this)},AbstractBatchRenderer.prototype.getAttributeBuffer=function(c){var l=Object(_.nextPow2)(Math.ceil(c/8)),d=Object(_.log2)(l),f=8*l;this._aBuffers.length<=d&&(this._iBuffers.length=d+1);var m=this._aBuffers[f];return m||(this._aBuffers[f]=m=new he(f*this.vertexSize*4)),m},AbstractBatchRenderer.prototype.getIndexBuffer=function(c){var l=Object(_.nextPow2)(Math.ceil(c/12)),d=Object(_.log2)(l),f=12*l;this._iBuffers.length<=d&&(this._iBuffers.length=d+1);var m=this._iBuffers[d];return m||(this._iBuffers[d]=m=new Uint16Array(f)),m},AbstractBatchRenderer.prototype.packInterleavedGeometry=function(c,l,d,f,m){for(var y=l.uint32View,g=l.float32View,v=f/this.vertexSize,b=c.uvs,x=c.indices,T=c.vertexData,S=c._texture.baseTexture._batchLocation,E=Math.min(c.worldAlpha,1),P=E<1&&c._texture.baseTexture.alphaMode?Object(_.premultiplyTint)(c._tintRGB,E):c._tintRGB+(255*E<<24),w=0;w<T.length;w+=2)g[f++]=T[w],g[f++]=T[w+1],g[f++]=b[w],g[f++]=b[w+1],y[f++]=P,g[f++]=S;for(w=0;w<x.length;w++)d[m++]=v+x[w]},AbstractBatchRenderer._drawCallPool=[],AbstractBatchRenderer._textureArrayPool=[],AbstractBatchRenderer}(st),le=function(){function BatchShaderGenerator(c,l){if(this.vertexSrc=c,this.fragTemplate=l,this.programCache={},this.defaultGroupCache={},l.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(l.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return BatchShaderGenerator.prototype.generateShader=function(c){if(!this.programCache[c]){for(var l=new Int32Array(c),d=0;d<c;d++)l[d]=d;this.defaultGroupCache[c]=it.from({uSamplers:l},!0);var f=this.fragTemplate;f=(f=f.replace(/%count%/gi,""+c)).replace(/%forloop%/gi,this.generateSampleSrc(c)),this.programCache[c]=new Ct(this.vertexSrc,f)}var m={tint:new Float32Array([1,1,1,1]),translationMatrix:new v.d,default:this.defaultGroupCache[c]};return new Mt(this.programCache[c],m)},BatchShaderGenerator.prototype.generateSampleSrc=function(c){var l="";l+="\n",l+="\n";for(var d=0;d<c;d++)d>0&&(l+="\nelse "),d<c-1&&(l+="if(vTextureId < "+d+".5)"),l+="\n{",l+="\n\tcolor = texture2D(uSamplers["+d+"], vTextureCoord);",l+="\n}";return l+="\n",l+="\n"},BatchShaderGenerator}(),de=function(c){function BatchGeometry(l){void 0===l&&(l=!1);var d=c.call(this)||this;return d._buffer=new q(null,l,!1),d._indexBuffer=new q(null,l,!0),d.addAttribute("aVertexPosition",d._buffer,2,!1,m.p.FLOAT).addAttribute("aTextureCoord",d._buffer,2,!1,m.p.FLOAT).addAttribute("aColor",d._buffer,4,!0,m.p.UNSIGNED_BYTE).addAttribute("aTextureId",d._buffer,1,!0,m.p.FLOAT).addIndex(d._indexBuffer),d}return __extends(BatchGeometry,c),BatchGeometry}($),pe="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",fe="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",me=function(){function BatchPluginFactory(){}return BatchPluginFactory.create=function(c){var l=Object.assign({vertex:pe,fragment:fe,geometryClass:de,vertexSize:6},c),d=l.vertex,f=l.fragment,m=l.vertexSize,_=l.geometryClass;return function(c){function BatchPlugin(l){var y=c.call(this,l)||this;return y.shaderGenerator=new le(d,f),y.geometryClass=_,y.vertexSize=m,y}return __extends(BatchPlugin,c),BatchPlugin}(ce)},Object.defineProperty(BatchPluginFactory,"defaultVertexSrc",{get:function(){return pe},enumerable:!1,configurable:!0}),Object.defineProperty(BatchPluginFactory,"defaultFragmentTemplate",{get:function(){return fe},enumerable:!1,configurable:!0}),BatchPluginFactory}(),_e=me.create()},function(c,l,d){"use strict";d.d(l,"a",(function(){return v})),d.d(l,"b",(function(){return y})),d.d(l,"c",(function(){return b})),d.d(l,"d",(function(){return P})),d.d(l,"e",(function(){return E})),d.d(l,"f",(function(){return m})),d.d(l,"g",(function(){return S})),d.d(l,"h",(function(){return x})),d.d(l,"i",(function(){return _})),d.d(l,"j",(function(){return g})),d.d(l,"k",(function(){return T})),d.d(l,"l",(function(){return f})),d.d(l,"m",(function(){return B})),d.d(l,"n",(function(){return L}));var f,m=2*Math.PI,_=180/Math.PI,y=Math.PI/180;!function(c){c[c.POLY=0]="POLY",c[c.RECT=1]="RECT",c[c.CIRC=2]="CIRC",c[c.ELIP=3]="ELIP",c[c.RREC=4]="RREC"}(f||(f={}));var g=function(){function Rectangle(c,l,d,m){void 0===c&&(c=0),void 0===l&&(l=0),void 0===d&&(d=0),void 0===m&&(m=0),this.x=Number(c),this.y=Number(l),this.width=Number(d),this.height=Number(m),this.type=f.RECT}return Object.defineProperty(Rectangle.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle,"EMPTY",{get:function(){return new Rectangle(0,0,0,0)},enumerable:!1,configurable:!0}),Rectangle.prototype.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height)},Rectangle.prototype.copyFrom=function(c){return this.x=c.x,this.y=c.y,this.width=c.width,this.height=c.height,this},Rectangle.prototype.copyTo=function(c){return c.x=this.x,c.y=this.y,c.width=this.width,c.height=this.height,c},Rectangle.prototype.contains=function(c,l){return!(this.width<=0||this.height<=0)&&(c>=this.x&&c<this.x+this.width&&l>=this.y&&l<this.y+this.height)},Rectangle.prototype.pad=function(c,l){return void 0===c&&(c=0),void 0===l&&(l=c),this.x-=c,this.y-=l,this.width+=2*c,this.height+=2*l,this},Rectangle.prototype.fit=function(c){var l=Math.max(this.x,c.x),d=Math.min(this.x+this.width,c.x+c.width),f=Math.max(this.y,c.y),m=Math.min(this.y+this.height,c.y+c.height);return this.x=l,this.width=Math.max(d-l,0),this.y=f,this.height=Math.max(m-f,0),this},Rectangle.prototype.ceil=function(c,l){void 0===c&&(c=1),void 0===l&&(l=.001);var d=Math.ceil((this.x+this.width-l)*c)/c,f=Math.ceil((this.y+this.height-l)*c)/c;return this.x=Math.floor((this.x+l)*c)/c,this.y=Math.floor((this.y+l)*c)/c,this.width=d-this.x,this.height=f-this.y,this},Rectangle.prototype.enlarge=function(c){var l=Math.min(this.x,c.x),d=Math.max(this.x+this.width,c.x+c.width),f=Math.min(this.y,c.y),m=Math.max(this.y+this.height,c.y+c.height);return this.x=l,this.width=d-l,this.y=f,this.height=m-f,this},Rectangle}(),v=function(){function Circle(c,l,d){void 0===c&&(c=0),void 0===l&&(l=0),void 0===d&&(d=0),this.x=c,this.y=l,this.radius=d,this.type=f.CIRC}return Circle.prototype.clone=function(){return new Circle(this.x,this.y,this.radius)},Circle.prototype.contains=function(c,l){if(this.radius<=0)return!1;var d=this.radius*this.radius,f=this.x-c,m=this.y-l;return(f*=f)+(m*=m)<=d},Circle.prototype.getBounds=function(){return new g(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Circle}(),b=function(){function Ellipse(c,l,d,m){void 0===c&&(c=0),void 0===l&&(l=0),void 0===d&&(d=0),void 0===m&&(m=0),this.x=c,this.y=l,this.width=d,this.height=m,this.type=f.ELIP}return Ellipse.prototype.clone=function(){return new Ellipse(this.x,this.y,this.width,this.height)},Ellipse.prototype.contains=function(c,l){if(this.width<=0||this.height<=0)return!1;var d=(c-this.x)/this.width,f=(l-this.y)/this.height;return(d*=d)+(f*=f)<=1},Ellipse.prototype.getBounds=function(){return new g(this.x-this.width,this.y-this.height,this.width,this.height)},Ellipse}(),x=function(){function Polygon(){for(var c=arguments,l=[],d=0;d<arguments.length;d++)l[d]=c[d];var m=Array.isArray(l[0])?l[0]:l;if("number"!=typeof m[0]){for(var _=[],y=0,g=m.length;y<g;y++)_.push(m[y].x,m[y].y);m=_}this.points=m,this.type=f.POLY,this.closeStroke=!0}return Polygon.prototype.clone=function(){var c=new Polygon(this.points.slice());return c.closeStroke=this.closeStroke,c},Polygon.prototype.contains=function(c,l){for(var d=!1,f=this.points.length/2,m=0,_=f-1;m<f;_=m++){var y=this.points[2*m],g=this.points[2*m+1],v=this.points[2*_],b=this.points[2*_+1];g>l!=b>l&&c<(l-g)/(b-g)*(v-y)+y&&(d=!d)}return d},Polygon}(),T=function(){function RoundedRectangle(c,l,d,m,_){void 0===c&&(c=0),void 0===l&&(l=0),void 0===d&&(d=0),void 0===m&&(m=0),void 0===_&&(_=20),this.x=c,this.y=l,this.width=d,this.height=m,this.radius=_,this.type=f.RREC}return RoundedRectangle.prototype.clone=function(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},RoundedRectangle.prototype.contains=function(c,l){if(this.width<=0||this.height<=0)return!1;if(c>=this.x&&c<=this.x+this.width&&l>=this.y&&l<=this.y+this.height){if(l>=this.y+this.radius&&l<=this.y+this.height-this.radius||c>=this.x+this.radius&&c<=this.x+this.width-this.radius)return!0;var d=c-(this.x+this.radius),f=l-(this.y+this.radius),m=this.radius*this.radius;if(d*d+f*f<=m)return!0;if((d=c-(this.x+this.width-this.radius))*d+f*f<=m)return!0;if(d*d+(f=l-(this.y+this.height-this.radius))*f<=m)return!0;if((d=c-(this.x+this.radius))*d+f*f<=m)return!0}return!1},RoundedRectangle}(),S=function(){function Point(c,l){void 0===c&&(c=0),void 0===l&&(l=0),this.x=c,this.y=l}return Point.prototype.clone=function(){return new Point(this.x,this.y)},Point.prototype.copyFrom=function(c){return this.set(c.x,c.y),this},Point.prototype.copyTo=function(c){return c.set(this.x,this.y),c},Point.prototype.equals=function(c){return c.x===this.x&&c.y===this.y},Point.prototype.set=function(c,l){return void 0===c&&(c=0),void 0===l&&(l=c),this.x=c,this.y=l,this},Point}(),E=function(){function ObservablePoint(c,l,d,f){void 0===d&&(d=0),void 0===f&&(f=0),this._x=d,this._y=f,this.cb=c,this.scope=l}return ObservablePoint.prototype.clone=function(c,l){return void 0===c&&(c=this.cb),void 0===l&&(l=this.scope),new ObservablePoint(c,l,this._x,this._y)},ObservablePoint.prototype.set=function(c,l){return void 0===c&&(c=0),void 0===l&&(l=c),this._x===c&&this._y===l||(this._x=c,this._y=l,this.cb.call(this.scope)),this},ObservablePoint.prototype.copyFrom=function(c){return this._x===c.x&&this._y===c.y||(this._x=c.x,this._y=c.y,this.cb.call(this.scope)),this},ObservablePoint.prototype.copyTo=function(c){return c.set(this._x,this._y),c},ObservablePoint.prototype.equals=function(c){return c.x===this._x&&c.y===this._y},Object.defineProperty(ObservablePoint.prototype,"x",{get:function(){return this._x},set:function(c){this._x!==c&&(this._x=c,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(ObservablePoint.prototype,"y",{get:function(){return this._y},set:function(c){this._y!==c&&(this._y=c,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),ObservablePoint}(),P=function(){function Matrix(c,l,d,f,m,_){void 0===c&&(c=1),void 0===l&&(l=0),void 0===d&&(d=0),void 0===f&&(f=1),void 0===m&&(m=0),void 0===_&&(_=0),this.array=null,this.a=c,this.b=l,this.c=d,this.d=f,this.tx=m,this.ty=_}return Matrix.prototype.fromArray=function(c){this.a=c[0],this.b=c[1],this.c=c[3],this.d=c[4],this.tx=c[2],this.ty=c[5]},Matrix.prototype.set=function(c,l,d,f,m,_){return this.a=c,this.b=l,this.c=d,this.d=f,this.tx=m,this.ty=_,this},Matrix.prototype.toArray=function(c,l){this.array||(this.array=new Float32Array(9));var d=l||this.array;return c?(d[0]=this.a,d[1]=this.b,d[2]=0,d[3]=this.c,d[4]=this.d,d[5]=0,d[6]=this.tx,d[7]=this.ty,d[8]=1):(d[0]=this.a,d[1]=this.c,d[2]=this.tx,d[3]=this.b,d[4]=this.d,d[5]=this.ty,d[6]=0,d[7]=0,d[8]=1),d},Matrix.prototype.apply=function(c,l){l=l||new S;var d=c.x,f=c.y;return l.x=this.a*d+this.c*f+this.tx,l.y=this.b*d+this.d*f+this.ty,l},Matrix.prototype.applyInverse=function(c,l){l=l||new S;var d=1/(this.a*this.d+this.c*-this.b),f=c.x,m=c.y;return l.x=this.d*d*f+-this.c*d*m+(this.ty*this.c-this.tx*this.d)*d,l.y=this.a*d*m+-this.b*d*f+(-this.ty*this.a+this.tx*this.b)*d,l},Matrix.prototype.translate=function(c,l){return this.tx+=c,this.ty+=l,this},Matrix.prototype.scale=function(c,l){return this.a*=c,this.d*=l,this.c*=c,this.b*=l,this.tx*=c,this.ty*=l,this},Matrix.prototype.rotate=function(c){var l=Math.cos(c),d=Math.sin(c),f=this.a,m=this.c,_=this.tx;return this.a=f*l-this.b*d,this.b=f*d+this.b*l,this.c=m*l-this.d*d,this.d=m*d+this.d*l,this.tx=_*l-this.ty*d,this.ty=_*d+this.ty*l,this},Matrix.prototype.append=function(c){var l=this.a,d=this.b,f=this.c,m=this.d;return this.a=c.a*l+c.b*f,this.b=c.a*d+c.b*m,this.c=c.c*l+c.d*f,this.d=c.c*d+c.d*m,this.tx=c.tx*l+c.ty*f+this.tx,this.ty=c.tx*d+c.ty*m+this.ty,this},Matrix.prototype.setTransform=function(c,l,d,f,m,_,y,g,v){return this.a=Math.cos(y+v)*m,this.b=Math.sin(y+v)*m,this.c=-Math.sin(y-g)*_,this.d=Math.cos(y-g)*_,this.tx=c-(d*this.a+f*this.c),this.ty=l-(d*this.b+f*this.d),this},Matrix.prototype.prepend=function(c){var l=this.tx;if(1!==c.a||0!==c.b||0!==c.c||1!==c.d){var d=this.a,f=this.c;this.a=d*c.a+this.b*c.c,this.b=d*c.b+this.b*c.d,this.c=f*c.a+this.d*c.c,this.d=f*c.b+this.d*c.d}return this.tx=l*c.a+this.ty*c.c+c.tx,this.ty=l*c.b+this.ty*c.d+c.ty,this},Matrix.prototype.decompose=function(c){var l=this.a,d=this.b,f=this.c,_=this.d,y=-Math.atan2(-f,_),g=Math.atan2(d,l),v=Math.abs(y+g);return v<1e-5||Math.abs(m-v)<1e-5?(c.rotation=g,c.skew.x=c.skew.y=0):(c.rotation=0,c.skew.x=y,c.skew.y=g),c.scale.x=Math.sqrt(l*l+d*d),c.scale.y=Math.sqrt(f*f+_*_),c.position.x=this.tx,c.position.y=this.ty,c},Matrix.prototype.invert=function(){var c=this.a,l=this.b,d=this.c,f=this.d,m=this.tx,_=c*f-l*d;return this.a=f/_,this.b=-l/_,this.c=-d/_,this.d=c/_,this.tx=(d*this.ty-f*m)/_,this.ty=-(c*this.ty-l*m)/_,this},Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Matrix.prototype.clone=function(){var c=new Matrix;return c.a=this.a,c.b=this.b,c.c=this.c,c.d=this.d,c.tx=this.tx,c.ty=this.ty,c},Matrix.prototype.copyTo=function(c){return c.a=this.a,c.b=this.b,c.c=this.c,c.d=this.d,c.tx=this.tx,c.ty=this.ty,c},Matrix.prototype.copyFrom=function(c){return this.a=c.a,this.b=c.b,this.c=c.c,this.d=c.d,this.tx=c.tx,this.ty=c.ty,this},Object.defineProperty(Matrix,"IDENTITY",{get:function(){return new Matrix},enumerable:!1,configurable:!0}),Object.defineProperty(Matrix,"TEMP_MATRIX",{get:function(){return new Matrix},enumerable:!1,configurable:!0}),Matrix}(),w=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],O=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],I=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],A=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],C=[],R=[],D=Math.sign;!function init(){for(var c=0;c<16;c++){var l=[];C.push(l);for(var d=0;d<16;d++)for(var f=D(w[c]*w[d]+I[c]*O[d]),m=D(O[c]*w[d]+A[c]*O[d]),_=D(w[c]*I[d]+I[c]*A[d]),y=D(O[c]*I[d]+A[c]*A[d]),g=0;g<16;g++)if(w[g]===f&&O[g]===m&&I[g]===_&&A[g]===y){l.push(g);break}}for(c=0;c<16;c++){var v=new P;v.set(w[c],O[c],I[c],A[c],0,0),R.push(v)}}();var L={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(c){return w[c]},uY:function(c){return O[c]},vX:function(c){return I[c]},vY:function(c){return A[c]},inv:function(c){return 8&c?15&c:7&-c},add:function(c,l){return C[c][l]},sub:function(c,l){return C[c][L.inv(l)]},rotate180:function(c){return 4^c},isVertical:function(c){return 2==(3&c)},byDirection:function(c,l){return 2*Math.abs(c)<=Math.abs(l)?l>=0?L.S:L.N:2*Math.abs(l)<=Math.abs(c)?c>0?L.E:L.W:l>0?c>0?L.SE:L.SW:c>0?L.NE:L.NW},matrixAppendRotationInv:function(c,l,d,f){void 0===d&&(d=0),void 0===f&&(f=0);var m=R[L.inv(l)];m.tx=d,m.ty=f,c.append(m)}},B=function(){function Transform(){this.worldTransform=new P,this.localTransform=new P,this.position=new E(this.onChange,this,0,0),this.scale=new E(this.onChange,this,1,1),this.pivot=new E(this.onChange,this,0,0),this.skew=new E(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return Transform.prototype.onChange=function(){this._localID++},Transform.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},Transform.prototype.updateLocalTransform=function(){var c=this.localTransform;this._localID!==this._currentLocalID&&(c.a=this._cx*this.scale.x,c.b=this._sx*this.scale.x,c.c=this._cy*this.scale.y,c.d=this._sy*this.scale.y,c.tx=this.position.x-(this.pivot.x*c.a+this.pivot.y*c.c),c.ty=this.position.y-(this.pivot.x*c.b+this.pivot.y*c.d),this._currentLocalID=this._localID,this._parentID=-1)},Transform.prototype.updateTransform=function(c){var l=this.localTransform;if(this._localID!==this._currentLocalID&&(l.a=this._cx*this.scale.x,l.b=this._sx*this.scale.x,l.c=this._cy*this.scale.y,l.d=this._sy*this.scale.y,l.tx=this.position.x-(this.pivot.x*l.a+this.pivot.y*l.c),l.ty=this.position.y-(this.pivot.x*l.b+this.pivot.y*l.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==c._worldID){var d=c.worldTransform,f=this.worldTransform;f.a=l.a*d.a+l.b*d.c,f.b=l.a*d.b+l.b*d.d,f.c=l.c*d.a+l.d*d.c,f.d=l.c*d.b+l.d*d.d,f.tx=l.tx*d.a+l.ty*d.c+d.tx,f.ty=l.tx*d.b+l.ty*d.d+d.ty,this._parentID=c._worldID,this._worldID++}},Transform.prototype.setFromMatrix=function(c){c.decompose(this),this._localID++},Object.defineProperty(Transform.prototype,"rotation",{get:function(){return this._rotation},set:function(c){this._rotation!==c&&(this._rotation=c,this.updateSkew())},enumerable:!1,configurable:!0}),Transform.IDENTITY=new Transform,Transform}()},function(c,l,d){"use strict";d.d(l,"a",(function(){return A})),d.d(l,"b",(function(){return C}));var f=/iPhone/i,m=/iPod/i,_=/iPad/i,y=/\biOS-universal(?:.+)Mac\b/i,g=/\bAndroid(?:.+)Mobile\b/i,v=/Android/i,b=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,x=/Silk/i,T=/Windows Phone/i,S=/\bWindows(?:.+)ARM\b/i,E=/BlackBerry/i,P=/BB10/i,w=/Opera Mini/i,O=/\b(CriOS|Chrome)(?:.+)Mobile/i,I=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(c){return void 0!==c&&"MacIntel"===c.platform&&"number"==typeof c.maxTouchPoints&&c.maxTouchPoints>1&&"undefined"==typeof MSStream};var A=function isMobile(c){var l={userAgent:"",platform:"",maxTouchPoints:0};c||"undefined"==typeof navigator?"string"==typeof c?l.userAgent=c:c&&c.userAgent&&(l={userAgent:c.userAgent,platform:c.platform,maxTouchPoints:c.maxTouchPoints||0}):l={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var d=l.userAgent,A=d.split("[FBAN");void 0!==A[1]&&(d=A[0]),void 0!==(A=d.split("Twitter"))[1]&&(d=A[0]);var C=function createMatch(c){return function(l){return l.test(c)}}(d),R={apple:{phone:C(f)&&!C(T),ipod:C(m),tablet:!C(f)&&(C(_)||isAppleTabletOnIos13(l))&&!C(T),universal:C(y),device:(C(f)||C(m)||C(_)||C(y)||isAppleTabletOnIos13(l))&&!C(T)},amazon:{phone:C(b),tablet:!C(b)&&C(x),device:C(b)||C(x)},android:{phone:!C(T)&&C(b)||!C(T)&&C(g),tablet:!C(T)&&!C(b)&&!C(g)&&(C(x)||C(v)),device:!C(T)&&(C(b)||C(x)||C(g)||C(v))||C(/\bokhttp\b/i)},windows:{phone:C(T),tablet:C(S),device:C(T)||C(S)},other:{blackberry:C(E),blackberry10:C(P),opera:C(w),firefox:C(I),chrome:C(O),device:C(E)||C(P)||C(w)||C(I)||C(O)},any:!1,phone:!1,tablet:!1};return R.any=R.apple.device||R.android.device||R.windows.device||R.other.device,R.phone=R.apple.phone||R.android.phone||R.windows.phone,R.tablet=R.apple.tablet||R.android.tablet||R.windows.tablet,R}(window.navigator);var C={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function maxRecommendedTextures(c){var l=!0;if(A.tablet||A.phone){var d;if(A.apple.device)if(d=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(d[1],10)<11&&(l=!1);if(A.android.device)if(d=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(d[1],10)<7&&(l=!1)}return l?c:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:A.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:function canUploadSameBuffer(){return!A.apple.device}(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},function(c,l,d){"use strict";d.d(l,"a",(function(){return y})),d.d(l,"b",(function(){return g})),d.d(l,"c",(function(){return f}));var f,m=d(4);m.b.TARGET_FPMS=.06,function(c){c[c.INTERACTION=50]="INTERACTION",c[c.HIGH=25]="HIGH",c[c.NORMAL=0]="NORMAL",c[c.LOW=-25]="LOW",c[c.UTILITY=-50]="UTILITY"}(f||(f={}));var _=function(){function TickerListener(c,l,d,f){void 0===l&&(l=null),void 0===d&&(d=0),void 0===f&&(f=!1),this.fn=c,this.context=l,this.priority=d,this.once=f,this.next=null,this.previous=null,this._destroyed=!1}return TickerListener.prototype.match=function(c,l){return void 0===l&&(l=null),this.fn===c&&this.context===l},TickerListener.prototype.emit=function(c){this.fn&&(this.context?this.fn.call(this.context,c):this.fn(c));var l=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),l},TickerListener.prototype.connect=function(c){this.previous=c,c.next&&(c.next.previous=this),this.next=c.next,c.next=this},TickerListener.prototype.destroy=function(c){void 0===c&&(c=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var l=this.next;return this.next=c?null:l,this.previous=null,l},TickerListener}(),y=function(){function Ticker(){var c=this;this._head=new _(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/m.b.TARGET_FPMS,this.elapsedMS=1/m.b.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(l){c._requestId=null,c.started&&(c.update(l),c.started&&null===c._requestId&&c._head.next&&(c._requestId=requestAnimationFrame(c._tick)))}}return Ticker.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Ticker.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Ticker.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Ticker.prototype.add=function(c,l,d){return void 0===d&&(d=f.NORMAL),this._addListener(new _(c,l,d))},Ticker.prototype.addOnce=function(c,l,d){return void 0===d&&(d=f.NORMAL),this._addListener(new _(c,l,d,!0))},Ticker.prototype._addListener=function(c){var l=this._head.next,d=this._head;if(l){for(;l;){if(c.priority>l.priority){c.connect(d);break}d=l,l=l.next}c.previous||c.connect(d)}else c.connect(d);return this._startIfPossible(),this},Ticker.prototype.remove=function(c,l){for(var d=this._head.next;d;)d=d.match(c,l)?d.destroy():d.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(Ticker.prototype,"count",{get:function(){if(!this._head)return 0;for(var c=0,l=this._head;l=l.next;)c++;return c},enumerable:!1,configurable:!0}),Ticker.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Ticker.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Ticker.prototype.destroy=function(){if(!this._protected){this.stop();for(var c=this._head.next;c;)c=c.destroy(!0);this._head.destroy(),this._head=null}},Ticker.prototype.update=function(c){var l;if(void 0===c&&(c=performance.now()),c>this.lastTime){if((l=this.elapsedMS=c-this.lastTime)>this._maxElapsedMS&&(l=this._maxElapsedMS),l*=this.speed,this._minElapsedMS){var d=c-this._lastFrame|0;if(d<this._minElapsedMS)return;this._lastFrame=c-d%this._minElapsedMS}this.deltaMS=l,this.deltaTime=this.deltaMS*m.b.TARGET_FPMS;for(var f=this._head,_=f.next;_;)_=_.emit(this.deltaTime);f.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=c},Object.defineProperty(Ticker.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(c){var l=Math.min(this.maxFPS,c),d=Math.min(Math.max(0,l)/1e3,m.b.TARGET_FPMS);this._maxElapsedMS=1/d},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(c){if(0===c)this._minElapsedMS=0;else{var l=Math.max(this.minFPS,c);this._minElapsedMS=1/(l/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker,"shared",{get:function(){if(!Ticker._shared){var c=Ticker._shared=new Ticker;c.autoStart=!0,c._protected=!0}return Ticker._shared},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker,"system",{get:function(){if(!Ticker._system){var c=Ticker._system=new Ticker;c.autoStart=!0,c._protected=!0}return Ticker._system},enumerable:!1,configurable:!0}),Ticker}(),g=function(){function TickerPlugin(){}return TickerPlugin.init=function(c){var l=this;c=Object.assign({autoStart:!0,sharedTicker:!1},c),Object.defineProperty(this,"ticker",{set:function(c){this._ticker&&this._ticker.remove(this.render,this),this._ticker=c,c&&c.add(this.render,this,f.LOW)},get:function(){return this._ticker}}),this.stop=function(){l._ticker.stop()},this.start=function(){l._ticker.start()},this._ticker=null,this.ticker=c.sharedTicker?y.shared:new y,c.autoStart&&this.start()},TickerPlugin.destroy=function(){if(this._ticker){var c=this._ticker;this.ticker=null,c.destroy()}},TickerPlugin}()},function(c,l,d){"use strict";d.d(l,"a",(function(){return C})),d.d(l,"b",(function(){return A})),d.d(l,"c",(function(){return O})),d.d(l,"d",(function(){return I}));var f=d(36),m=d.n(f),_=d(9),y=d.n(_);function _noop(){}function eachSeries(c,l,d,f){var m=0,_=c.length;!function next(y){y||m===_?d&&d(y):f?setTimeout((function(){l(c[m++],next)}),1):l(c[m++],next)}()}function onlyOnce(c){return function onceWrapper(){if(null===c)throw new Error("Callback was already called.");var l=c;c=null,l.apply(this,arguments)}}function queue(c,l){if(null==l)l=1;else if(0===l)throw new Error("Concurrency must not be zero");var d=0,f={_tasks:[],concurrency:l,saturated:_noop,unsaturated:_noop,buffer:l/4,empty:_noop,drain:_noop,error:_noop,started:!1,paused:!1,push:function push(c,l){_insert(c,!1,l)},kill:function kill(){d=0,f.drain=_noop,f.started=!1,f._tasks=[]},unshift:function unshift(c,l){_insert(c,!0,l)},process:function process(){for(;!f.paused&&d<f.concurrency&&f._tasks.length;){var l=f._tasks.shift();0===f._tasks.length&&f.empty(),(d+=1)===f.concurrency&&f.saturated(),c(l.data,onlyOnce(_next(l)))}},length:function length(){return f._tasks.length},running:function running(){return d},idle:function idle(){return f._tasks.length+d===0},pause:function pause(){!0!==f.paused&&(f.paused=!0)},resume:function resume(){if(!1!==f.paused){f.paused=!1;for(var c=1;c<=f.concurrency;c++)f.process()}}};function _insert(c,l,d){if(null!=d&&"function"!=typeof d)throw new Error("task callback must be a function");if(f.started=!0,null==c&&f.idle())setTimeout((function(){return f.drain()}),1);else{var m={data:c,callback:"function"==typeof d?d:_noop};l?f._tasks.unshift(m):f._tasks.push(m),setTimeout((function(){return f.process()}),1)}}function _next(c){return function next(){d-=1,c.callback.apply(c,arguments),null!=arguments[0]&&f.error(arguments[0],c.data),d<=f.concurrency-f.buffer&&f.unsaturated(),f.idle()&&f.drain(),f.process()}}return f}var g={};function _defineProperties(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}function _createClass(c,l,d){return l&&_defineProperties(c.prototype,l),d&&_defineProperties(c,d),c}var v=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),b=null;function _noop$1(){}var x=function(){function Resource(c,l,d){if("string"!=typeof c||"string"!=typeof l)throw new Error("Both name and url are required for constructing a resource.");d=d||{},this._flags=0,this._setFlag(Resource.STATUS_FLAGS.DATA_URL,0===l.indexOf("data:")),this.name=c,this.url=l,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===d.crossOrigin?"anonymous":d.crossOrigin,this.timeout=d.timeout||0,this.loadType=d.loadType||this._determineLoadType(),this.xhrType=d.xhrType,this.metadata=d.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=Resource.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_noop$1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new y.a,this.onProgress=new y.a,this.onComplete=new y.a,this.onAfterMiddleware=new y.a}Resource.setExtensionLoadType=function setExtensionLoadType(c,l){setExtMap(Resource._loadTypeMap,c,l)},Resource.setExtensionXhrType=function setExtensionXhrType(c,l){setExtMap(Resource._xhrTypeMap,c,l)};var c=Resource.prototype;return c.complete=function complete(){this._clearEvents(),this._finish()},c.abort=function abort(c){if(!this.error){if(this.error=new Error(c),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=Resource.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},c.load=function load(c){var l=this;if(!this.isLoading)if(this.isComplete)c&&setTimeout((function(){return c(l)}),1);else switch(c&&this.onComplete.once(c),this._setFlag(Resource.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case Resource.LOAD_TYPE.IMAGE:this.type=Resource.TYPE.IMAGE,this._loadElement("image");break;case Resource.LOAD_TYPE.AUDIO:this.type=Resource.TYPE.AUDIO,this._loadSourceElement("audio");break;case Resource.LOAD_TYPE.VIDEO:this.type=Resource.TYPE.VIDEO,this._loadSourceElement("video");break;case Resource.LOAD_TYPE.XHR:default:v&&this.crossOrigin?this._loadXdr():this._loadXhr()}},c._hasFlag=function _hasFlag(c){return 0!=(this._flags&c)},c._setFlag=function _setFlag(c,l){this._flags=l?this._flags|c:this._flags&~c},c._clearEvents=function _clearEvents(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},c._finish=function _finish(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(Resource.STATUS_FLAGS.COMPLETE,!0),this._setFlag(Resource.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},c._loadElement=function _loadElement(c){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===c&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(c),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},c._loadSourceElement=function _loadSourceElement(c){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===c&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(c),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var l=this.metadata.mimeType,d=0;d<this.url.length;++d)this.data.appendChild(this._createSource(c,this.url[d],Array.isArray(l)?l[d]:l));else{var f=this.metadata.mimeType;this.data.appendChild(this._createSource(c,this.url,Array.isArray(f)?f[0]:f))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+c)},c._loadXhr=function _loadXhr(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var c=this.xhr=new XMLHttpRequest;c.open("GET",this.url,!0),c.timeout=this.timeout,this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON||this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT?c.responseType=Resource.XHR_RESPONSE_TYPE.TEXT:c.responseType=this.xhrType,c.addEventListener("error",this._boundXhrOnError,!1),c.addEventListener("timeout",this._boundXhrOnTimeout,!1),c.addEventListener("abort",this._boundXhrOnAbort,!1),c.addEventListener("progress",this._boundOnProgress,!1),c.addEventListener("load",this._boundXhrOnLoad,!1),c.send()},c._loadXdr=function _loadXdr(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var c=this.xhr=new XDomainRequest;c.timeout=this.timeout||5e3,c.onerror=this._boundXhrOnError,c.ontimeout=this._boundXhrOnTimeout,c.onprogress=this._boundOnProgress,c.onload=this._boundXhrOnLoad,c.open("GET",this.url,!0),setTimeout((function(){return c.send()}),1)},c._createSource=function _createSource(c,l,d){d||(d=c+"/"+this._getExtension(l));var f=document.createElement("source");return f.src=l,f.type=d,f},c._onError=function _onError(c){this.abort("Failed to load element using: "+c.target.nodeName)},c._onProgress=function _onProgress(c){c&&c.lengthComputable&&this.onProgress.dispatch(this,c.loaded/c.total)},c._onTimeout=function _onTimeout(){this.abort("Load timed out.")},c._xhrOnError=function _xhrOnError(){var c=this.xhr;this.abort(reqType(c)+" Request failed. Status: "+c.status+', text: "'+c.statusText+'"')},c._xhrOnTimeout=function _xhrOnTimeout(){var c=this.xhr;this.abort(reqType(c)+" Request timed out.")},c._xhrOnAbort=function _xhrOnAbort(){var c=this.xhr;this.abort(reqType(c)+" Request was aborted by the user.")},c._xhrOnLoad=function _xhrOnLoad(){var c=this.xhr,l="",d=void 0===c.status?200:c.status;if(""!==c.responseType&&"text"!==c.responseType&&void 0!==c.responseType||(l=c.responseText),0===d&&(l.length>0||c.responseType===Resource.XHR_RESPONSE_TYPE.BUFFER)?d=200:1223===d&&(d=204),2===(d/100|0)){if(this.xhrType===Resource.XHR_RESPONSE_TYPE.TEXT)this.data=l,this.type=Resource.TYPE.TEXT;else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(l),this.type=Resource.TYPE.JSON}catch(c){return void this.abort("Error trying to parse loaded json: "+c)}else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var f=new DOMParser;this.data=f.parseFromString(l,"text/xml")}else{var m=document.createElement("div");m.innerHTML=l,this.data=m}this.type=Resource.TYPE.XML}catch(c){return void this.abort("Error trying to parse loaded xml: "+c)}else this.data=c.response||l;this.complete()}else this.abort("["+c.status+"] "+c.statusText+": "+c.responseURL)},c._determineCrossOrigin=function _determineCrossOrigin(c,l){if(0===c.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";l=l||window.location,b||(b=document.createElement("a")),b.href=c;var d=!(c=m()(b.href,{strictMode:!0})).port&&""===l.port||c.port===l.port,f=c.protocol?c.protocol+":":"";return c.host===l.hostname&&d&&f===l.protocol?"":"anonymous"},c._determineXhrType=function _determineXhrType(){return Resource._xhrTypeMap[this.extension]||Resource.XHR_RESPONSE_TYPE.TEXT},c._determineLoadType=function _determineLoadType(){return Resource._loadTypeMap[this.extension]||Resource.LOAD_TYPE.XHR},c._getExtension=function _getExtension(){var c=this.url,l="";if(this.isDataUrl){var d=c.indexOf("/");l=c.substring(d+1,c.indexOf(";",d))}else{var f=c.indexOf("?"),m=c.indexOf("#"),_=Math.min(f>-1?f:c.length,m>-1?m:c.length);l=(c=c.substring(0,_)).substring(c.lastIndexOf(".")+1)}return l.toLowerCase()},c._getMimeFromXhrType=function _getMimeFromXhrType(c){switch(c){case Resource.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case Resource.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case Resource.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case Resource.XHR_RESPONSE_TYPE.JSON:return"application/json";case Resource.XHR_RESPONSE_TYPE.DEFAULT:case Resource.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},_createClass(Resource,[{key:"isDataUrl",get:function get(){return this._hasFlag(Resource.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function get(){return this._hasFlag(Resource.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function get(){return this._hasFlag(Resource.STATUS_FLAGS.LOADING)}}]),Resource}();function setExtMap(c,l,d){l&&0===l.indexOf(".")&&(l=l.substring(1)),l&&(c[l]=d)}function reqType(c){return c.toString().replace("object ","")}x.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},x.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},x.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},x.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},x._loadTypeMap={gif:x.LOAD_TYPE.IMAGE,png:x.LOAD_TYPE.IMAGE,bmp:x.LOAD_TYPE.IMAGE,jpg:x.LOAD_TYPE.IMAGE,jpeg:x.LOAD_TYPE.IMAGE,tif:x.LOAD_TYPE.IMAGE,tiff:x.LOAD_TYPE.IMAGE,webp:x.LOAD_TYPE.IMAGE,tga:x.LOAD_TYPE.IMAGE,svg:x.LOAD_TYPE.IMAGE,"svg+xml":x.LOAD_TYPE.IMAGE,mp3:x.LOAD_TYPE.AUDIO,ogg:x.LOAD_TYPE.AUDIO,wav:x.LOAD_TYPE.AUDIO,mp4:x.LOAD_TYPE.VIDEO,webm:x.LOAD_TYPE.VIDEO},x._xhrTypeMap={xhtml:x.XHR_RESPONSE_TYPE.DOCUMENT,html:x.XHR_RESPONSE_TYPE.DOCUMENT,htm:x.XHR_RESPONSE_TYPE.DOCUMENT,xml:x.XHR_RESPONSE_TYPE.DOCUMENT,tmx:x.XHR_RESPONSE_TYPE.DOCUMENT,svg:x.XHR_RESPONSE_TYPE.DOCUMENT,tsx:x.XHR_RESPONSE_TYPE.DOCUMENT,gif:x.XHR_RESPONSE_TYPE.BLOB,png:x.XHR_RESPONSE_TYPE.BLOB,bmp:x.XHR_RESPONSE_TYPE.BLOB,jpg:x.XHR_RESPONSE_TYPE.BLOB,jpeg:x.XHR_RESPONSE_TYPE.BLOB,tif:x.XHR_RESPONSE_TYPE.BLOB,tiff:x.XHR_RESPONSE_TYPE.BLOB,webp:x.XHR_RESPONSE_TYPE.BLOB,tga:x.XHR_RESPONSE_TYPE.BLOB,json:x.XHR_RESPONSE_TYPE.JSON,text:x.XHR_RESPONSE_TYPE.TEXT,txt:x.XHR_RESPONSE_TYPE.TEXT,ttf:x.XHR_RESPONSE_TYPE.BUFFER,otf:x.XHR_RESPONSE_TYPE.BUFFER},x.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var T=window.URL||window.webkitURL;var S={caching:function caching(c,l){var d=this;g[c.url]?(c.data=g[c.url],c.complete()):c.onComplete.once((function(){return g[d.url]=d.data})),l()},parsing:function parsing(c,l){if(c.data){if(c.xhr&&c.xhrType===x.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof c.data){if(0===c.data.type.indexOf("image")){var d=T.createObjectURL(c.data);return c.blob=c.data,c.data=new Image,c.data.src=d,c.type=x.TYPE.IMAGE,void(c.data.onload=function(){T.revokeObjectURL(d),c.data.onload=null,l()})}}else{var f=c.xhr.getResponseHeader("content-type");if(f&&0===f.indexOf("image"))return c.data=new Image,c.data.src="data:"+f+";base64,"+function encodeBinary(c){for(var l="",d=0;d<c.length;){for(var f=[0,0,0],m=[0,0,0,0],_=0;_<f.length;++_)d<c.length?f[_]=255&c.charCodeAt(d++):f[_]=0;switch(m[0]=f[0]>>2,m[1]=(3&f[0])<<4|f[1]>>4,m[2]=(15&f[1])<<2|f[2]>>6,m[3]=63&f[2],d-(c.length-1)){case 2:m[3]=64,m[2]=64;break;case 1:m[3]=64}for(var y=0;y<m.length;++y)l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(m[y])}return l}(c.xhr.responseText),c.type=x.TYPE.IMAGE,void(c.data.onload=function(){c.data.onload=null,l()})}l()}else l()}},E=/(#[\w-]+)?$/,P=function(){function Loader(c,l){var d=this;void 0===c&&(c=""),void 0===l&&(l=10),this.baseUrl=c,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(c,l){return d._loadResource(c,l)},this._queue=queue(this._boundLoadResource,l),this._queue.pause(),this.resources={},this.onProgress=new y.a,this.onError=new y.a,this.onLoad=new y.a,this.onStart=new y.a,this.onComplete=new y.a;for(var f=0;f<Loader._defaultBeforeMiddleware.length;++f)this.pre(Loader._defaultBeforeMiddleware[f]);for(var m=0;m<Loader._defaultAfterMiddleware.length;++m)this.use(Loader._defaultAfterMiddleware[m])}var c=Loader.prototype;return c.add=function add(c,l,d,f){if(Array.isArray(c)){for(var m=0;m<c.length;++m)this.add(c[m]);return this}if("object"==typeof c&&(f=l||c.callback||c.onComplete,d=c,l=c.url,c=c.name||c.key||c.url),"string"!=typeof l&&(f=d,d=l,l=c),"string"!=typeof l)throw new Error("No url passed to add resource to loader.");if("function"==typeof d&&(f=d,d=null),this.loading&&(!d||!d.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[c])throw new Error('Resource named "'+c+'" already exists.');if(l=this._prepareUrl(l),this.resources[c]=new x(c,l,d),"function"==typeof f&&this.resources[c].onAfterMiddleware.once(f),this.loading){for(var _=d.parentResource,y=[],g=0;g<_.children.length;++g)_.children[g].isComplete||y.push(_.children[g]);var v=_.progressChunk*(y.length+1)/(y.length+2);_.children.push(this.resources[c]),_.progressChunk=v;for(var b=0;b<y.length;++b)y[b].progressChunk=v;this.resources[c].progressChunk=v}return this._queue.push(this.resources[c]),this},c.pre=function pre(c){return this._beforeMiddleware.push(c),this},c.use=function use(c){return this._afterMiddleware.push(c),this},c.reset=function reset(){for(var c in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var l=this.resources[c];l._onLoadBinding&&l._onLoadBinding.detach(),l.isLoading&&l.abort()}return this.resources={},this},c.load=function load(c){if("function"==typeof c&&this.onComplete.once(c),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var l=100/this._queue._tasks.length,d=0;d<this._queue._tasks.length;++d)this._queue._tasks[d].data.progressChunk=l;this._onStart(),this._queue.resume()}return this},c._prepareUrl=function _prepareUrl(c){var l,d=m()(c,{strictMode:!0});if(l=d.protocol||!d.path||0===c.indexOf("//")?c:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==c.charAt(0)?this.baseUrl+"/"+c:this.baseUrl+c,this.defaultQueryString){var f=E.exec(l)[0];-1!==(l=l.substr(0,l.length-f.length)).indexOf("?")?l+="&"+this.defaultQueryString:l+="?"+this.defaultQueryString,l+=f}return l},c._loadResource=function _loadResource(c,l){var d=this;c._dequeue=l,eachSeries(this._beforeMiddleware,(function(l,f){l.call(d,c,(function(){f(c.isComplete?{}:null)}))}),(function(){c.isComplete?d._onLoad(c):(c._onLoadBinding=c.onComplete.once(d._onLoad,d),c.load())}),!0)},c._onStart=function _onStart(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},c._onComplete=function _onComplete(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},c._onLoad=function _onLoad(c){var l=this;c._onLoadBinding=null,this._resourcesParsing.push(c),c._dequeue(),eachSeries(this._afterMiddleware,(function(d,f){d.call(l,c,f)}),(function(){c.onAfterMiddleware.dispatch(c),l.progress=Math.min(100,l.progress+c.progressChunk),l.onProgress.dispatch(l,c),c.error?l.onError.dispatch(c.error,l,c):l.onLoad.dispatch(l,c),l._resourcesParsing.splice(l._resourcesParsing.indexOf(c),1),l._queue.idle()&&0===l._resourcesParsing.length&&l._onComplete()}),!0)},_createClass(Loader,[{key:"concurrency",get:function get(){return this._queue.concurrency},set:function set(c){this._queue.concurrency=c}}]),Loader}();P._defaultBeforeMiddleware=[],P._defaultAfterMiddleware=[],P.pre=function LoaderPreStatic(c){return P._defaultBeforeMiddleware.push(c),P},P.use=function LoaderUseStatic(c){return P._defaultAfterMiddleware.push(c),P};var w=d(2),O=x,extendStatics=function(c,l){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};var I=function(){function TextureLoader(){}return TextureLoader.use=function(c,l){c.data&&c.type===x.TYPE.IMAGE&&(c.texture=w.G.fromLoader(c.data,c.url,c.name)),l()},TextureLoader}(),A=function(c){function Loader(l,d){for(var f=c.call(this,l,d)||this,m=0;m<Loader._plugins.length;++m){var _=Loader._plugins[m],y=_.pre,g=_.use;y&&f.pre(y),g&&f.use(g)}return f._protected=!1,f}return function __extends(c,l){function __(){this.constructor=c}extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}(Loader,c),Loader.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(Loader,"shared",{get:function(){var c=Loader._shared;return c||((c=new Loader)._protected=!0,Loader._shared=c),c},enumerable:!1,configurable:!0}),Loader.registerPlugin=function(c){return Loader._plugins.push(c),c.add&&c.add(),Loader},Loader._plugins=[],Loader}(P);A.registerPlugin({use:S.parsing}),A.registerPlugin(I);var C=function(){function AppLoaderPlugin(){}return AppLoaderPlugin.init=function(c){c=Object.assign({sharedLoader:!1},c),this.loader=c.sharedLoader?A.shared:new A},AppLoaderPlugin.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},AppLoaderPlugin}()},function(c,l,d){"use strict";d.d(l,"a",(function(){return f}));var f=function(){function Runner(c){this.items=[],this._name=c,this._aliasCount=0}return Runner.prototype.emit=function(c,l,d,f,m,_,y,g){if(arguments.length>8)throw new Error("max arguments reached");var v=this,b=v.name,x=v.items;this._aliasCount++;for(var T=0,S=x.length;T<S;T++)x[T][b](c,l,d,f,m,_,y,g);return x===this.items&&this._aliasCount--,this},Runner.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},Runner.prototype.add=function(c){return c[this._name]&&(this.ensureNonAliasedItems(),this.remove(c),this.items.push(c)),this},Runner.prototype.remove=function(c){var l=this.items.indexOf(c);return-1!==l&&(this.ensureNonAliasedItems(),this.items.splice(l,1)),this},Runner.prototype.contains=function(c){return-1!==this.items.indexOf(c)},Runner.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},Runner.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(Runner.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(Runner.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Runner}();Object.defineProperties(f.prototype,{dispatch:{value:f.prototype.emit},run:{value:f.prototype.emit}})},function(c,l,d){(function(l){var check=function(c){return c&&c.Math==Math&&c};c.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof l&&l)||Function("return this")()}).call(this,d(19))},function(c,l,d){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var f=function(){function defineProperties(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,l,d){return l&&defineProperties(c.prototype,l),d&&defineProperties(c,d),c}}();function _classCallCheck(c,l){if(!(c instanceof l))throw new TypeError("Cannot call a class as a function")}var m=function(){function MiniSignalBinding(c,l,d){void 0===l&&(l=!1),_classCallCheck(this,MiniSignalBinding),this._fn=c,this._once=l,this._thisArg=d,this._next=this._prev=this._owner=null}return f(MiniSignalBinding,[{key:"detach",value:function detach(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),MiniSignalBinding}();function _addMiniSignalBinding(c,l){return c._head?(c._tail._next=l,l._prev=c._tail,c._tail=l):(c._head=l,c._tail=l),l._owner=c,l}var _=function(){function MiniSignal(){_classCallCheck(this,MiniSignal),this._head=this._tail=void 0}return f(MiniSignal,[{key:"handlers",value:function handlers(){var c=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],l=this._head;if(c)return!!l;for(var d=[];l;)d.push(l),l=l._next;return d}},{key:"has",value:function has(c){if(!(c instanceof m))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return c._owner===this}},{key:"dispatch",value:function dispatch(){var c=this._head;if(!c)return!1;for(;c;)c._once&&this.detach(c),c._fn.apply(c._thisArg,arguments),c=c._next;return!0}},{key:"add",value:function add(c){var l=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof c)throw new Error("MiniSignal#add(): First arg must be a Function.");return _addMiniSignalBinding(this,new m(c,!1,l))}},{key:"once",value:function once(c){var l=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof c)throw new Error("MiniSignal#once(): First arg must be a Function.");return _addMiniSignalBinding(this,new m(c,!0,l))}},{key:"detach",value:function detach(c){if(!(c instanceof m))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return c._owner!==this||(c._prev&&(c._prev._next=c._next),c._next&&(c._next._prev=c._prev),c===this._head?(this._head=c._next,null===c._next&&(this._tail=null)):c===this._tail&&(this._tail=c._prev,this._tail._next=null),c._owner=null),this}},{key:"detachAll",value:function detachAll(){var c=this._head;if(!c)return this;for(this._head=this._tail=null;c;)c._owner=null,c=c._next;return this}}]),MiniSignal}();_.MiniSignalBinding=m,l.default=_,c.exports=l.default},function(c,l){c.exports=function(c){try{return!!c()}catch(c){return!0}}},function(c,l,d){var f=d(13);c.exports=function(c){if(!f(c))throw TypeError(String(c)+" is not an object");return c}},function(c,l){c.exports=function _interopRequireDefault(c){return c&&c.__esModule?c:{default:c}}},function(c,l){c.exports=function(c){return"object"==typeof c?null!==c:"function"==typeof c}},function(c,l){var d={}.hasOwnProperty;c.exports=function(c,l){return d.call(c,l)}},function(c,l){c.exports=function _classCallCheck(c,l){if(!(c instanceof l))throw new TypeError("Cannot call a class as a function")}},function(c,l){function _defineProperties(c,l){for(var d=0;d<l.length;d++){var f=l[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}c.exports=function _createClass(c,l,d){return l&&_defineProperties(c.prototype,l),d&&_defineProperties(c,d),c}},function(c,l){function _getPrototypeOf(l){return c.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(c){return c.__proto__||Object.getPrototypeOf(c)},_getPrototypeOf(l)}c.exports=_getPrototypeOf},function(c,l,d){var f=d(28),m=d(31),_=d(64);f||m(Object.prototype,"toString",_,{unsafe:!0})},function(c,l){var d;d=function(){return this}();try{d=d||new Function("return this")()}catch(c){"object"==typeof window&&(d=window)}c.exports=d},function(c,l,d){var f=d(10);c.exports=!f((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(c,l,d){var f=d(66),m=d(34),_=d(53),y=d(11),g=d(13),v=d(79),b=d(83),x=d(10),T=m("Reflect","construct"),S=x((function(){function F(){}return!(T((function(){}),[],F)instanceof F)})),E=!x((function(){T((function(){}))})),P=S||E;f({target:"Reflect",stat:!0,forced:P,sham:P},{construct:function construct(c,l){_(c),y(l);var d=arguments.length<3?c:_(arguments[2]);if(E&&!S)return T(c,l,d);if(c==d){switch(l.length){case 0:return new c;case 1:return new c(l[0]);case 2:return new c(l[0],l[1]);case 3:return new c(l[0],l[1],l[2]);case 4:return new c(l[0],l[1],l[2],l[3])}var f=[null];return f.push.apply(f,l),new(b.apply(c,f))}var m=d.prototype,x=v(g(m)?m:Object.prototype),P=Function.apply.call(c,x,l);return g(P)?P:x}})},function(c,l,d){"use strict";var f=d(31),m=d(11),_=d(10),y=d(84),g="toString",v=RegExp.prototype,b=v.toString,x=_((function(){return"/a/b"!=b.call({source:"a",flags:"b"})})),T=b.name!=g;(x||T)&&f(RegExp.prototype,g,(function toString(){var c=m(this),l=String(c.source),d=c.flags;return"/"+l+"/"+String(void 0===d&&c instanceof RegExp&&!("flags"in v)?y.call(c):d)}),{unsafe:!0})},function(c,l,d){var f=d(85);c.exports=function _inherits(c,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(l&&l.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),l&&f(c,l)}},function(c,l,d){var f=d(86),m=d(54);c.exports=function _possibleConstructorReturn(c,l){return!l||"object"!==f(l)&&"function"!=typeof l?m(c):l}},function(c,l,d){"use strict";d.r(l),d.d(l,"utils",(function(){return T})),d.d(l,"AccessibilityManager",(function(){return C})),d.d(l,"accessibleTarget",(function(){return A})),d.d(l,"InteractionData",(function(){return D})),d.d(l,"InteractionEvent",(function(){return L})),d.d(l,"InteractionManager",(function(){return U})),d.d(l,"InteractionTrackingData",(function(){return B})),d.d(l,"interactiveTarget",(function(){return k})),d.d(l,"Application",(function(){return X})),d.d(l,"AbstractBatchRenderer",(function(){return G.a})),d.d(l,"AbstractRenderer",(function(){return G.b})),d.d(l,"Attribute",(function(){return G.c})),d.d(l,"BaseRenderTexture",(function(){return G.d})),d.d(l,"BaseTexture",(function(){return G.e})),d.d(l,"BatchDrawCall",(function(){return G.f})),d.d(l,"BatchGeometry",(function(){return G.g})),d.d(l,"BatchPluginFactory",(function(){return G.h})),d.d(l,"BatchRenderer",(function(){return G.i})),d.d(l,"BatchShaderGenerator",(function(){return G.j})),d.d(l,"BatchTextureArray",(function(){return G.k})),d.d(l,"Buffer",(function(){return G.l})),d.d(l,"Filter",(function(){return G.m})),d.d(l,"FilterState",(function(){return G.n})),d.d(l,"Framebuffer",(function(){return G.o})),d.d(l,"GLFramebuffer",(function(){return G.p})),d.d(l,"GLProgram",(function(){return G.q})),d.d(l,"GLTexture",(function(){return G.r})),d.d(l,"Geometry",(function(){return G.s})),d.d(l,"IGLUniformData",(function(){return G.t})),d.d(l,"MaskData",(function(){return G.u})),d.d(l,"ObjectRenderer",(function(){return G.v})),d.d(l,"Program",(function(){return G.w})),d.d(l,"Quad",(function(){return G.x})),d.d(l,"QuadUv",(function(){return G.y})),d.d(l,"RenderTexture",(function(){return G.z})),d.d(l,"RenderTexturePool",(function(){return G.A})),d.d(l,"Renderer",(function(){return G.B})),d.d(l,"Shader",(function(){return G.C})),d.d(l,"SpriteMaskFilter",(function(){return G.D})),d.d(l,"State",(function(){return G.E})),d.d(l,"System",(function(){return G.F})),d.d(l,"Texture",(function(){return G.G})),d.d(l,"TextureMatrix",(function(){return G.H})),d.d(l,"TextureUvs",(function(){return G.I})),d.d(l,"UniformGroup",(function(){return G.J})),d.d(l,"ViewableBuffer",(function(){return G.K})),d.d(l,"autoDetectRenderer",(function(){return G.L})),d.d(l,"checkMaxIfStatementsInShader",(function(){return G.M})),d.d(l,"defaultFilterVertex",(function(){return G.N})),d.d(l,"defaultVertex",(function(){return G.O})),d.d(l,"resources",(function(){return G.P})),d.d(l,"systems",(function(){return G.Q})),d.d(l,"uniformParsers",(function(){return G.R})),d.d(l,"Extract",(function(){return V})),d.d(l,"AppLoaderPlugin",(function(){return Y.a})),d.d(l,"Loader",(function(){return Y.b})),d.d(l,"LoaderResource",(function(){return Y.c})),d.d(l,"TextureLoader",(function(){return Y.d})),d.d(l,"ParticleContainer",(function(){return Z})),d.d(l,"ParticleRenderer",(function(){return J})),d.d(l,"BasePrepare",(function(){return Lt})),d.d(l,"CountLimiter",(function(){return Ft})),d.d(l,"Prepare",(function(){return Bt})),d.d(l,"TimeLimiter",(function(){return Nt})),d.d(l,"Spritesheet",(function(){return kt})),d.d(l,"SpritesheetLoader",(function(){return jt})),d.d(l,"TilingSprite",(function(){return Gt})),d.d(l,"TilingSpriteRenderer",(function(){return zt})),d.d(l,"BitmapFont",(function(){return re})),d.d(l,"BitmapFontData",(function(){return Qt})),d.d(l,"BitmapFontLoader",(function(){return se})),d.d(l,"BitmapText",(function(){return oe})),d.d(l,"Ticker",(function(){return R.a})),d.d(l,"TickerPlugin",(function(){return R.b})),d.d(l,"UPDATE_PRIORITY",(function(){return R.c})),d.d(l,"ALPHA_MODES",(function(){return W.a})),d.d(l,"BLEND_MODES",(function(){return W.b})),d.d(l,"BUFFER_BITS",(function(){return W.c})),d.d(l,"CLEAR_MODES",(function(){return W.d})),d.d(l,"DRAW_MODES",(function(){return W.e})),d.d(l,"ENV",(function(){return W.f})),d.d(l,"FORMATS",(function(){return W.g})),d.d(l,"GC_MODES",(function(){return W.h})),d.d(l,"MASK_TYPES",(function(){return W.i})),d.d(l,"MIPMAP_MODES",(function(){return W.j})),d.d(l,"MSAA_QUALITY",(function(){return W.k})),d.d(l,"PRECISION",(function(){return W.l})),d.d(l,"RENDERER_TYPE",(function(){return W.m})),d.d(l,"SCALE_MODES",(function(){return W.n})),d.d(l,"TARGETS",(function(){return W.o})),d.d(l,"TYPES",(function(){return W.p})),d.d(l,"WRAP_MODES",(function(){return W.q})),d.d(l,"Bounds",(function(){return P})),d.d(l,"Container",(function(){return I})),d.d(l,"DisplayObject",(function(){return w})),d.d(l,"TemporaryDisplayObject",(function(){return O})),d.d(l,"FillStyle",(function(){return tt})),d.d(l,"GRAPHICS_CURVES",(function(){return $})),d.d(l,"Graphics",(function(){return Tt})),d.d(l,"GraphicsData",(function(){return mt})),d.d(l,"GraphicsGeometry",(function(){return gt})),d.d(l,"LINE_CAP",(function(){return K})),d.d(l,"LINE_JOIN",(function(){return q})),d.d(l,"LineStyle",(function(){return vt})),d.d(l,"graphicsUtils",(function(){return ft})),d.d(l,"Circle",(function(){return E.a})),d.d(l,"DEG_TO_RAD",(function(){return E.b})),d.d(l,"Ellipse",(function(){return E.c})),d.d(l,"Matrix",(function(){return E.d})),d.d(l,"ObservablePoint",(function(){return E.e})),d.d(l,"PI_2",(function(){return E.f})),d.d(l,"Point",(function(){return E.g})),d.d(l,"Polygon",(function(){return E.h})),d.d(l,"RAD_TO_DEG",(function(){return E.i})),d.d(l,"Rectangle",(function(){return E.j})),d.d(l,"RoundedRectangle",(function(){return E.k})),d.d(l,"SHAPES",(function(){return E.l})),d.d(l,"Transform",(function(){return E.m})),d.d(l,"groupD8",(function(){return E.n})),d.d(l,"Mesh",(function(){return qt})),d.d(l,"MeshBatchUvs",(function(){return Vt})),d.d(l,"MeshGeometry",(function(){return Zt})),d.d(l,"MeshMaterial",(function(){return Kt})),d.d(l,"NineSlicePlane",(function(){return Ue})),d.d(l,"PlaneGeometry",(function(){return Le})),d.d(l,"RopeGeometry",(function(){return Be})),d.d(l,"SimpleMesh",(function(){return je})),d.d(l,"SimplePlane",(function(){return ke})),d.d(l,"SimpleRope",(function(){return Ne})),d.d(l,"Runner",(function(){return Ge.a})),d.d(l,"Sprite",(function(){return wt})),d.d(l,"AnimatedSprite",(function(){return Xe})),d.d(l,"TEXT_GRADIENT",(function(){return St})),d.d(l,"Text",(function(){return Dt})),d.d(l,"TextMetrics",(function(){return Ct})),d.d(l,"TextStyle",(function(){return At})),d.d(l,"isMobile",(function(){return S.a})),d.d(l,"settings",(function(){return S.b})),d.d(l,"VERSION",(function(){return ze})),d.d(l,"filters",(function(){return Ve})),d.d(l,"useDeprecated",(function(){return useDeprecated}));var f=d(58),m=d(59),_=d.n(m);window.Promise||(window.Promise=f.Polyfill),Object.assign||(Object.assign=_.a);if(Date.now&&Date.prototype.getTime||(Date.now=function now(){return(new Date).getTime()}),!window.performance||!window.performance.now){var y=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-y}}for(var g=Date.now(),v=["ms","moz","webkit","o"],b=0;b<v.length&&!window.requestAnimationFrame;++b){var x=v[b];window.requestAnimationFrame=window[x+"RequestAnimationFrame"],window.cancelAnimationFrame=window[x+"CancelAnimationFrame"]||window[x+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(c){if("function"!=typeof c)throw new TypeError(c+"is not a function");var l=Date.now(),d=16+g-l;return d<0&&(d=0),g=l,window.setTimeout((function(){g=Date.now(),c(performance.now())}),d)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(c){return clearTimeout(c)}),Math.sign||(Math.sign=function mathSign(c){return 0===(c=Number(c))||isNaN(c)?c:c>0?1:-1}),Number.isInteger||(Number.isInteger=function numberIsInteger(c){return"number"==typeof c&&isFinite(c)&&Math.floor(c)===c}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var T=d(0),S=d(4),E=d(3);S.b.SORTABLE_CHILDREN=!1;var P=function(){function Bounds(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return Bounds.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},Bounds.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Bounds.prototype.getRectangle=function(c){return this.minX>this.maxX||this.minY>this.maxY?E.j.EMPTY:((c=c||new E.j(0,0,1,1)).x=this.minX,c.y=this.minY,c.width=this.maxX-this.minX,c.height=this.maxY-this.minY,c)},Bounds.prototype.addPoint=function(c){this.minX=Math.min(this.minX,c.x),this.maxX=Math.max(this.maxX,c.x),this.minY=Math.min(this.minY,c.y),this.maxY=Math.max(this.maxY,c.y)},Bounds.prototype.addQuad=function(c){var l=this.minX,d=this.minY,f=this.maxX,m=this.maxY,_=c[0],y=c[1];l=_<l?_:l,d=y<d?y:d,f=_>f?_:f,m=y>m?y:m,l=(_=c[2])<l?_:l,d=(y=c[3])<d?y:d,f=_>f?_:f,m=y>m?y:m,l=(_=c[4])<l?_:l,d=(y=c[5])<d?y:d,f=_>f?_:f,m=y>m?y:m,l=(_=c[6])<l?_:l,d=(y=c[7])<d?y:d,f=_>f?_:f,m=y>m?y:m,this.minX=l,this.minY=d,this.maxX=f,this.maxY=m},Bounds.prototype.addFrame=function(c,l,d,f,m){this.addFrameMatrix(c.worldTransform,l,d,f,m)},Bounds.prototype.addFrameMatrix=function(c,l,d,f,m){var _=c.a,y=c.b,g=c.c,v=c.d,b=c.tx,x=c.ty,T=this.minX,S=this.minY,E=this.maxX,P=this.maxY,w=_*l+g*d+b,O=y*l+v*d+x;T=w<T?w:T,S=O<S?O:S,E=w>E?w:E,P=O>P?O:P,T=(w=_*f+g*d+b)<T?w:T,S=(O=y*f+v*d+x)<S?O:S,E=w>E?w:E,P=O>P?O:P,T=(w=_*l+g*m+b)<T?w:T,S=(O=y*l+v*m+x)<S?O:S,E=w>E?w:E,P=O>P?O:P,T=(w=_*f+g*m+b)<T?w:T,S=(O=y*f+v*m+x)<S?O:S,E=w>E?w:E,P=O>P?O:P,this.minX=T,this.minY=S,this.maxX=E,this.maxY=P},Bounds.prototype.addVertexData=function(c,l,d){for(var f=this.minX,m=this.minY,_=this.maxX,y=this.maxY,g=l;g<d;g+=2){var v=c[g],b=c[g+1];f=v<f?v:f,m=b<m?b:m,_=v>_?v:_,y=b>y?b:y}this.minX=f,this.minY=m,this.maxX=_,this.maxY=y},Bounds.prototype.addVertices=function(c,l,d,f){this.addVerticesMatrix(c.worldTransform,l,d,f)},Bounds.prototype.addVerticesMatrix=function(c,l,d,f,m,_){void 0===m&&(m=0),void 0===_&&(_=m);for(var y=c.a,g=c.b,v=c.c,b=c.d,x=c.tx,T=c.ty,S=this.minX,E=this.minY,P=this.maxX,w=this.maxY,O=d;O<f;O+=2){var I=l[O],A=l[O+1],C=y*I+v*A+x,R=b*A+g*I+T;S=Math.min(S,C-m),P=Math.max(P,C+m),E=Math.min(E,R-_),w=Math.max(w,R+_)}this.minX=S,this.minY=E,this.maxX=P,this.maxY=w},Bounds.prototype.addBounds=function(c){var l=this.minX,d=this.minY,f=this.maxX,m=this.maxY;this.minX=c.minX<l?c.minX:l,this.minY=c.minY<d?c.minY:d,this.maxX=c.maxX>f?c.maxX:f,this.maxY=c.maxY>m?c.maxY:m},Bounds.prototype.addBoundsMask=function(c,l){var d=c.minX>l.minX?c.minX:l.minX,f=c.minY>l.minY?c.minY:l.minY,m=c.maxX<l.maxX?c.maxX:l.maxX,_=c.maxY<l.maxY?c.maxY:l.maxY;if(d<=m&&f<=_){var y=this.minX,g=this.minY,v=this.maxX,b=this.maxY;this.minX=d<y?d:y,this.minY=f<g?f:g,this.maxX=m>v?m:v,this.maxY=_>b?_:b}},Bounds.prototype.addBoundsMatrix=function(c,l){this.addFrameMatrix(l,c.minX,c.minY,c.maxX,c.maxY)},Bounds.prototype.addBoundsArea=function(c,l){var d=c.minX>l.x?c.minX:l.x,f=c.minY>l.y?c.minY:l.y,m=c.maxX<l.x+l.width?c.maxX:l.x+l.width,_=c.maxY<l.y+l.height?c.maxY:l.y+l.height;if(d<=m&&f<=_){var y=this.minX,g=this.minY,v=this.maxX,b=this.maxY;this.minX=d<y?d:y,this.minY=f<g?f:g,this.maxX=m>v?m:v,this.maxY=_>b?_:b}},Bounds.prototype.pad=function(c,l){void 0===c&&(c=0),void 0===l&&(l=c),this.isEmpty()||(this.minX-=c,this.maxX+=c,this.minY-=l,this.maxY+=l)},Bounds.prototype.addFramePad=function(c,l,d,f,m,_){c-=m,l-=_,d+=m,f+=_,this.minX=this.minX<c?this.minX:c,this.maxX=this.maxX>d?this.maxX:d,this.minY=this.minY<l?this.minY:l,this.maxY=this.maxY>f?this.maxY:f},Bounds}(),extendStatics=function(c,l){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};function __extends(c,l){function __(){this.constructor=c}extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}var w=function(c){function DisplayObject(){var l=c.call(this)||this;return l.tempDisplayObjectParent=null,l.transform=new E.m,l.alpha=1,l.visible=!0,l.renderable=!0,l.parent=null,l.worldAlpha=1,l._lastSortedIndex=0,l._zIndex=0,l.filterArea=null,l.filters=null,l._enabledFilters=null,l._bounds=new P,l._localBounds=null,l._boundsID=0,l._boundsRect=null,l._localBoundsRect=null,l._mask=null,l._destroyed=!1,l.isSprite=!1,l.isMask=!1,l}return __extends(DisplayObject,c),DisplayObject.mixin=function(c){for(var l=Object.keys(c),d=0;d<l.length;++d){var f=l[d];Object.defineProperty(DisplayObject.prototype,f,Object.getOwnPropertyDescriptor(c,f))}},DisplayObject.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},DisplayObject.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},DisplayObject.prototype.getBounds=function(c,l){return c||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),l||(this._boundsRect||(this._boundsRect=new E.j),l=this._boundsRect),this._bounds.getRectangle(l)},DisplayObject.prototype.getLocalBounds=function(c){c||(this._localBoundsRect||(this._localBoundsRect=new E.j),c=this._localBoundsRect),this._localBounds||(this._localBounds=new P);var l=this.transform,d=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var f=this._bounds,m=this._boundsID;this._bounds=this._localBounds;var _=this.getBounds(!1,c);return this.parent=d,this.transform=l,this._bounds=f,this._bounds.updateID+=this._boundsID-m,_},DisplayObject.prototype.toGlobal=function(c,l,d){return void 0===d&&(d=!1),d||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(c,l)},DisplayObject.prototype.toLocal=function(c,l,d,f){return l&&(c=l.toGlobal(c,d,f)),f||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(c,d)},DisplayObject.prototype.setParent=function(c){if(!c||!c.addChild)throw new Error("setParent: Argument must be a Container");return c.addChild(this),c},DisplayObject.prototype.setTransform=function(c,l,d,f,m,_,y,g,v){return void 0===c&&(c=0),void 0===l&&(l=0),void 0===d&&(d=1),void 0===f&&(f=1),void 0===m&&(m=0),void 0===_&&(_=0),void 0===y&&(y=0),void 0===g&&(g=0),void 0===v&&(v=0),this.position.x=c,this.position.y=l,this.scale.x=d||1,this.scale.y=f||1,this.rotation=m,this.skew.x=_,this.skew.y=y,this.pivot.x=g,this.pivot.y=v,this},DisplayObject.prototype.destroy=function(c){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(DisplayObject.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new O),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),DisplayObject.prototype.enableTempParent=function(){var c=this.parent;return this.parent=this._tempDisplayObjectParent,c},DisplayObject.prototype.disableTempParent=function(c){this.parent=c},Object.defineProperty(DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(c){this.transform.position.x=c},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(c){this.transform.position.y=c},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"position",{get:function(){return this.transform.position},set:function(c){this.transform.position.copyFrom(c)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"scale",{get:function(){return this.transform.scale},set:function(c){this.transform.scale.copyFrom(c)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(c){this.transform.pivot.copyFrom(c)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"skew",{get:function(){return this.transform.skew},set:function(c){this.transform.skew.copyFrom(c)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(c){this.transform.rotation=c},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"angle",{get:function(){return this.transform.rotation*E.i},set:function(c){this.transform.rotation=c*E.b},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"zIndex",{get:function(){return this._zIndex},set:function(c){this._zIndex=c,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"worldVisible",{get:function(){var c=this;do{if(!c.visible)return!1;c=c.parent}while(c);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(c){var l;this._mask&&((l=this._mask.maskObject||this._mask).renderable=!0,l.isMask=!1);(this._mask=c,this._mask)&&((l=this._mask.maskObject||this._mask).renderable=!1,l.isMask=!0)},enumerable:!1,configurable:!0}),DisplayObject}(T.EventEmitter),O=function(c){function TemporaryDisplayObject(){var l=null!==c&&c.apply(this,arguments)||this;return l.sortDirty=null,l}return __extends(TemporaryDisplayObject,c),TemporaryDisplayObject}(w);function sortChildren(c,l){return c.zIndex===l.zIndex?c._lastSortedIndex-l._lastSortedIndex:c.zIndex-l.zIndex}w.prototype.displayObjectUpdateTransform=w.prototype.updateTransform;var I=function(c){function Container(){var l=c.call(this)||this;return l.children=[],l.sortableChildren=S.b.SORTABLE_CHILDREN,l.sortDirty=!1,l}return __extends(Container,c),Container.prototype.onChildrenChange=function(c){},Container.prototype.addChild=function(){for(var c=arguments,l=[],d=0;d<arguments.length;d++)l[d]=c[d];if(l.length>1)for(var f=0;f<l.length;f++)this.addChild(l[f]);else{var m=l[0];m.parent&&m.parent.removeChild(m),m.parent=this,this.sortDirty=!0,m.transform._parentID=-1,this.children.push(m),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",m,this,this.children.length-1),m.emit("added",this)}return l[0]},Container.prototype.addChildAt=function(c,l){if(l<0||l>this.children.length)throw new Error(c+"addChildAt: The index "+l+" supplied is out of bounds "+this.children.length);return c.parent&&c.parent.removeChild(c),c.parent=this,this.sortDirty=!0,c.transform._parentID=-1,this.children.splice(l,0,c),this._boundsID++,this.onChildrenChange(l),c.emit("added",this),this.emit("childAdded",c,this,l),c},Container.prototype.swapChildren=function(c,l){if(c!==l){var d=this.getChildIndex(c),f=this.getChildIndex(l);this.children[d]=l,this.children[f]=c,this.onChildrenChange(d<f?d:f)}},Container.prototype.getChildIndex=function(c){var l=this.children.indexOf(c);if(-1===l)throw new Error("The supplied DisplayObject must be a child of the caller");return l},Container.prototype.setChildIndex=function(c,l){if(l<0||l>=this.children.length)throw new Error("The index "+l+" supplied is out of bounds "+this.children.length);var d=this.getChildIndex(c);Object(T.removeItems)(this.children,d,1),this.children.splice(l,0,c),this.onChildrenChange(l)},Container.prototype.getChildAt=function(c){if(c<0||c>=this.children.length)throw new Error("getChildAt: Index ("+c+") does not exist.");return this.children[c]},Container.prototype.removeChild=function(){for(var c=arguments,l=[],d=0;d<arguments.length;d++)l[d]=c[d];if(l.length>1)for(var f=0;f<l.length;f++)this.removeChild(l[f]);else{var m=l[0],_=this.children.indexOf(m);if(-1===_)return null;m.parent=null,m.transform._parentID=-1,Object(T.removeItems)(this.children,_,1),this._boundsID++,this.onChildrenChange(_),m.emit("removed",this),this.emit("childRemoved",m,this,_)}return l[0]},Container.prototype.removeChildAt=function(c){var l=this.getChildAt(c);return l.parent=null,l.transform._parentID=-1,Object(T.removeItems)(this.children,c,1),this._boundsID++,this.onChildrenChange(c),l.emit("removed",this),this.emit("childRemoved",l,this,c),l},Container.prototype.removeChildren=function(c,l){void 0===c&&(c=0),void 0===l&&(l=this.children.length);var d,f=c,m=l-f;if(m>0&&m<=l){d=this.children.splice(f,m);for(var _=0;_<d.length;++_)d[_].parent=null,d[_].transform&&(d[_].transform._parentID=-1);this._boundsID++,this.onChildrenChange(c);for(_=0;_<d.length;++_)d[_].emit("removed",this),this.emit("childRemoved",d[_],this,_);return d}if(0===m&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Container.prototype.sortChildren=function(){for(var c=!1,l=0,d=this.children.length;l<d;++l){var f=this.children[l];f._lastSortedIndex=l,c||0===f.zIndex||(c=!0)}c&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1},Container.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var c=0,l=this.children.length;c<l;++c){var d=this.children[c];d.visible&&d.updateTransform()}},Container.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var c=0;c<this.children.length;c++){var l=this.children[c];if(l.visible&&l.renderable)if(l.calculateBounds(),l._mask){var d=l._mask.maskObject||l._mask;d.calculateBounds(),this._bounds.addBoundsMask(l._bounds,d._bounds)}else l.filterArea?this._bounds.addBoundsArea(l._bounds,l.filterArea):this._bounds.addBounds(l._bounds)}this._bounds.updateID=this._boundsID},Container.prototype.getLocalBounds=function(l,d){void 0===d&&(d=!1);var f=c.prototype.getLocalBounds.call(this,l);if(!d)for(var m=0,_=this.children.length;m<_;++m){var y=this.children[m];y.visible&&y.updateTransform()}return f},Container.prototype._calculateBounds=function(){},Container.prototype.render=function(c){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(c);else{this._render(c);for(var l=0,d=this.children.length;l<d;++l)this.children[l].render(c)}},Container.prototype.renderAdvanced=function(c){c.batch.flush();var l=this.filters,d=this._mask;if(l){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var f=0;f<l.length;f++)l[f].enabled&&this._enabledFilters.push(l[f]);this._enabledFilters.length&&c.filter.push(this,this._enabledFilters)}d&&c.mask.push(this,this._mask),this._render(c);f=0;for(var m=this.children.length;f<m;f++)this.children[f].render(c);c.batch.flush(),d&&c.mask.pop(this),l&&this._enabledFilters&&this._enabledFilters.length&&c.filter.pop()},Container.prototype._render=function(c){},Container.prototype.destroy=function(l){c.prototype.destroy.call(this),this.sortDirty=!1;var d="boolean"==typeof l?l:l&&l.children,f=this.removeChildren(0,this.children.length);if(d)for(var m=0;m<f.length;++m)f[m].destroy(l)},Object.defineProperty(Container.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(c){var l=this.getLocalBounds().width;this.scale.x=0!==l?c/l:1,this._width=c},enumerable:!1,configurable:!0}),Object.defineProperty(Container.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(c){var l=this.getLocalBounds().height;this.scale.y=0!==l?c/l:1,this._height=c},enumerable:!1,configurable:!0}),Container}(w);I.prototype.containerUpdateTransform=I.prototype.updateTransform;var A={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};w.mixin(A);var C=function(){function AccessibilityManager(c){this._hookDiv=null,(T.isMobile.tablet||T.isMobile.phone)&&this.createTouchHook();var l=document.createElement("div");l.style.width="100px",l.style.height="100px",l.style.position="absolute",l.style.top="0px",l.style.left="0px",l.style.zIndex=2..toString(),this.div=l,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=c,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(AccessibilityManager.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(AccessibilityManager.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),AccessibilityManager.prototype.createTouchHook=function(){var c=this,l=document.createElement("button");l.style.width="1px",l.style.height="1px",l.style.position="absolute",l.style.top="-1000px",l.style.left="-1000px",l.style.zIndex=2..toString(),l.style.backgroundColor="#FF0000",l.title="select to enable accessability for this content",l.addEventListener("focus",(function(){c._isMobileAccessibility=!0,c.activate(),c.destroyTouchHook()})),document.body.appendChild(l),this._hookDiv=l},AccessibilityManager.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},AccessibilityManager.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},AccessibilityManager.prototype.deactivate=function(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},AccessibilityManager.prototype.updateAccessibleObjects=function(c){if(c.visible&&c.accessibleChildren){c.accessible&&c.interactive&&(c._accessibleActive||this.addChild(c),c.renderId=this.renderId);for(var l=c.children,d=0;d<l.length;d++)this.updateAccessibleObjects(l[d])}},AccessibilityManager.prototype.update=function(){var c=performance.now();if(!(T.isMobile.android.device&&c<this.androidUpdateCount)&&(this.androidUpdateCount=c+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var l=this.renderer.view.getBoundingClientRect(),d=this.renderer.resolution,f=l.width/this.renderer.width*d,m=l.height/this.renderer.height*d,_=this.div;_.style.left=l.left+"px",_.style.top=l.top+"px",_.style.width=this.renderer.width+"px",_.style.height=this.renderer.height+"px";for(var y=0;y<this.children.length;y++){var g=this.children[y];if(g.renderId!==this.renderId)g._accessibleActive=!1,Object(T.removeItems)(this.children,y,1),this.div.removeChild(g._accessibleDiv),this.pool.push(g._accessibleDiv),g._accessibleDiv=null,y--;else{_=g._accessibleDiv;var v=g.hitArea,b=g.worldTransform;g.hitArea?(_.style.left=(b.tx+v.x*b.a)*f+"px",_.style.top=(b.ty+v.y*b.d)*m+"px",_.style.width=v.width*b.a*f+"px",_.style.height=v.height*b.d*m+"px"):(v=g.getBounds(),this.capHitArea(v),_.style.left=v.x*f+"px",_.style.top=v.y*m+"px",_.style.width=v.width*f+"px",_.style.height=v.height*m+"px",_.title!==g.accessibleTitle&&null!==g.accessibleTitle&&(_.title=g.accessibleTitle),_.getAttribute("aria-label")!==g.accessibleHint&&null!==g.accessibleHint&&_.setAttribute("aria-label",g.accessibleHint)),g.accessibleTitle===_.title&&g.tabIndex===_.tabIndex||(_.title=g.accessibleTitle,_.tabIndex=g.tabIndex,this.debug&&this.updateDebugHTML(_))}}this.renderId++}},AccessibilityManager.prototype.updateDebugHTML=function(c){c.innerHTML="type: "+c.type+"</br> title : "+c.title+"</br> tabIndex: "+c.tabIndex},AccessibilityManager.prototype.capHitArea=function(c){c.x<0&&(c.width+=c.x,c.x=0),c.y<0&&(c.height+=c.y,c.y=0),c.x+c.width>this.renderer.width&&(c.width=this.renderer.width-c.x),c.y+c.height>this.renderer.height&&(c.height=this.renderer.height-c.y)},AccessibilityManager.prototype.addChild=function(c){var l=this.pool.pop();l||((l=document.createElement("button")).style.width="100px",l.style.height="100px",l.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",l.style.position="absolute",l.style.zIndex=2..toString(),l.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?l.setAttribute("aria-live","off"):l.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?l.setAttribute("aria-relevant","additions"):l.setAttribute("aria-relevant","text"),l.addEventListener("click",this._onClick.bind(this)),l.addEventListener("focus",this._onFocus.bind(this)),l.addEventListener("focusout",this._onFocusOut.bind(this))),l.style.pointerEvents=c.accessiblePointerEvents,l.type=c.accessibleType,c.accessibleTitle&&null!==c.accessibleTitle?l.title=c.accessibleTitle:c.accessibleHint&&null!==c.accessibleHint||(l.title="displayObject "+c.tabIndex),c.accessibleHint&&null!==c.accessibleHint&&l.setAttribute("aria-label",c.accessibleHint),this.debug&&this.updateDebugHTML(l),c._accessibleActive=!0,c._accessibleDiv=l,l.displayObject=c,this.children.push(c),this.div.appendChild(c._accessibleDiv),c._accessibleDiv.tabIndex=c.tabIndex},AccessibilityManager.prototype._onClick=function(c){var l=this.renderer.plugins.interaction;l.dispatchEvent(c.target.displayObject,"click",l.eventData),l.dispatchEvent(c.target.displayObject,"pointertap",l.eventData),l.dispatchEvent(c.target.displayObject,"tap",l.eventData)},AccessibilityManager.prototype._onFocus=function(c){c.target.getAttribute("aria-live")||c.target.setAttribute("aria-live","assertive");var l=this.renderer.plugins.interaction;l.dispatchEvent(c.target.displayObject,"mouseover",l.eventData)},AccessibilityManager.prototype._onFocusOut=function(c){c.target.getAttribute("aria-live")||c.target.setAttribute("aria-live","polite");var l=this.renderer.plugins.interaction;l.dispatchEvent(c.target.displayObject,"mouseout",l.eventData)},AccessibilityManager.prototype._onKeyDown=function(c){9===c.keyCode&&this.activate()},AccessibilityManager.prototype._onMouseMove=function(c){0===c.movementX&&0===c.movementY||this.deactivate()},AccessibilityManager.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},AccessibilityManager}(),R=d(5),D=function(){function InteractionData(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new E.g,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(InteractionData.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),InteractionData.prototype.getLocalPosition=function(c,l,d){return c.worldTransform.applyInverse(d||this.global,l)},InteractionData.prototype.copyEvent=function(c){"isPrimary"in c&&c.isPrimary&&(this.isPrimary=!0),this.button="button"in c&&c.button;var l="buttons"in c&&c.buttons;this.buttons=Number.isInteger(l)?l:"which"in c&&c.which,this.width="width"in c&&c.width,this.height="height"in c&&c.height,this.tiltX="tiltX"in c&&c.tiltX,this.tiltY="tiltY"in c&&c.tiltY,this.pointerType="pointerType"in c&&c.pointerType,this.pressure="pressure"in c&&c.pressure,this.rotationAngle="rotationAngle"in c&&c.rotationAngle,this.twist="twist"in c&&c.twist||0,this.tangentialPressure="tangentialPressure"in c&&c.tangentialPressure||0},InteractionData.prototype.reset=function(){this.isPrimary=!1},InteractionData}(),interaction_es_extendStatics=function(c,l){return(interaction_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};var L=function(){function InteractionEvent(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return InteractionEvent.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},InteractionEvent.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},InteractionEvent}(),B=function(){function InteractionTrackingData(c){this._pointerId=c,this._flags=InteractionTrackingData.FLAGS.NONE}return InteractionTrackingData.prototype._doSet=function(c,l){this._flags=l?this._flags|c:this._flags&~c},Object.defineProperty(InteractionTrackingData.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"flags",{get:function(){return this._flags},set:function(c){this._flags=c},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"none",{get:function(){return this._flags===InteractionTrackingData.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"over",{get:function(){return 0!=(this._flags&InteractionTrackingData.FLAGS.OVER)},set:function(c){this._doSet(InteractionTrackingData.FLAGS.OVER,c)},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"rightDown",{get:function(){return 0!=(this._flags&InteractionTrackingData.FLAGS.RIGHT_DOWN)},set:function(c){this._doSet(InteractionTrackingData.FLAGS.RIGHT_DOWN,c)},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"leftDown",{get:function(){return 0!=(this._flags&InteractionTrackingData.FLAGS.LEFT_DOWN)},set:function(c){this._doSet(InteractionTrackingData.FLAGS.LEFT_DOWN,c)},enumerable:!1,configurable:!0}),InteractionTrackingData.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),InteractionTrackingData}(),N=function(){function TreeSearch(){this._tempPoint=new E.g}return TreeSearch.prototype.recursiveFindHit=function(c,l,d,f,m){if(!l||!l.visible)return!1;var _=c.data.global,y=!1,g=m=l.interactive||m,v=!0;if(l.hitArea?(f&&(l.worldTransform.applyInverse(_,this._tempPoint),l.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?y=!0:(f=!1,v=!1)),g=!1):l._mask&&f&&(l._mask.containsPoint&&l._mask.containsPoint(_)||(f=!1)),v&&l.interactiveChildren&&l.children)for(var b=l.children,x=b.length-1;x>=0;x--){var T=b[x],S=this.recursiveFindHit(c,T,d,f,g);if(S){if(!T.parent)continue;g=!1,S&&(c.target&&(f=!1),y=!0)}}return m&&(f&&!c.target&&!l.hitArea&&l.containsPoint&&l.containsPoint(_)&&(y=!0),l.interactive&&(y&&!c.target&&(c.target=l),d&&d(c,l,!!y))),y},TreeSearch.prototype.findHit=function(c,l,d,f){this.recursiveFindHit(c,l,d,f,!1)},TreeSearch}(),k={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(c){c?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};w.mixin(k);var j={target:null,data:{global:null}},U=function(c){function InteractionManager(l,d){var f=c.call(this)||this;return d=d||{},f.renderer=l,f.autoPreventDefault=void 0===d.autoPreventDefault||d.autoPreventDefault,f.interactionFrequency=d.interactionFrequency||10,f.mouse=new D,f.mouse.identifier=1,f.mouse.global.set(-999999),f.activeInteractionData={},f.activeInteractionData[1]=f.mouse,f.interactionDataPool=[],f.eventData=new L,f.interactionDOMElement=null,f.moveWhenInside=!1,f.eventsAdded=!1,f.tickerAdded=!1,f.mouseOverRenderer=!1,f.supportsTouchEvents="ontouchstart"in window,f.supportsPointerEvents=!!window.PointerEvent,f.onPointerUp=f.onPointerUp.bind(f),f.processPointerUp=f.processPointerUp.bind(f),f.onPointerCancel=f.onPointerCancel.bind(f),f.processPointerCancel=f.processPointerCancel.bind(f),f.onPointerDown=f.onPointerDown.bind(f),f.processPointerDown=f.processPointerDown.bind(f),f.onPointerMove=f.onPointerMove.bind(f),f.processPointerMove=f.processPointerMove.bind(f),f.onPointerOut=f.onPointerOut.bind(f),f.processPointerOverOut=f.processPointerOverOut.bind(f),f.onPointerOver=f.onPointerOver.bind(f),f.cursorStyles={default:"inherit",pointer:"pointer"},f.currentCursorMode=null,f.cursor=null,f.resolution=1,f.delayedEvents=[],f.search=new N,f._tempDisplayObject=new O,f._useSystemTicker=void 0===d.useSystemTicker||d.useSystemTicker,f.setTargetElement(f.renderer.view,f.renderer.resolution),f}return function interaction_es_extends(c,l){function __(){this.constructor=c}interaction_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}(InteractionManager,c),Object.defineProperty(InteractionManager.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(c){this._useSystemTicker=c,c?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionManager.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),InteractionManager.prototype.hitTest=function(c,l){return j.target=null,j.data.global=c,l||(l=this.lastObjectRendered),this.processInteractive(j,l,null,!0),j.target},InteractionManager.prototype.setTargetElement=function(c,l){void 0===l&&(l=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=c,this.resolution=l,this.addEvents(),this.addTickerListener()},InteractionManager.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(R.a.system.add(this.tickerUpdate,this,R.c.INTERACTION),this.tickerAdded=!0)},InteractionManager.prototype.removeTickerListener=function(){this.tickerAdded&&(R.a.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},InteractionManager.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var c=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(c.msContentZooming="none",c.msTouchAction="none"):this.supportsPointerEvents&&(c.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},InteractionManager.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var c=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(c.msContentZooming="",c.msTouchAction=""):this.supportsPointerEvents&&(c.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},InteractionManager.prototype.tickerUpdate=function(c){this._deltaTime+=c,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},InteractionManager.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var c in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(c)){var l=this.activeInteractionData[c];if(l.originalEvent&&"touch"!==l.pointerType){var d=this.configureInteractionEventForDOMEvent(this.eventData,l.originalEvent,l);this.processInteractive(d,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},InteractionManager.prototype.setCursorMode=function(c){if(c=c||"default",this.currentCursorMode!==c){this.currentCursorMode=c;var l=this.cursorStyles[c];if(l)switch(typeof l){case"string":this.interactionDOMElement.style.cursor=l;break;case"function":l(c);break;case"object":Object.assign(this.interactionDOMElement.style,l)}else"string"!=typeof c||Object.prototype.hasOwnProperty.call(this.cursorStyles,c)||(this.interactionDOMElement.style.cursor=c)}},InteractionManager.prototype.dispatchEvent=function(c,l,d){d.stopPropagationHint&&c!==d.stopsPropagatingAt||(d.currentTarget=c,d.type=l,c.emit(l,d),c[l]&&c[l](d))},InteractionManager.prototype.delayDispatchEvent=function(c,l,d){this.delayedEvents.push({displayObject:c,eventString:l,eventData:d})},InteractionManager.prototype.mapPositionToPoint=function(c,l,d){var f;f=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var m=1/this.resolution;c.x=(l-f.left)*(this.interactionDOMElement.width/f.width)*m,c.y=(d-f.top)*(this.interactionDOMElement.height/f.height)*m},InteractionManager.prototype.processInteractive=function(c,l,d,f){var m=this.search.findHit(c,l,d,f),_=this.delayedEvents;if(!_.length)return m;c.stopPropagationHint=!1;var y=_.length;this.delayedEvents=[];for(var g=0;g<y;g++){var v=_[g],b=v.displayObject,x=v.eventString,T=v.eventData;T.stopsPropagatingAt===b&&(T.stopPropagationHint=!0),this.dispatchEvent(b,x,T)}return m},InteractionManager.prototype.onPointerDown=function(c){if(!this.supportsTouchEvents||"touch"!==c.pointerType){var l=this.normalizeToPointerData(c);if(this.autoPreventDefault&&l[0].isNormalized)(c.cancelable||!("cancelable"in c))&&c.preventDefault();for(var d=l.length,f=0;f<d;f++){var m=l[f],_=this.getInteractionDataForPointerId(m),y=this.configureInteractionEventForDOMEvent(this.eventData,m,_);if(y.data.originalEvent=c,this.processInteractive(y,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",y),"touch"===m.pointerType)this.emit("touchstart",y);else if("mouse"===m.pointerType||"pen"===m.pointerType){var g=2===m.button;this.emit(g?"rightdown":"mousedown",this.eventData)}}}},InteractionManager.prototype.processPointerDown=function(c,l,d){var f=c.data,m=c.data.identifier;if(d)if(l.trackedPointers[m]||(l.trackedPointers[m]=new B(m)),this.dispatchEvent(l,"pointerdown",c),"touch"===f.pointerType)this.dispatchEvent(l,"touchstart",c);else if("mouse"===f.pointerType||"pen"===f.pointerType){var _=2===f.button;_?l.trackedPointers[m].rightDown=!0:l.trackedPointers[m].leftDown=!0,this.dispatchEvent(l,_?"rightdown":"mousedown",c)}},InteractionManager.prototype.onPointerComplete=function(c,l,d){for(var f=this.normalizeToPointerData(c),m=f.length,_=c.target!==this.interactionDOMElement?"outside":"",y=0;y<m;y++){var g=f[y],v=this.getInteractionDataForPointerId(g),b=this.configureInteractionEventForDOMEvent(this.eventData,g,v);if(b.data.originalEvent=c,this.processInteractive(b,this.lastObjectRendered,d,l||!_),this.emit(l?"pointercancel":"pointerup"+_,b),"mouse"===g.pointerType||"pen"===g.pointerType){var x=2===g.button;this.emit(x?"rightup"+_:"mouseup"+_,b)}else"touch"===g.pointerType&&(this.emit(l?"touchcancel":"touchend"+_,b),this.releaseInteractionDataForPointerId(g.pointerId))}},InteractionManager.prototype.onPointerCancel=function(c){this.supportsTouchEvents&&"touch"===c.pointerType||this.onPointerComplete(c,!0,this.processPointerCancel)},InteractionManager.prototype.processPointerCancel=function(c,l){var d=c.data,f=c.data.identifier;void 0!==l.trackedPointers[f]&&(delete l.trackedPointers[f],this.dispatchEvent(l,"pointercancel",c),"touch"===d.pointerType&&this.dispatchEvent(l,"touchcancel",c))},InteractionManager.prototype.onPointerUp=function(c){this.supportsTouchEvents&&"touch"===c.pointerType||this.onPointerComplete(c,!1,this.processPointerUp)},InteractionManager.prototype.processPointerUp=function(c,l,d){var f=c.data,m=c.data.identifier,_=l.trackedPointers[m],y="touch"===f.pointerType,g="mouse"===f.pointerType||"pen"===f.pointerType,v=!1;if(g){var b=2===f.button,x=B.FLAGS,T=b?x.RIGHT_DOWN:x.LEFT_DOWN,S=void 0!==_&&_.flags&T;d?(this.dispatchEvent(l,b?"rightup":"mouseup",c),S&&(this.dispatchEvent(l,b?"rightclick":"click",c),v=!0)):S&&this.dispatchEvent(l,b?"rightupoutside":"mouseupoutside",c),_&&(b?_.rightDown=!1:_.leftDown=!1)}d?(this.dispatchEvent(l,"pointerup",c),y&&this.dispatchEvent(l,"touchend",c),_&&(g&&!v||this.dispatchEvent(l,"pointertap",c),y&&(this.dispatchEvent(l,"tap",c),_.over=!1))):_&&(this.dispatchEvent(l,"pointerupoutside",c),y&&this.dispatchEvent(l,"touchendoutside",c)),_&&_.none&&delete l.trackedPointers[m]},InteractionManager.prototype.onPointerMove=function(c){if(!this.supportsTouchEvents||"touch"!==c.pointerType){var l=this.normalizeToPointerData(c);"mouse"!==l[0].pointerType&&"pen"!==l[0].pointerType||(this._didMove=!0,this.cursor=null);for(var d=l.length,f=0;f<d;f++){var m=l[f],_=this.getInteractionDataForPointerId(m),y=this.configureInteractionEventForDOMEvent(this.eventData,m,_);y.data.originalEvent=c,this.processInteractive(y,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",y),"touch"===m.pointerType&&this.emit("touchmove",y),"mouse"!==m.pointerType&&"pen"!==m.pointerType||this.emit("mousemove",y)}"mouse"===l[0].pointerType&&this.setCursorMode(this.cursor)}},InteractionManager.prototype.processPointerMove=function(c,l,d){var f=c.data,m="touch"===f.pointerType,_="mouse"===f.pointerType||"pen"===f.pointerType;_&&this.processPointerOverOut(c,l,d),this.moveWhenInside&&!d||(this.dispatchEvent(l,"pointermove",c),m&&this.dispatchEvent(l,"touchmove",c),_&&this.dispatchEvent(l,"mousemove",c))},InteractionManager.prototype.onPointerOut=function(c){if(!this.supportsTouchEvents||"touch"!==c.pointerType){var l=this.normalizeToPointerData(c)[0];"mouse"===l.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var d=this.getInteractionDataForPointerId(l),f=this.configureInteractionEventForDOMEvent(this.eventData,l,d);f.data.originalEvent=l,this.processInteractive(f,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",f),"mouse"===l.pointerType||"pen"===l.pointerType?this.emit("mouseout",f):this.releaseInteractionDataForPointerId(d.identifier)}},InteractionManager.prototype.processPointerOverOut=function(c,l,d){var f=c.data,m=c.data.identifier,_="mouse"===f.pointerType||"pen"===f.pointerType,y=l.trackedPointers[m];d&&!y&&(y=l.trackedPointers[m]=new B(m)),void 0!==y&&(d&&this.mouseOverRenderer?(y.over||(y.over=!0,this.delayDispatchEvent(l,"pointerover",c),_&&this.delayDispatchEvent(l,"mouseover",c)),_&&null===this.cursor&&(this.cursor=l.cursor)):y.over&&(y.over=!1,this.dispatchEvent(l,"pointerout",this.eventData),_&&this.dispatchEvent(l,"mouseout",c),y.none&&delete l.trackedPointers[m]))},InteractionManager.prototype.onPointerOver=function(c){var l=this.normalizeToPointerData(c)[0],d=this.getInteractionDataForPointerId(l),f=this.configureInteractionEventForDOMEvent(this.eventData,l,d);f.data.originalEvent=l,"mouse"===l.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",f),"mouse"!==l.pointerType&&"pen"!==l.pointerType||this.emit("mouseover",f)},InteractionManager.prototype.getInteractionDataForPointerId=function(c){var l,d=c.pointerId;return 1===d||"mouse"===c.pointerType?l=this.mouse:this.activeInteractionData[d]?l=this.activeInteractionData[d]:((l=this.interactionDataPool.pop()||new D).identifier=d,this.activeInteractionData[d]=l),l.copyEvent(c),l},InteractionManager.prototype.releaseInteractionDataForPointerId=function(c){var l=this.activeInteractionData[c];l&&(delete this.activeInteractionData[c],l.reset(),this.interactionDataPool.push(l))},InteractionManager.prototype.configureInteractionEventForDOMEvent=function(c,l,d){return c.data=d,this.mapPositionToPoint(d.global,l.clientX,l.clientY),"touch"===l.pointerType&&(l.globalX=d.global.x,l.globalY=d.global.y),d.originalEvent=l,c.reset(),c},InteractionManager.prototype.normalizeToPointerData=function(c){var l=[];if(this.supportsTouchEvents&&c instanceof TouchEvent)for(var d=0,f=c.changedTouches.length;d<f;d++){var m=c.changedTouches[d];void 0===m.button&&(m.button=c.touches.length?1:0),void 0===m.buttons&&(m.buttons=c.touches.length?1:0),void 0===m.isPrimary&&(m.isPrimary=1===c.touches.length&&"touchstart"===c.type),void 0===m.width&&(m.width=m.radiusX||1),void 0===m.height&&(m.height=m.radiusY||1),void 0===m.tiltX&&(m.tiltX=0),void 0===m.tiltY&&(m.tiltY=0),void 0===m.pointerType&&(m.pointerType="touch"),void 0===m.pointerId&&(m.pointerId=m.identifier||0),void 0===m.pressure&&(m.pressure=m.force||.5),void 0===m.twist&&(m.twist=0),void 0===m.tangentialPressure&&(m.tangentialPressure=0),void 0===m.layerX&&(m.layerX=m.offsetX=m.clientX),void 0===m.layerY&&(m.layerY=m.offsetY=m.clientY),m.isNormalized=!0,l.push(m)}else if(!(c instanceof MouseEvent)||this.supportsPointerEvents&&c instanceof window.PointerEvent)l.push(c);else{var _=c;void 0===_.isPrimary&&(_.isPrimary=!0),void 0===_.width&&(_.width=1),void 0===_.height&&(_.height=1),void 0===_.tiltX&&(_.tiltX=0),void 0===_.tiltY&&(_.tiltY=0),void 0===_.pointerType&&(_.pointerType="mouse"),void 0===_.pointerId&&(_.pointerId=1),void 0===_.pressure&&(_.pressure=.5),void 0===_.twist&&(_.twist=0),void 0===_.tangentialPressure&&(_.tangentialPressure=0),_.isNormalized=!0,l.push(_)}return l},InteractionManager.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},InteractionManager}(T.EventEmitter),G=d(2),X=function(){function Application(c){var l=this;c=Object.assign({forceCanvas:!1},c),this.renderer=Object(G.L)(c),this.stage=new I,Application._plugins.forEach((function(d){d.init.call(l,c)}))}return Application.registerPlugin=function(c){Application._plugins.push(c)},Application.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(Application.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(Application.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),Application.prototype.destroy=function(c,l){var d=this,f=Application._plugins.slice(0);f.reverse(),f.forEach((function(c){c.destroy.call(d)})),this.stage.destroy(l),this.stage=null,this.renderer.destroy(c),this.renderer=null},Application}();X._plugins=[];var H=function(){function ResizePlugin(){}return ResizePlugin.init=function(c){var l=this;Object.defineProperty(this,"resizeTo",{set:function(c){window.removeEventListener("resize",this.queueResize),this._resizeTo=c,c&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){l._resizeTo&&(l.cancelResize(),l._resizeId=requestAnimationFrame((function(){return l.resize()})))},this.cancelResize=function(){l._resizeId&&(cancelAnimationFrame(l._resizeId),l._resizeId=null)},this.resize=function(){if(l._resizeTo){var c,d;if(l.cancelResize(),l._resizeTo===window)c=window.innerWidth,d=window.innerHeight;else{var f=l._resizeTo;c=f.clientWidth,d=f.clientHeight}l.renderer.resize(c,d)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=c.resizeTo||null},ResizePlugin.destroy=function(){this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},ResizePlugin}();X.registerPlugin(H);var z=new E.j,V=function(){function Extract(c){this.renderer=c,c.extract=this}return Extract.prototype.image=function(c,l,d){var f=new Image;return f.src=this.base64(c,l,d),f},Extract.prototype.base64=function(c,l,d){return this.canvas(c).toDataURL(l,d)},Extract.prototype.canvas=function(c){var l,d,f,m=this.renderer,_=!1,y=!1;c&&(c instanceof G.z?f=c:(f=this.renderer.generateTexture(c),y=!0)),f?(l=f.baseTexture.resolution,d=f.frame,_=!1,m.renderTexture.bind(f)):(l=this.renderer.resolution,_=!0,(d=z).width=this.renderer.width,d.height=this.renderer.height,m.renderTexture.bind(null));var g=Math.floor(d.width*l+1e-4),v=Math.floor(d.height*l+1e-4),b=new T.CanvasRenderTarget(g,v,1),x=new Uint8Array(4*g*v),S=m.gl;S.readPixels(d.x*l,d.y*l,g,v,S.RGBA,S.UNSIGNED_BYTE,x);var E=b.context.getImageData(0,0,g,v);if(Extract.arrayPostDivide(x,E.data),b.context.putImageData(E,0,0),_){var P=new T.CanvasRenderTarget(b.width,b.height,1);P.context.scale(1,-1),P.context.drawImage(b.canvas,0,-v),b.destroy(),b=P}return y&&f.destroy(!0),b.canvas},Extract.prototype.pixels=function(c){var l,d,f,m=this.renderer,_=!1;c&&(c instanceof G.z?f=c:(f=this.renderer.generateTexture(c),_=!0)),f?(l=f.baseTexture.resolution,d=f.frame,m.renderTexture.bind(f)):(l=m.resolution,(d=z).width=m.width,d.height=m.height,m.renderTexture.bind(null));var y=d.width*l,g=d.height*l,v=new Uint8Array(4*y*g),b=m.gl;return b.readPixels(d.x*l,d.y*l,y,g,b.RGBA,b.UNSIGNED_BYTE,v),_&&f.destroy(!0),Extract.arrayPostDivide(v,v),v},Extract.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},Extract.arrayPostDivide=function(c,l){for(var d=0;d<c.length;d+=4){var f=l[d+3]=c[d+3];0!==f?(l[d]=Math.round(Math.min(255*c[d]/f,255)),l[d+1]=Math.round(Math.min(255*c[d+1]/f,255)),l[d+2]=Math.round(Math.min(255*c[d+2]/f,255))):(l[d]=c[d],l[d+1]=c[d+1],l[d+2]=c[d+2])}},Extract}(),Y=d(6),W=d(1),particles_es_extendStatics=function(c,l){return(particles_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};function particles_es_extends(c,l){function __(){this.constructor=c}particles_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}var q,K,Z=function(c){function ParticleContainer(l,d,f,m){void 0===l&&(l=1500),void 0===f&&(f=16384),void 0===m&&(m=!1);var _=c.call(this)||this;return f>16384&&(f=16384),_._properties=[!1,!0,!1,!1,!1],_._maxSize=l,_._batchSize=f,_._buffers=null,_._bufferUpdateIDs=[],_._updateID=0,_.interactiveChildren=!1,_.blendMode=W.b.NORMAL,_.autoResize=m,_.roundPixels=!0,_.baseTexture=null,_.setProperties(d),_._tint=0,_.tintRgb=new Float32Array(4),_.tint=16777215,_}return particles_es_extends(ParticleContainer,c),ParticleContainer.prototype.setProperties=function(c){c&&(this._properties[0]="vertices"in c||"scale"in c?!!c.vertices||!!c.scale:this._properties[0],this._properties[1]="position"in c?!!c.position:this._properties[1],this._properties[2]="rotation"in c?!!c.rotation:this._properties[2],this._properties[3]="uvs"in c?!!c.uvs:this._properties[3],this._properties[4]="tint"in c||"alpha"in c?!!c.tint||!!c.alpha:this._properties[4])},ParticleContainer.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(ParticleContainer.prototype,"tint",{get:function(){return this._tint},set:function(c){this._tint=c,Object(T.hex2rgb)(c,this.tintRgb)},enumerable:!1,configurable:!0}),ParticleContainer.prototype.render=function(c){var l=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return l.onChildrenChange(0)}))),c.batch.setObjectRenderer(c.plugins.particle),c.plugins.particle.render(this))},ParticleContainer.prototype.onChildrenChange=function(c){for(var l=Math.floor(c/this._batchSize);this._bufferUpdateIDs.length<l;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[l]=++this._updateID},ParticleContainer.prototype.dispose=function(){if(this._buffers){for(var c=0;c<this._buffers.length;++c)this._buffers[c].destroy();this._buffers=null}},ParticleContainer.prototype.destroy=function(l){c.prototype.destroy.call(this,l),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},ParticleContainer}(I),Q=function(){function ParticleBuffer(c,l,d){this.geometry=new G.s,this.indexBuffer=null,this.size=d,this.dynamicProperties=[],this.staticProperties=[];for(var f=0;f<c.length;++f){var m=c[f];m={attributeName:m.attributeName,size:m.size,uploadFunction:m.uploadFunction,type:m.type||W.p.FLOAT,offset:m.offset},l[f]?this.dynamicProperties.push(m):this.staticProperties.push(m)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return ParticleBuffer.prototype.initBuffers=function(){var c=this.geometry,l=0;this.indexBuffer=new G.l(Object(T.createIndicesForQuads)(this.size),!0,!0),c.addIndex(this.indexBuffer),this.dynamicStride=0;for(var d=0;d<this.dynamicProperties.length;++d){(y=this.dynamicProperties[d]).offset=l,l+=y.size,this.dynamicStride+=y.size}var f=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(f),this.dynamicDataUint32=new Uint32Array(f),this.dynamicBuffer=new G.l(this.dynamicData,!1,!1);var m=0;this.staticStride=0;for(d=0;d<this.staticProperties.length;++d){(y=this.staticProperties[d]).offset=m,m+=y.size,this.staticStride+=y.size}var _=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(_),this.staticDataUint32=new Uint32Array(_),this.staticBuffer=new G.l(this.staticData,!0,!1);for(d=0;d<this.dynamicProperties.length;++d){var y=this.dynamicProperties[d];c.addAttribute(y.attributeName,this.dynamicBuffer,0,y.type===W.p.UNSIGNED_BYTE,y.type,4*this.dynamicStride,4*y.offset)}for(d=0;d<this.staticProperties.length;++d){y=this.staticProperties[d];c.addAttribute(y.attributeName,this.staticBuffer,0,y.type===W.p.UNSIGNED_BYTE,y.type,4*this.staticStride,4*y.offset)}},ParticleBuffer.prototype.uploadDynamic=function(c,l,d){for(var f=0;f<this.dynamicProperties.length;f++){var m=this.dynamicProperties[f];m.uploadFunction(c,l,d,m.type===W.p.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,m.offset)}this.dynamicBuffer._updateID++},ParticleBuffer.prototype.uploadStatic=function(c,l,d){for(var f=0;f<this.staticProperties.length;f++){var m=this.staticProperties[f];m.uploadFunction(c,l,d,m.type===W.p.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,m.offset)}this.staticBuffer._updateID++},ParticleBuffer.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},ParticleBuffer}(),J=function(c){function ParticleRenderer(l){var d=c.call(this,l)||this;return d.shader=null,d.properties=null,d.tempMatrix=new E.d,d.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:d.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:d.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:d.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:d.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:W.p.UNSIGNED_BYTE,uploadFunction:d.uploadTint,offset:0}],d.shader=G.C.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),d.state=G.E.for2d(),d}return particles_es_extends(ParticleRenderer,c),ParticleRenderer.prototype.render=function(c){var l=c.children,d=c._maxSize,f=c._batchSize,m=this.renderer,_=l.length;if(0!==_){_>d&&!c.autoResize&&(_=d);var y=c._buffers;y||(y=c._buffers=this.generateBuffers(c));var g=l[0]._texture.baseTexture;this.state.blendMode=Object(T.correctBlendMode)(c.blendMode,g.alphaMode),m.state.set(this.state);var v=m.gl,b=c.worldTransform.copyTo(this.tempMatrix);b.prepend(m.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=b.toArray(!0),this.shader.uniforms.uColor=Object(T.premultiplyRgba)(c.tintRgb,c.worldAlpha,this.shader.uniforms.uColor,g.alphaMode),this.shader.uniforms.uSampler=g,this.renderer.shader.bind(this.shader);for(var x=!1,S=0,E=0;S<_;S+=f,E+=1){var P=_-S;P>f&&(P=f),E>=y.length&&y.push(this._generateOneMoreBuffer(c));var w=y[E];w.uploadDynamic(l,S,P);var O=c._bufferUpdateIDs[E]||0;(x=x||w._updateID<O)&&(w._updateID=c._updateID,w.uploadStatic(l,S,P)),m.geometry.bind(w.geometry),v.drawElements(v.TRIANGLES,6*P,v.UNSIGNED_SHORT,0)}}},ParticleRenderer.prototype.generateBuffers=function(c){for(var l=[],d=c._maxSize,f=c._batchSize,m=c._properties,_=0;_<d;_+=f)l.push(new Q(this.properties,m,f));return l},ParticleRenderer.prototype._generateOneMoreBuffer=function(c){var l=c._batchSize,d=c._properties;return new Q(this.properties,d,l)},ParticleRenderer.prototype.uploadVertices=function(c,l,d,f,m,_){for(var y=0,g=0,v=0,b=0,x=0;x<d;++x){var T=c[l+x],S=T._texture,E=T.scale.x,P=T.scale.y,w=S.trim,O=S.orig;w?(y=(g=w.x-T.anchor.x*O.width)+w.width,v=(b=w.y-T.anchor.y*O.height)+w.height):(y=O.width*(1-T.anchor.x),g=O.width*-T.anchor.x,v=O.height*(1-T.anchor.y),b=O.height*-T.anchor.y),f[_]=g*E,f[_+1]=b*P,f[_+m]=y*E,f[_+m+1]=b*P,f[_+2*m]=y*E,f[_+2*m+1]=v*P,f[_+3*m]=g*E,f[_+3*m+1]=v*P,_+=4*m}},ParticleRenderer.prototype.uploadPosition=function(c,l,d,f,m,_){for(var y=0;y<d;y++){var g=c[l+y].position;f[_]=g.x,f[_+1]=g.y,f[_+m]=g.x,f[_+m+1]=g.y,f[_+2*m]=g.x,f[_+2*m+1]=g.y,f[_+3*m]=g.x,f[_+3*m+1]=g.y,_+=4*m}},ParticleRenderer.prototype.uploadRotation=function(c,l,d,f,m,_){for(var y=0;y<d;y++){var g=c[l+y].rotation;f[_]=g,f[_+m]=g,f[_+2*m]=g,f[_+3*m]=g,_+=4*m}},ParticleRenderer.prototype.uploadUvs=function(c,l,d,f,m,_){for(var y=0;y<d;++y){var g=c[l+y]._texture._uvs;g?(f[_]=g.x0,f[_+1]=g.y0,f[_+m]=g.x1,f[_+m+1]=g.y1,f[_+2*m]=g.x2,f[_+2*m+1]=g.y2,f[_+3*m]=g.x3,f[_+3*m+1]=g.y3,_+=4*m):(f[_]=0,f[_+1]=0,f[_+m]=0,f[_+m+1]=0,f[_+2*m]=0,f[_+2*m+1]=0,f[_+3*m]=0,f[_+3*m+1]=0,_+=4*m)}},ParticleRenderer.prototype.uploadTint=function(c,l,d,f,m,_){for(var y=0;y<d;++y){var g=c[l+y],v=g._texture.baseTexture.alphaMode>0,b=g.alpha,x=b<1&&v?Object(T.premultiplyTint)(g._tintRGB,b):g._tintRGB+(255*b<<24);f[_]=x,f[_+m]=x,f[_+2*m]=x,f[_+3*m]=x,_+=4*m}},ParticleRenderer.prototype.destroy=function(){c.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},ParticleRenderer}(G.v);!function(c){c.MITER="miter",c.BEVEL="bevel",c.ROUND="round"}(q||(q={})),function(c){c.BUTT="butt",c.ROUND="round",c.SQUARE="square"}(K||(K={}));var $={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(c,l){if(void 0===l&&(l=20),!this.adaptive||!c||isNaN(c))return l;var d=Math.ceil(c/this.maxLength);return d<this.minSegments?d=this.minSegments:d>this.maxSegments&&(d=this.maxSegments),d}},tt=function(){function FillStyle(){this.color=16777215,this.alpha=1,this.texture=G.G.WHITE,this.matrix=null,this.visible=!1,this.reset()}return FillStyle.prototype.clone=function(){var c=new FillStyle;return c.color=this.color,c.alpha=this.alpha,c.texture=this.texture,c.matrix=this.matrix,c.visible=this.visible,c},FillStyle.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=G.G.WHITE,this.matrix=null,this.visible=!1},FillStyle.prototype.destroy=function(){this.texture=null,this.matrix=null},FillStyle}(),graphics_es_extendStatics=function(c,l){return(graphics_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};function graphics_es_extends(c,l){function __(){this.constructor=c}graphics_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}var et={build:function(c){c.points=c.shape.points.slice()},triangulate:function(c,l){var d=c.points,f=c.holes,m=l.points,_=l.indices;if(d.length>=6){for(var y=[],g=0;g<f.length;g++){var v=f[g];y.push(d.length/2),d=d.concat(v.points)}var b=Object(T.earcut)(d,y,2);if(!b)return;var x=m.length/2;for(g=0;g<b.length;g+=3)_.push(b[g]+x),_.push(b[g+1]+x),_.push(b[g+2]+x);for(g=0;g<d.length;g++)m.push(d[g])}}},rt={build:function(c){var l,d,f=c.shape,m=c.points,_=f.x,y=f.y;if(m.length=0,c.type===E.l.CIRC)l=f.radius,d=f.radius;else{var g=c.shape;l=g.width,d=g.height}if(0!==l&&0!==d){var v=Math.floor(30*Math.sqrt(f.radius))||Math.floor(15*Math.sqrt(l+d));v/=2.3;for(var b=2*Math.PI/v,x=0;x<v-.5;x++)m.push(_+Math.sin(-b*x)*l,y+Math.cos(-b*x)*d);m.push(m[0],m[1])}},triangulate:function(c,l){var d=c.points,f=l.points,m=l.indices,_=f.length/2,y=_,g=c.shape,v=c.matrix,b=g.x,x=g.y;f.push(c.matrix?v.a*b+v.c*x+v.tx:b,c.matrix?v.b*b+v.d*x+v.ty:x);for(var T=0;T<d.length;T+=2)f.push(d[T],d[T+1]),m.push(_++,y,_)}},it={build:function(c){var l=c.shape,d=l.x,f=l.y,m=l.width,_=l.height,y=c.points;y.length=0,y.push(d,f,d+m,f,d+m,f+_,d,f+_)},triangulate:function(c,l){var d=c.points,f=l.points,m=f.length/2;f.push(d[0],d[1],d[2],d[3],d[6],d[7],d[4],d[5]),l.indices.push(m,m+1,m+2,m+1,m+2,m+3)}};function getPt(c,l,d){return c+(l-c)*d}function quadraticBezierCurve(c,l,d,f,m,_,y){void 0===y&&(y=[]);for(var g=y,v=0,b=0,x=0,T=0,S=0,E=0,P=0,w=0;P<=20;++P)v=getPt(c,d,w=P/20),b=getPt(l,f,w),x=getPt(d,m,w),T=getPt(f,_,w),S=getPt(v,x,w),E=getPt(b,T,w),g.push(S,E);return g}var nt={build:function(c){var l=c.shape,d=c.points,f=l.x,m=l.y,_=l.width,y=l.height,g=Math.max(0,Math.min(l.radius,Math.min(_,y)/2));d.length=0,g?(quadraticBezierCurve(f,m+g,f,m,f+g,m,d),quadraticBezierCurve(f+_-g,m,f+_,m,f+_,m+g,d),quadraticBezierCurve(f+_,m+y-g,f+_,m+y,f+_-g,m+y,d),quadraticBezierCurve(f+g,m+y,f,m+y,f,m+y-g,d)):d.push(f,m,f+_,m,f+_,m+y,f,m+y)},triangulate:function(c,l){for(var d=c.points,f=l.points,m=l.indices,_=f.length/2,y=Object(T.earcut)(d,null,2),g=0,v=y.length;g<v;g+=3)m.push(y[g]+_),m.push(y[g+1]+_),m.push(y[g+2]+_);for(g=0,v=d.length;g<v;g++)f.push(d[g],d[++g])}};function square(c,l,d,f,m,_,y,g){var v,b;y?(v=f,b=-d):(v=-f,b=d);var x=c-d*m+v,T=l-f*m+b,S=c+d*_+v,E=l+f*_+b;return g.push(x,T),g.push(S,E),2}function round(c,l,d,f,m,_,y,g){var v=d-c,b=f-l,x=Math.atan2(v,b),T=Math.atan2(m-c,_-l);g&&x<T?x+=2*Math.PI:!g&&x>T&&(T+=2*Math.PI);var S=x,E=T-x,P=Math.abs(E),w=Math.sqrt(v*v+b*b),O=1+(15*P*Math.sqrt(w)/Math.PI>>0),I=E/O;if(S+=I,g){y.push(c,l),y.push(d,f);for(var A=1,C=S;A<O;A++,C+=I)y.push(c,l),y.push(c+Math.sin(C)*w,l+Math.cos(C)*w);y.push(c,l),y.push(m,_)}else{y.push(d,f),y.push(c,l);for(A=1,C=S;A<O;A++,C+=I)y.push(c+Math.sin(C)*w,l+Math.cos(C)*w),y.push(c,l);y.push(m,_),y.push(c,l)}return 2*O}function buildLine(c,l){c.lineStyle.native?function buildNativeLine(c,l){var d=0,f=c.shape,m=c.points||f.points,_=f.type!==E.l.POLY||f.closeStroke;if(0!==m.length){var y=l.points,g=l.indices,v=m.length/2,b=y.length/2,x=b;for(y.push(m[0],m[1]),d=1;d<v;d++)y.push(m[2*d],m[2*d+1]),g.push(x,x+1),x++;_&&g.push(x,b)}}(c,l):function buildNonNativeLine(c,l){var d=c.shape,f=c.points||d.points.slice(),m=l.closePointEps;if(0!==f.length){var _=c.lineStyle,y=new E.g(f[0],f[1]),g=new E.g(f[f.length-2],f[f.length-1]),v=d.type!==E.l.POLY||d.closeStroke,b=Math.abs(y.x-g.x)<m&&Math.abs(y.y-g.y)<m;if(v){f=f.slice(),b&&(f.pop(),f.pop(),g.set(f[f.length-2],f[f.length-1]));var x=.5*(y.x+g.x),T=.5*(g.y+y.y);f.unshift(x,T),f.push(x,T)}var S=l.points,P=f.length/2,w=f.length,O=S.length/2,I=_.width/2,A=I*I,C=_.miterLimit*_.miterLimit,R=f[0],D=f[1],L=f[2],B=f[3],N=0,k=0,j=-(D-B),U=R-L,G=0,X=0,H=Math.sqrt(j*j+U*U);j/=H,U/=H,j*=I,U*=I;var z=_.alignment,V=2*(1-z),Y=2*z;v||(_.cap===K.ROUND?w+=round(R-j*(V-Y)*.5,D-U*(V-Y)*.5,R-j*V,D-U*V,R+j*Y,D+U*Y,S,!0)+2:_.cap===K.SQUARE&&(w+=square(R,D,j,U,V,Y,!0,S))),S.push(R-j*V,D-U*V),S.push(R+j*Y,D+U*Y);for(var W=1;W<P-1;++W){R=f[2*(W-1)],D=f[2*(W-1)+1],L=f[2*W],B=f[2*W+1],N=f[2*(W+1)],k=f[2*(W+1)+1],j=-(D-B),U=R-L,j/=H=Math.sqrt(j*j+U*U),U/=H,j*=I,U*=I,G=-(B-k),X=L-N,G/=H=Math.sqrt(G*G+X*X),X/=H,G*=I,X*=I;var Z=L-R,Q=D-B,J=L-N,tt=k-B,et=Q*J-tt*Z,rt=et<0;if(Math.abs(et)<.1)S.push(L-j*V,B-U*V),S.push(L+j*Y,B+U*Y);else{var it=(-j+R)*(-U+B)-(-j+L)*(-U+D),nt=(-G+N)*(-X+B)-(-G+L)*(-X+k),ot=(Z*nt-J*it)/et,st=(tt*it-Q*nt)/et,at=(ot-L)*(ot-L)+(st-B)*(st-B),ut=L+(ot-L)*V,ht=B+(st-B)*V,ct=L-(ot-L)*Y,lt=B-(st-B)*Y,dt=rt?V:Y;at<=Math.min(Z*Z+Q*Q,J*J+tt*tt)+dt*dt*A?_.join===q.BEVEL||at/A>C?(rt?(S.push(ut,ht),S.push(L+j*Y,B+U*Y),S.push(ut,ht),S.push(L+G*Y,B+X*Y)):(S.push(L-j*V,B-U*V),S.push(ct,lt),S.push(L-G*V,B-X*V),S.push(ct,lt)),w+=2):_.join===q.ROUND?rt?(S.push(ut,ht),S.push(L+j*Y,B+U*Y),w+=round(L,B,L+j*Y,B+U*Y,L+G*Y,B+X*Y,S,!0)+4,S.push(ut,ht),S.push(L+G*Y,B+X*Y)):(S.push(L-j*V,B-U*V),S.push(ct,lt),w+=round(L,B,L-j*V,B-U*V,L-G*V,B-X*V,S,!1)+4,S.push(L-G*V,B-X*V),S.push(ct,lt)):(S.push(ut,ht),S.push(ct,lt)):(S.push(L-j*V,B-U*V),S.push(L+j*Y,B+U*Y),_.join===q.BEVEL||at/A>C||(_.join===q.ROUND?w+=rt?round(L,B,L+j*Y,B+U*Y,L+G*Y,B+X*Y,S,!0)+2:round(L,B,L-j*V,B-U*V,L-G*V,B-X*V,S,!1)+2:(rt?(S.push(ct,lt),S.push(ct,lt)):(S.push(ut,ht),S.push(ut,ht)),w+=2)),S.push(L-G*V,B-X*V),S.push(L+G*Y,B+X*Y),w+=2)}}R=f[2*(P-2)],D=f[2*(P-2)+1],L=f[2*(P-1)],j=-(D-(B=f[2*(P-1)+1])),U=R-L,j/=H=Math.sqrt(j*j+U*U),U/=H,j*=I,U*=I,S.push(L-j*V,B-U*V),S.push(L+j*Y,B+U*Y),v||(_.cap===K.ROUND?w+=round(L-j*(V-Y)*.5,B-U*(V-Y)*.5,L-j*V,B-U*V,L+j*Y,B+U*Y,S,!1)+2:_.cap===K.SQUARE&&(w+=square(L,B,j,U,V,Y,!1,S)));var pt=l.indices,ft=$.epsilon*$.epsilon;for(W=O;W<w+O-2;++W)R=S[2*W],D=S[2*W+1],L=S[2*(W+1)],B=S[2*(W+1)+1],N=S[2*(W+2)],k=S[2*(W+2)+1],Math.abs(R*(B-k)+L*(k-D)+N*(D-B))<ft||pt.push(W,W+1,W+2)}}(c,l)}var ot,st=function(c){function Star(l,d,f,m,_,y){void 0===y&&(y=0);_=_||m/2;for(var g=-1*Math.PI/2+y,v=2*f,b=E.f/v,x=[],T=0;T<v;T++){var S=T%2?_:m,P=T*b+g;x.push(l+S*Math.cos(P),d+S*Math.sin(P))}return c.call(this,x)||this}return graphics_es_extends(Star,c),Star}(E.h),at=function(){function ArcUtils(){}return ArcUtils.curveTo=function(c,l,d,f,m,_){var y=_[_.length-2],g=_[_.length-1]-l,v=y-c,b=f-l,x=d-c,T=Math.abs(g*x-v*b);if(T<1e-8||0===m)return _[_.length-2]===c&&_[_.length-1]===l||_.push(c,l),null;var S=g*g+v*v,E=b*b+x*x,P=g*b+v*x,w=m*Math.sqrt(S)/T,O=m*Math.sqrt(E)/T,I=w*P/S,A=O*P/E,C=w*x+O*v,R=w*b+O*g,D=v*(O+I),L=g*(O+I),B=x*(w+A),N=b*(w+A);return{cx:C+c,cy:R+l,radius:m,startAngle:Math.atan2(L-R,D-C),endAngle:Math.atan2(N-R,B-C),anticlockwise:v*b>x*g}},ArcUtils.arc=function(c,l,d,f,m,_,y,g,v){for(var b=y-_,x=$._segmentsCount(Math.abs(b)*m,40*Math.ceil(Math.abs(b)/E.f)),T=b/(2*x),S=2*T,P=Math.cos(T),w=Math.sin(T),O=x-1,I=O%1/O,A=0;A<=O;++A){var C=T+_+S*(A+I*A),R=Math.cos(C),D=-Math.sin(C);v.push((P*R+w*D)*m+d,(P*-D+w*R)*m+f)}},ArcUtils}(),ut=function(){function BezierUtils(){}return BezierUtils.curveLength=function(c,l,d,f,m,_,y,g){for(var v=0,b=0,x=0,T=0,S=0,E=0,P=0,w=0,O=0,I=0,A=0,C=c,R=l,D=1;D<=10;++D)I=C-(w=(P=(E=(S=1-(b=D/10))*S)*S)*c+3*E*b*d+3*S*(x=b*b)*m+(T=x*b)*y),A=R-(O=P*l+3*E*b*f+3*S*x*_+T*g),C=w,R=O,v+=Math.sqrt(I*I+A*A);return v},BezierUtils.curveTo=function(c,l,d,f,m,_,y){var g=y[y.length-2],v=y[y.length-1];y.length-=2;var b=$._segmentsCount(BezierUtils.curveLength(g,v,c,l,d,f,m,_)),x=0,T=0,S=0,E=0,P=0;y.push(g,v);for(var w=1,O=0;w<=b;++w)S=(T=(x=1-(O=w/b))*x)*x,P=(E=O*O)*O,y.push(S*g+3*T*O*c+3*x*E*d+P*m,S*v+3*T*O*l+3*x*E*f+P*_)},BezierUtils}(),ht=function(){function QuadraticUtils(){}return QuadraticUtils.curveLength=function(c,l,d,f,m,_){var y=c-2*d+m,g=l-2*f+_,v=2*d-2*c,b=2*f-2*l,x=4*(y*y+g*g),T=4*(y*v+g*b),S=v*v+b*b,E=2*Math.sqrt(x+T+S),P=Math.sqrt(x),w=2*x*P,O=2*Math.sqrt(S),I=T/P;return(w*E+P*T*(E-O)+(4*S*x-T*T)*Math.log((2*P+I+E)/(I+O)))/(4*w)},QuadraticUtils.curveTo=function(c,l,d,f,m){for(var _=m[m.length-2],y=m[m.length-1],g=$._segmentsCount(QuadraticUtils.curveLength(_,y,c,l,d,f)),v=0,b=0,x=1;x<=g;++x){var T=x/g;v=_+(c-_)*T,b=y+(l-y)*T,m.push(v+(c+(d-c)*T-v)*T,b+(l+(f-l)*T-b)*T)}},QuadraticUtils}(),ct=function(){function BatchPart(){this.reset()}return BatchPart.prototype.begin=function(c,l,d){this.reset(),this.style=c,this.start=l,this.attribStart=d},BatchPart.prototype.end=function(c,l){this.attribSize=l-this.attribStart,this.size=c-this.start},BatchPart.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},BatchPart}(),lt=((ot={})[E.l.POLY]=et,ot[E.l.CIRC]=rt,ot[E.l.ELIP]=rt,ot[E.l.RECT]=it,ot[E.l.RREC]=nt,ot),dt=[],pt=[],ft={buildPoly:et,buildCircle:rt,buildRectangle:it,buildRoundedRectangle:nt,FILL_COMMANDS:lt,BATCH_POOL:dt,DRAW_CALL_POOL:pt,buildLine:buildLine,Star:st,ArcUtils:at,BezierUtils:ut,QuadraticUtils:ht,BatchPart:ct},mt=function(){function GraphicsData(c,l,d,f){void 0===l&&(l=null),void 0===d&&(d=null),void 0===f&&(f=null),this.shape=c,this.lineStyle=d,this.fillStyle=l,this.matrix=f,this.type=c.type,this.points=[],this.holes=[]}return GraphicsData.prototype.clone=function(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)},GraphicsData.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},GraphicsData}(),_t=new E.g,yt=new P,gt=function(c){function GraphicsGeometry(){var l=c.call(this)||this;return l.uvsFloat32=null,l.indicesUint16=null,l.points=[],l.colors=[],l.uvs=[],l.indices=[],l.textureIds=[],l.graphicsData=[],l.dirty=0,l.batchDirty=-1,l.cacheDirty=-1,l.clearDirty=0,l.drawCalls=[],l.batches=[],l.shapeIndex=0,l._bounds=new P,l.boundsDirty=-1,l.boundsPadding=0,l.batchable=!1,l.indicesUint16=null,l.uvsFloat32=null,l.closePointEps=1e-4,l}return graphics_es_extends(GraphicsGeometry,c),Object.defineProperty(GraphicsGeometry.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),GraphicsGeometry.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),pt.push(this.drawCalls[c]);this.drawCalls.length=0;for(c=0;c<this.batches.length;c++){var l=this.batches[c];l.reset(),dt.push(l)}this.batches.length=0},GraphicsGeometry.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},GraphicsGeometry.prototype.drawShape=function(c,l,d,f){void 0===l&&(l=null),void 0===d&&(d=null),void 0===f&&(f=null);var m=new mt(c,l,d,f);return this.graphicsData.push(m),this.dirty++,this},GraphicsGeometry.prototype.drawHole=function(c,l){if(void 0===l&&(l=null),!this.graphicsData.length)return null;var d=new mt(c,null,null,l),f=this.graphicsData[this.graphicsData.length-1];return d.lineStyle=f.lineStyle,f.holes.push(d),this.dirty++,this},GraphicsGeometry.prototype.destroy=function(){c.prototype.destroy.call(this);for(var l=0;l<this.graphicsData.length;++l)this.graphicsData[l].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},GraphicsGeometry.prototype.containsPoint=function(c){for(var l=this.graphicsData,d=0;d<l.length;++d){var f=l[d];if(f.fillStyle.visible&&(f.shape&&(f.matrix?f.matrix.applyInverse(c,_t):_t.copyFrom(c),f.shape.contains(_t.x,_t.y)))){var m=!1;if(f.holes)for(var _=0;_<f.holes.length;_++){if(f.holes[_].shape.contains(_t.x,_t.y)){m=!0;break}}if(!m)return!0}}return!1},GraphicsGeometry.prototype.updateBatches=function(c){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var l=this.uvs,d=this.graphicsData,f=null,m=null;this.batches.length>0&&(m=(f=this.batches[this.batches.length-1]).style);for(var _=this.shapeIndex;_<d.length;_++){this.shapeIndex++;var y=d[_],g=y.fillStyle,v=y.lineStyle;lt[y.type].build(y),y.matrix&&this.transformPoints(y.points,y.matrix);for(var b=0;b<2;b++){var x=0===b?g:v;if(x.visible){var T=x.texture.baseTexture,S=this.indices.length,E=this.points.length/2;T.wrapMode=W.q.REPEAT,0===b?this.processFill(y):this.processLine(y);var P=this.points.length/2-E;0!==P&&(f&&!this._compareStyles(m,x)&&(f.end(S,E),f=null),f||((f=dt.pop()||new ct).begin(x,S,E),this.batches.push(f),m=x),this.addUvs(this.points,l,x.texture,E,P,x.matrix))}}}var w=this.indices.length,O=this.points.length/2;if(f&&f.end(w,O),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var I=O>65535&&c;this.indicesUint16=I?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},GraphicsGeometry.prototype._compareStyles=function(c,l){return!(!c||!l)&&(c.texture.baseTexture===l.texture.baseTexture&&(c.color+c.alpha===l.color+l.alpha&&!!c.native==!!l.native))},GraphicsGeometry.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var c=0,l=this.graphicsData.length;c<l;c++){var d=this.graphicsData[c],f=d.fillStyle,m=d.lineStyle;if(f&&!f.texture.baseTexture.valid)return!1;if(m&&!m.texture.baseTexture.valid)return!1}return!0},GraphicsGeometry.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var c=this.batches,l=0,d=c.length;l<d;l++)for(var f=c[l],m=0;m<f.size;m++){var _=f.start+m;this.indicesUint16[_]=this.indicesUint16[_]-f.attribStart}},GraphicsGeometry.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var c=this.batches,l=0;l<c.length;l++)if(c[l].style.native)return!1;return this.points.length<2*GraphicsGeometry.BATCHABLE_SIZE},GraphicsGeometry.prototype.buildDrawCalls=function(){for(var c=++G.e._globalBatch,l=0;l<this.drawCalls.length;l++)this.drawCalls[l].texArray.clear(),pt.push(this.drawCalls[l]);this.drawCalls.length=0;var d=this.colors,f=this.textureIds,m=pt.pop();m||((m=new G.f).texArray=new G.k),m.texArray.count=0,m.start=0,m.size=0,m.type=W.e.TRIANGLES;var _=0,y=null,g=0,v=!1,b=W.e.TRIANGLES,x=0;this.drawCalls.push(m);for(l=0;l<this.batches.length;l++){var T=this.batches[l],S=T.style,E=S.texture.baseTexture;v!==!!S.native&&(b=(v=!!S.native)?W.e.LINES:W.e.TRIANGLES,y=null,_=8,c++),y!==E&&(y=E,E._batchEnabled!==c&&(8===_&&(c++,_=0,m.size>0&&((m=pt.pop())||((m=new G.f).texArray=new G.k),this.drawCalls.push(m)),m.start=x,m.size=0,m.texArray.count=0,m.type=b),E.touched=1,E._batchEnabled=c,E._batchLocation=_,E.wrapMode=10497,m.texArray.elements[m.texArray.count++]=E,_++)),m.size+=T.size,x+=T.size,g=E._batchLocation,this.addColors(d,S.color,S.alpha,T.attribSize),this.addTextureIds(f,g,T.attribSize)}G.e._globalBatch=c,this.packAttributes()},GraphicsGeometry.prototype.packAttributes=function(){for(var c=this.points,l=this.uvs,d=this.colors,f=this.textureIds,m=new ArrayBuffer(3*c.length*4),_=new Float32Array(m),y=new Uint32Array(m),g=0,v=0;v<c.length/2;v++)_[g++]=c[2*v],_[g++]=c[2*v+1],_[g++]=l[2*v],_[g++]=l[2*v+1],y[g++]=d[v],_[g++]=f[v];this._buffer.update(m),this._indexBuffer.update(this.indicesUint16)},GraphicsGeometry.prototype.processFill=function(c){c.holes.length?(this.processHoles(c.holes),et.triangulate(c,this)):lt[c.type].triangulate(c,this)},GraphicsGeometry.prototype.processLine=function(c){buildLine(c,this);for(var l=0;l<c.holes.length;l++)buildLine(c.holes[l],this)},GraphicsGeometry.prototype.processHoles=function(c){for(var l=0;l<c.length;l++){var d=c[l];lt[d.type].build(d),d.matrix&&this.transformPoints(d.points,d.matrix)}},GraphicsGeometry.prototype.calculateBounds=function(){var c=this._bounds,l=yt,d=E.d.IDENTITY;this._bounds.clear(),l.clear();for(var f=0;f<this.graphicsData.length;f++){var m=this.graphicsData[f],_=m.shape,y=m.type,g=m.lineStyle,v=m.matrix||E.d.IDENTITY,b=0;if(g&&g.visible){var x=g.alignment;b=g.width,y===E.l.POLY?b*=.5+Math.abs(.5-x):b*=Math.max(0,x)}if(d!==v&&(l.isEmpty()||(c.addBoundsMatrix(l,d),l.clear()),d=v),y===E.l.RECT||y===E.l.RREC){var T=_;l.addFramePad(T.x,T.y,T.x+T.width,T.y+T.height,b,b)}else if(y===E.l.CIRC){var S=_;l.addFramePad(S.x,S.y,S.x,S.y,S.radius+b,S.radius+b)}else if(y===E.l.ELIP){var P=_;l.addFramePad(P.x,P.y,P.x,P.y,P.width+b,P.height+b)}else{var w=_;c.addVerticesMatrix(d,w.points,0,w.points.length,b,b)}}l.isEmpty()||c.addBoundsMatrix(l,d),c.pad(this.boundsPadding,this.boundsPadding)},GraphicsGeometry.prototype.transformPoints=function(c,l){for(var d=0;d<c.length/2;d++){var f=c[2*d],m=c[2*d+1];c[2*d]=l.a*f+l.c*m+l.tx,c[2*d+1]=l.b*f+l.d*m+l.ty}},GraphicsGeometry.prototype.addColors=function(c,l,d,f){for(var m=(l>>16)+(65280&l)+((255&l)<<16),_=Object(T.premultiplyTint)(m,d);f-- >0;)c.push(_)},GraphicsGeometry.prototype.addTextureIds=function(c,l,d){for(;d-- >0;)c.push(l)},GraphicsGeometry.prototype.addUvs=function(c,l,d,f,m,_){void 0===_&&(_=null);for(var y=0,g=l.length,v=d.frame;y<m;){var b=c[2*(f+y)],x=c[2*(f+y)+1];if(_){var T=_.a*b+_.c*x+_.tx;x=_.b*b+_.d*x+_.ty,b=T}y++,l.push(b/v.width,x/v.height)}var S=d.baseTexture;(v.width<S.width||v.height<S.height)&&this.adjustUvs(l,d,g,m)},GraphicsGeometry.prototype.adjustUvs=function(c,l,d,f){for(var m=l.baseTexture,_=1e-6,y=d+2*f,g=l.frame,v=g.width/m.width,b=g.height/m.height,x=g.x/g.width,T=g.y/g.height,S=Math.floor(c[d]+_),E=Math.floor(c[d+1]+_),P=d+2;P<y;P+=2)S=Math.min(S,Math.floor(c[P]+_)),E=Math.min(E,Math.floor(c[P+1]+_));x-=S,T-=E;for(P=d;P<y;P+=2)c[P]=(c[P]+x)*v,c[P+1]=(c[P+1]+T)*b},GraphicsGeometry.BATCHABLE_SIZE=100,GraphicsGeometry}(G.g),vt=function(c){function LineStyle(){var l=null!==c&&c.apply(this,arguments)||this;return l.width=0,l.alignment=.5,l.native=!1,l.cap=K.BUTT,l.join=q.MITER,l.miterLimit=10,l}return graphics_es_extends(LineStyle,c),LineStyle.prototype.clone=function(){var c=new LineStyle;return c.color=this.color,c.alpha=this.alpha,c.texture=this.texture,c.matrix=this.matrix,c.visible=this.visible,c.width=this.width,c.alignment=this.alignment,c.native=this.native,c.cap=this.cap,c.join=this.join,c.miterLimit=this.miterLimit,c},LineStyle.prototype.reset=function(){c.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},LineStyle}(tt),bt=new Float32Array(3),xt={},Tt=function(c){function Graphics(l){void 0===l&&(l=null);var d=c.call(this)||this;return d._geometry=l||new gt,d._geometry.refCount++,d.shader=null,d.state=G.E.for2d(),d._fillStyle=new tt,d._lineStyle=new vt,d._matrix=null,d._holeMode=!1,d.currentPath=null,d.batches=[],d.batchTint=-1,d.batchDirty=-1,d.vertexData=null,d.pluginName="batch",d._transformID=-1,d.tint=16777215,d.blendMode=W.b.NORMAL,d}return graphics_es_extends(Graphics,c),Object.defineProperty(Graphics.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),Graphics.prototype.clone=function(){return this.finishPoly(),new Graphics(this._geometry)},Object.defineProperty(Graphics.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(c){this.state.blendMode=c},enumerable:!1,configurable:!0}),Object.defineProperty(Graphics.prototype,"tint",{get:function(){return this._tint},set:function(c){this._tint=c},enumerable:!1,configurable:!0}),Object.defineProperty(Graphics.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(Graphics.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),Graphics.prototype.lineStyle=function(c){if(void 0===c&&(c=null),"number"==typeof c){var l=arguments;c={width:l[0]||0,color:l[1]||0,alpha:void 0!==l[2]?l[2]:1,alignment:void 0!==l[3]?l[3]:.5,native:!!l[4]}}return this.lineTextureStyle(c)},Graphics.prototype.lineTextureStyle=function(c){if("number"==typeof c){Object(T.deprecation)("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var l=arguments,d=l[0],f=l[1],m=l[2],_=l[3],y=l[4],g=l[5],v=l[6];c={width:d,texture:f,color:m,alpha:_,matrix:y,alignment:g,native:v},Object.keys(c).forEach((function(l){return void 0===c[l]&&delete c[l]}))}c=Object.assign({width:0,texture:G.G.WHITE,color:c&&c.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:K.BUTT,join:q.MITER,miterLimit:10},c),this.currentPath&&this.startPoly();var b=c.width>0&&c.alpha>0;return b?(c.matrix&&(c.matrix=c.matrix.clone(),c.matrix.invert()),Object.assign(this._lineStyle,{visible:b},c)):this._lineStyle.reset(),this},Graphics.prototype.startPoly=function(){if(this.currentPath){var c=this.currentPath.points,l=this.currentPath.points.length;l>2&&(this.drawShape(this.currentPath),this.currentPath=new E.h,this.currentPath.closeStroke=!1,this.currentPath.points.push(c[l-2],c[l-1]))}else this.currentPath=new E.h,this.currentPath.closeStroke=!1},Graphics.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},Graphics.prototype.moveTo=function(c,l){return this.startPoly(),this.currentPath.points[0]=c,this.currentPath.points[1]=l,this},Graphics.prototype.lineTo=function(c,l){this.currentPath||this.moveTo(0,0);var d=this.currentPath.points,f=d[d.length-2],m=d[d.length-1];return f===c&&m===l||d.push(c,l),this},Graphics.prototype._initCurve=function(c,l){void 0===c&&(c=0),void 0===l&&(l=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[c,l]):this.moveTo(c,l)},Graphics.prototype.quadraticCurveTo=function(c,l,d,f){this._initCurve();var m=this.currentPath.points;return 0===m.length&&this.moveTo(0,0),ht.curveTo(c,l,d,f,m),this},Graphics.prototype.bezierCurveTo=function(c,l,d,f,m,_){return this._initCurve(),ut.curveTo(c,l,d,f,m,_,this.currentPath.points),this},Graphics.prototype.arcTo=function(c,l,d,f,m){this._initCurve(c,l);var _=this.currentPath.points,y=at.curveTo(c,l,d,f,m,_);if(y){var g=y.cx,v=y.cy,b=y.radius,x=y.startAngle,T=y.endAngle,S=y.anticlockwise;this.arc(g,v,b,x,T,S)}return this},Graphics.prototype.arc=function(c,l,d,f,m,_){if(void 0===_&&(_=!1),f===m)return this;if(!_&&m<=f?m+=E.f:_&&f<=m&&(f+=E.f),0===m-f)return this;var y=c+Math.cos(f)*d,g=l+Math.sin(f)*d,v=this._geometry.closePointEps,b=this.currentPath?this.currentPath.points:null;if(b){var x=Math.abs(b[b.length-2]-y),T=Math.abs(b[b.length-1]-g);x<v&&T<v||b.push(y,g)}else this.moveTo(y,g),b=this.currentPath.points;return at.arc(y,g,c,l,d,f,m,_,b),this},Graphics.prototype.beginFill=function(c,l){return void 0===c&&(c=0),void 0===l&&(l=1),this.beginTextureFill({texture:G.G.WHITE,color:c,alpha:l})},Graphics.prototype.beginTextureFill=function(c){if(c instanceof G.G){Object(T.deprecation)("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var l=arguments,d=l[0],f=l[1],m=l[2],_=l[3];c={texture:d,color:f,alpha:m,matrix:_},Object.keys(c).forEach((function(l){return void 0===c[l]&&delete c[l]}))}c=Object.assign({texture:G.G.WHITE,color:16777215,alpha:1,matrix:null},c),this.currentPath&&this.startPoly();var y=c.alpha>0;return y?(c.matrix&&(c.matrix=c.matrix.clone(),c.matrix.invert()),Object.assign(this._fillStyle,{visible:y},c)):this._fillStyle.reset(),this},Graphics.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},Graphics.prototype.drawRect=function(c,l,d,f){return this.drawShape(new E.j(c,l,d,f))},Graphics.prototype.drawRoundedRect=function(c,l,d,f,m){return this.drawShape(new E.k(c,l,d,f,m))},Graphics.prototype.drawCircle=function(c,l,d){return this.drawShape(new E.a(c,l,d))},Graphics.prototype.drawEllipse=function(c,l,d,f){return this.drawShape(new E.c(c,l,d,f))},Graphics.prototype.drawPolygon=function(){for(var c,l=arguments,d=[],f=0;f<arguments.length;f++)d[f]=l[f];var m=!0,_=d[0];_.points?(m=_.closeStroke,c=_.points):c=Array.isArray(d[0])?d[0]:d;var y=new E.h(c);return y.closeStroke=m,this.drawShape(y),this},Graphics.prototype.drawShape=function(c){return this._holeMode?this._geometry.drawHole(c,this._matrix):this._geometry.drawShape(c,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},Graphics.prototype.drawStar=function(c,l,d,f,m,_){return void 0===_&&(_=0),this.drawPolygon(new st(c,l,d,f,m,_))},Graphics.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},Graphics.prototype.isFastRect=function(){var c=this._geometry.graphicsData;return 1===c.length&&c[0].shape.type===E.l.RECT&&!(c[0].lineStyle.visible&&c[0].lineStyle.width)},Graphics.prototype._render=function(c){this.finishPoly();var l=this._geometry,d=c.context.supports.uint32Indices;l.updateBatches(d),l.batchable?(this.batchDirty!==l.batchDirty&&this._populateBatches(),this._renderBatched(c)):(c.batch.flush(),this._renderDirect(c))},Graphics.prototype._populateBatches=function(){var c=this._geometry,l=this.blendMode,d=c.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=c.batchDirty,this.batches.length=d,this.vertexData=new Float32Array(c.points);for(var f=0;f<d;f++){var m=c.batches[f],_=m.style.color,y=new Float32Array(this.vertexData.buffer,4*m.attribStart*2,2*m.attribSize),g=new Float32Array(c.uvsFloat32.buffer,4*m.attribStart*2,2*m.attribSize),v={vertexData:y,blendMode:l,indices:new Uint16Array(c.indicesUint16.buffer,2*m.start,m.size),uvs:g,_batchRGB:Object(T.hex2rgb)(_),_tintRGB:_,_texture:m.style.texture,alpha:m.style.alpha,worldAlpha:1};this.batches[f]=v}},Graphics.prototype._renderBatched=function(c){if(this.batches.length){c.batch.setObjectRenderer(c.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var l=0,d=this.batches.length;l<d;l++){var f=this.batches[l];f.worldAlpha=this.worldAlpha*f.alpha,c.plugins[this.pluginName].render(f)}}},Graphics.prototype._renderDirect=function(c){var l=this._resolveDirectShader(c),d=this._geometry,f=this.tint,m=this.worldAlpha,_=l.uniforms,y=d.drawCalls;_.translationMatrix=this.transform.worldTransform,_.tint[0]=(f>>16&255)/255*m,_.tint[1]=(f>>8&255)/255*m,_.tint[2]=(255&f)/255*m,_.tint[3]=m,c.shader.bind(l),c.geometry.bind(d,l),c.state.set(this.state);for(var g=0,v=y.length;g<v;g++)this._renderDrawCallDirect(c,d.drawCalls[g])},Graphics.prototype._renderDrawCallDirect=function(c,l){for(var d=l.texArray,f=l.type,m=l.size,_=l.start,y=d.count,g=0;g<y;g++)c.texture.bind(d.elements[g],g);c.geometry.draw(f,m,_)},Graphics.prototype._resolveDirectShader=function(c){var l=this.shader,d=this.pluginName;if(!l){if(!xt[d]){for(var f=c.plugins.batch.MAX_TEXTURES,m=new Int32Array(f),_=0;_<f;_++)m[_]=_;var y={tint:new Float32Array([1,1,1,1]),translationMatrix:new E.d,default:G.J.from({uSamplers:m},!0)},g=c.plugins[d]._shader.program;xt[d]=new G.C(g,y)}l=xt[d]}return l},Graphics.prototype._calculateBounds=function(){this.finishPoly();var c=this._geometry;if(c.graphicsData.length){var l=c.bounds,d=l.minX,f=l.minY,m=l.maxX,_=l.maxY;this._bounds.addFrame(this.transform,d,f,m,_)}},Graphics.prototype.containsPoint=function(c){return this.worldTransform.applyInverse(c,Graphics._TEMP_POINT),this._geometry.containsPoint(Graphics._TEMP_POINT)},Graphics.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var c=Object(T.hex2rgb)(this.tint,bt),l=0;l<this.batches.length;l++){var d=this.batches[l],f=d._batchRGB,m=(c[0]*f[0]*255<<16)+(c[1]*f[1]*255<<8)+(0|c[2]*f[2]*255);d._tintRGB=(m>>16)+(65280&m)+((255&m)<<16)}}},Graphics.prototype.calculateVertices=function(){var c=this.transform._worldID;if(this._transformID!==c){this._transformID=c;for(var l=this.transform.worldTransform,d=l.a,f=l.b,m=l.c,_=l.d,y=l.tx,g=l.ty,v=this._geometry.points,b=this.vertexData,x=0,T=0;T<v.length;T+=2){var S=v[T],E=v[T+1];b[x++]=d*S+m*E+y,b[x++]=_*E+f*S+g}}},Graphics.prototype.closePath=function(){var c=this.currentPath;return c&&(c.closeStroke=!0),this},Graphics.prototype.setMatrix=function(c){return this._matrix=c,this},Graphics.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},Graphics.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},Graphics.prototype.destroy=function(l){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,c.prototype.destroy.call(this,l)},Graphics._TEMP_POINT=new E.g,Graphics}(I),sprite_es_extendStatics=function(c,l){return(sprite_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};var St,Et=new E.g,Pt=new Uint16Array([0,1,2,0,2,3]),wt=function(c){function Sprite(l){var d=c.call(this)||this;return d._anchor=new E.e(d._onAnchorUpdate,d,l?l.defaultAnchor.x:0,l?l.defaultAnchor.y:0),d._texture=null,d._width=0,d._height=0,d._tint=null,d._tintRGB=null,d.tint=16777215,d.blendMode=W.b.NORMAL,d._cachedTint=16777215,d.uvs=null,d.texture=l||G.G.EMPTY,d.vertexData=new Float32Array(8),d.vertexTrimmedData=null,d._transformID=-1,d._textureID=-1,d._transformTrimmedID=-1,d._textureTrimmedID=-1,d.indices=Pt,d.pluginName="batch",d.isSprite=!0,d._roundPixels=S.b.ROUND_PIXELS,d}return function sprite_es_extends(c,l){function __(){this.constructor=c}sprite_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}(Sprite,c),Sprite.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Object(T.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Object(T.sign)(this.scale.y)*this._height/this._texture.orig.height)},Sprite.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},Sprite.prototype.calculateVertices=function(){var c=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==c._updateID){this._textureID!==c._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=c._updateID;var l=this.transform.worldTransform,d=l.a,f=l.b,m=l.c,_=l.d,y=l.tx,g=l.ty,v=this.vertexData,b=c.trim,x=c.orig,T=this._anchor,E=0,P=0,w=0,O=0;if(b?(E=(P=b.x-T._x*x.width)+b.width,w=(O=b.y-T._y*x.height)+b.height):(E=(P=-T._x*x.width)+x.width,w=(O=-T._y*x.height)+x.height),v[0]=d*P+m*O+y,v[1]=_*O+f*P+g,v[2]=d*E+m*O+y,v[3]=_*O+f*E+g,v[4]=d*E+m*w+y,v[5]=_*w+f*E+g,v[6]=d*P+m*w+y,v[7]=_*w+f*P+g,this._roundPixels)for(var I=S.b.RESOLUTION,A=0;A<v.length;++A)v[A]=Math.round((v[A]*I|0)/I)}},Sprite.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var c=this._texture,l=this.vertexTrimmedData,d=c.orig,f=this._anchor,m=this.transform.worldTransform,_=m.a,y=m.b,g=m.c,v=m.d,b=m.tx,x=m.ty,T=-f._x*d.width,S=T+d.width,E=-f._y*d.height,P=E+d.height;l[0]=_*T+g*E+b,l[1]=v*E+y*T+x,l[2]=_*S+g*E+b,l[3]=v*E+y*S+x,l[4]=_*S+g*P+b,l[5]=v*P+y*S+x,l[6]=_*T+g*P+b,l[7]=v*P+y*T+x},Sprite.prototype._render=function(c){this.calculateVertices(),c.batch.setObjectRenderer(c.plugins[this.pluginName]),c.plugins[this.pluginName].render(this)},Sprite.prototype._calculateBounds=function(){var c=this._texture.trim,l=this._texture.orig;!c||c.width===l.width&&c.height===l.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},Sprite.prototype.getLocalBounds=function(l){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),l||(this._localBoundsRect||(this._localBoundsRect=new E.j),l=this._localBoundsRect),this._bounds.getRectangle(l)):c.prototype.getLocalBounds.call(this,l)},Sprite.prototype.containsPoint=function(c){this.worldTransform.applyInverse(c,Et);var l=this._texture.orig.width,d=this._texture.orig.height,f=-l*this.anchor.x,m=0;return Et.x>=f&&Et.x<f+l&&(m=-d*this.anchor.y,Et.y>=m&&Et.y<m+d)},Sprite.prototype.destroy=function(l){if(c.prototype.destroy.call(this,l),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof l?l:l&&l.texture){var d="boolean"==typeof l?l:l&&l.baseTexture;this._texture.destroy(!!d)}this._texture=null},Sprite.from=function(c,l){return new Sprite(c instanceof G.G?c:G.G.from(c,l))},Object.defineProperty(Sprite.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(c){this._roundPixels!==c&&(this._transformID=-1),this._roundPixels=c},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(c){var l=Object(T.sign)(this.scale.x)||1;this.scale.x=l*c/this._texture.orig.width,this._width=c},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(c){var l=Object(T.sign)(this.scale.y)||1;this.scale.y=l*c/this._texture.orig.height,this._height=c},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"anchor",{get:function(){return this._anchor},set:function(c){this._anchor.copyFrom(c)},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"tint",{get:function(){return this._tint},set:function(c){this._tint=c,this._tintRGB=(c>>16)+(65280&c)+((255&c)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"texture",{get:function(){return this._texture},set:function(c){this._texture!==c&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=c||G.G.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,c&&(c.baseTexture.valid?this._onTextureUpdate():c.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),Sprite}(I),text_es_extendStatics=function(c,l){return(text_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};!function(c){c[c.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",c[c.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(St||(St={}));var Ot={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:St.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},It=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],At=function(){function TextStyle(c){this.styleID=0,this.reset(),deepCopyProperties(this,c,c)}return TextStyle.prototype.clone=function(){var c={};return deepCopyProperties(c,this,Ot),new TextStyle(c)},TextStyle.prototype.reset=function(){deepCopyProperties(this,Ot,Ot)},Object.defineProperty(TextStyle.prototype,"align",{get:function(){return this._align},set:function(c){this._align!==c&&(this._align=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"breakWords",{get:function(){return this._breakWords},set:function(c){this._breakWords!==c&&(this._breakWords=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(c){this._dropShadow!==c&&(this._dropShadow=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(c){this._dropShadowAlpha!==c&&(this._dropShadowAlpha=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(c){this._dropShadowAngle!==c&&(this._dropShadowAngle=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(c){this._dropShadowBlur!==c&&(this._dropShadowBlur=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(c){var l=getColor(c);this._dropShadowColor!==l&&(this._dropShadowColor=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(c){this._dropShadowDistance!==c&&(this._dropShadowDistance=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fill",{get:function(){return this._fill},set:function(c){var l=getColor(c);this._fill!==l&&(this._fill=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(c){this._fillGradientType!==c&&(this._fillGradientType=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(c){(function areArraysEqual(c,l){if(!Array.isArray(c)||!Array.isArray(l))return!1;if(c.length!==l.length)return!1;for(var d=0;d<c.length;++d)if(c[d]!==l[d])return!1;return!0})(this._fillGradientStops,c)||(this._fillGradientStops=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(c){this.fontFamily!==c&&(this._fontFamily=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontSize",{get:function(){return this._fontSize},set:function(c){this._fontSize!==c&&(this._fontSize=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(c){this._fontStyle!==c&&(this._fontStyle=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(c){this._fontVariant!==c&&(this._fontVariant=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(c){this._fontWeight!==c&&(this._fontWeight=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(c){this._letterSpacing!==c&&(this._letterSpacing=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(c){this._lineHeight!==c&&(this._lineHeight=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"leading",{get:function(){return this._leading},set:function(c){this._leading!==c&&(this._leading=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(c){this._lineJoin!==c&&(this._lineJoin=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(c){this._miterLimit!==c&&(this._miterLimit=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"padding",{get:function(){return this._padding},set:function(c){this._padding!==c&&(this._padding=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"stroke",{get:function(){return this._stroke},set:function(c){var l=getColor(c);this._stroke!==l&&(this._stroke=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(c){this._strokeThickness!==c&&(this._strokeThickness=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(c){this._textBaseline!==c&&(this._textBaseline=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"trim",{get:function(){return this._trim},set:function(c){this._trim!==c&&(this._trim=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(c){this._whiteSpace!==c&&(this._whiteSpace=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(c){this._wordWrap!==c&&(this._wordWrap=c,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(c){this._wordWrapWidth!==c&&(this._wordWrapWidth=c,this.styleID++)},enumerable:!1,configurable:!0}),TextStyle.prototype.toFontString=function(){var c="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,l=this.fontFamily;Array.isArray(this.fontFamily)||(l=this.fontFamily.split(","));for(var d=l.length-1;d>=0;d--){var f=l[d].trim();!/([\"\'])[^\'\"]+\1/.test(f)&&It.indexOf(f)<0&&(f='"'+f+'"'),l[d]=f}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+c+" "+l.join(",")},TextStyle}();function getSingleColor(c){return"number"==typeof c?Object(T.hex2string)(c):("string"==typeof c&&0===c.indexOf("0x")&&(c=c.replace("0x","#")),c)}function getColor(c){if(Array.isArray(c)){for(var l=0;l<c.length;++l)c[l]=getSingleColor(c[l]);return c}return getSingleColor(c)}function deepCopyProperties(c,l,d){for(var f in d)Array.isArray(l[f])?c[f]=l[f].slice():c[f]=l[f]}var Ct=function(){function TextMetrics(c,l,d,f,m,_,y,g,v){this.text=c,this.style=l,this.width=d,this.height=f,this.lines=m,this.lineWidths=_,this.lineHeight=y,this.maxLineWidth=g,this.fontProperties=v}return TextMetrics.measureText=function(c,l,d,f){void 0===f&&(f=TextMetrics._canvas),d=null==d?l.wordWrap:d;var m=l.toFontString(),_=TextMetrics.measureFont(m);0===_.fontSize&&(_.fontSize=l.fontSize,_.ascent=l.fontSize);var y=f.getContext("2d");y.font=m;for(var g=(d?TextMetrics.wordWrap(c,l,f):c).split(/(?:\r\n|\r|\n)/),v=new Array(g.length),b=0,x=0;x<g.length;x++){var T=y.measureText(g[x]).width+(g[x].length-1)*l.letterSpacing;v[x]=T,b=Math.max(b,T)}var S=b+l.strokeThickness;l.dropShadow&&(S+=l.dropShadowDistance);var E=l.lineHeight||_.fontSize+l.strokeThickness,P=Math.max(E,_.fontSize+l.strokeThickness)+(g.length-1)*(E+l.leading);return l.dropShadow&&(P+=l.dropShadowDistance),new TextMetrics(c,l,S,P,g,v,E+l.leading,b,_)},TextMetrics.wordWrap=function(c,l,d){void 0===d&&(d=TextMetrics._canvas);for(var f=d.getContext("2d"),m=0,_="",y="",g=Object.create(null),v=l.letterSpacing,b=l.whiteSpace,x=TextMetrics.collapseSpaces(b),T=TextMetrics.collapseNewlines(b),S=!x,E=l.wordWrapWidth+v,P=TextMetrics.tokenize(c),w=0;w<P.length;w++){var O=P[w];if(TextMetrics.isNewline(O)){if(!T){y+=TextMetrics.addLine(_),S=!x,_="",m=0;continue}O=" "}if(x){var I=TextMetrics.isBreakingSpace(O),A=TextMetrics.isBreakingSpace(_[_.length-1]);if(I&&A)continue}var C=TextMetrics.getFromCache(O,v,g,f);if(C>E)if(""!==_&&(y+=TextMetrics.addLine(_),_="",m=0),TextMetrics.canBreakWords(O,l.breakWords))for(var R=TextMetrics.wordWrapSplit(O),D=0;D<R.length;D++){for(var L=R[D],B=1;R[D+B];){var N=R[D+B],k=L[L.length-1];if(TextMetrics.canBreakChars(k,N,O,D,l.breakWords))break;L+=N,B++}D+=L.length-1;var j=TextMetrics.getFromCache(L,v,g,f);j+m>E&&(y+=TextMetrics.addLine(_),S=!1,_="",m=0),_+=L,m+=j}else{_.length>0&&(y+=TextMetrics.addLine(_),_="",m=0);var U=w===P.length-1;y+=TextMetrics.addLine(O,!U),S=!1,_="",m=0}else C+m>E&&(S=!1,y+=TextMetrics.addLine(_),_="",m=0),(_.length>0||!TextMetrics.isBreakingSpace(O)||S)&&(_+=O,m+=C)}return y+=TextMetrics.addLine(_,!1)},TextMetrics.addLine=function(c,l){return void 0===l&&(l=!0),c=TextMetrics.trimRight(c),c=l?c+"\n":c},TextMetrics.getFromCache=function(c,l,d,f){var m=d[c];if("number"!=typeof m){var _=c.length*l;m=f.measureText(c).width+_,d[c]=m}return m},TextMetrics.collapseSpaces=function(c){return"normal"===c||"pre-line"===c},TextMetrics.collapseNewlines=function(c){return"normal"===c},TextMetrics.trimRight=function(c){if("string"!=typeof c)return"";for(var l=c.length-1;l>=0;l--){var d=c[l];if(!TextMetrics.isBreakingSpace(d))break;c=c.slice(0,-1)}return c},TextMetrics.isNewline=function(c){return"string"==typeof c&&TextMetrics._newlines.indexOf(c.charCodeAt(0))>=0},TextMetrics.isBreakingSpace=function(c){return"string"==typeof c&&TextMetrics._breakingSpaces.indexOf(c.charCodeAt(0))>=0},TextMetrics.tokenize=function(c){var l=[],d="";if("string"!=typeof c)return l;for(var f=0;f<c.length;f++){var m=c[f];TextMetrics.isBreakingSpace(m)||TextMetrics.isNewline(m)?(""!==d&&(l.push(d),d=""),l.push(m)):d+=m}return""!==d&&l.push(d),l},TextMetrics.canBreakWords=function(c,l){return l},TextMetrics.canBreakChars=function(c,l,d,f,m){return!0},TextMetrics.wordWrapSplit=function(c){return c.split("")},TextMetrics.measureFont=function(c){if(TextMetrics._fonts[c])return TextMetrics._fonts[c];var l={ascent:0,descent:0,fontSize:0},d=TextMetrics._canvas,f=TextMetrics._context;f.font=c;var m=TextMetrics.METRICS_STRING+TextMetrics.BASELINE_SYMBOL,_=Math.ceil(f.measureText(m).width),y=Math.ceil(f.measureText(TextMetrics.BASELINE_SYMBOL).width),g=2*y;y=y*TextMetrics.BASELINE_MULTIPLIER|0,d.width=_,d.height=g,f.fillStyle="#f00",f.fillRect(0,0,_,g),f.font=c,f.textBaseline="alphabetic",f.fillStyle="#000",f.fillText(m,0,y);var v=f.getImageData(0,0,_,g).data,b=v.length,x=4*_,T=0,S=0,E=!1;for(T=0;T<y;++T){for(var P=0;P<x;P+=4)if(255!==v[S+P]){E=!0;break}if(E)break;S+=x}for(l.ascent=y-T,S=b-x,E=!1,T=g;T>y;--T){for(P=0;P<x;P+=4)if(255!==v[S+P]){E=!0;break}if(E)break;S-=x}return l.descent=T-y,l.fontSize=l.ascent+l.descent,TextMetrics._fonts[c]=l,l},TextMetrics.clearMetrics=function(c){void 0===c&&(c=""),c?delete TextMetrics._fonts[c]:TextMetrics._fonts={}},TextMetrics}(),Mt=function(){try{var c=new OffscreenCanvas(0,0),l=c.getContext("2d");return l&&l.measureText?c:document.createElement("canvas")}catch(c){return document.createElement("canvas")}}();Mt.width=Mt.height=10,Ct._canvas=Mt,Ct._context=Mt.getContext("2d"),Ct._fonts={},Ct.METRICS_STRING="|ÉqÅ",Ct.BASELINE_SYMBOL="M",Ct.BASELINE_MULTIPLIER=1.4,Ct._newlines=[10,13],Ct._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Rt={texture:!0,children:!1,baseTexture:!0},Dt=function(c){function Text(l,d,f){var m=this,_=!1;f||(f=document.createElement("canvas"),_=!0),f.width=3,f.height=3;var y=G.G.from(f);return y.orig=new E.j,y.trim=new E.j,(m=c.call(this,y)||this)._ownCanvas=_,m.canvas=f,m.context=m.canvas.getContext("2d"),m._resolution=S.b.RESOLUTION,m._autoResolution=!0,m._text=null,m._style=null,m._styleListener=null,m._font="",m.text=l,m.style=d,m.localStyleID=-1,m}return function text_es_extends(c,l){function __(){this.constructor=c}text_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}(Text,c),Text.prototype.updateText=function(c){var l=this._style;if(this.localStyleID!==l.styleID&&(this.dirty=!0,this.localStyleID=l.styleID),this.dirty||!c){this._font=this._style.toFontString();var d,f,m=this.context,_=Ct.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),y=_.width,g=_.height,v=_.lines,b=_.lineHeight,x=_.lineWidths,S=_.maxLineWidth,E=_.fontProperties;this.canvas.width=Math.ceil((Math.max(1,y)+2*l.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,g)+2*l.padding)*this._resolution),m.scale(this._resolution,this._resolution),m.clearRect(0,0,this.canvas.width,this.canvas.height),m.font=this._font,m.lineWidth=l.strokeThickness,m.textBaseline=l.textBaseline,m.lineJoin=l.lineJoin,m.miterLimit=l.miterLimit;for(var P=l.dropShadow?2:1,w=0;w<P;++w){var O=l.dropShadow&&0===w,I=O?Math.ceil(Math.max(1,g)+2*l.padding):0,A=I*this._resolution;if(O){m.fillStyle="black",m.strokeStyle="black";var C=l.dropShadowColor,R=Object(T.hex2rgb)("number"==typeof C?C:Object(T.string2hex)(C));m.shadowColor="rgba("+255*R[0]+","+255*R[1]+","+255*R[2]+","+l.dropShadowAlpha+")",m.shadowBlur=l.dropShadowBlur,m.shadowOffsetX=Math.cos(l.dropShadowAngle)*l.dropShadowDistance,m.shadowOffsetY=Math.sin(l.dropShadowAngle)*l.dropShadowDistance+A}else m.fillStyle=this._generateFillStyle(l,v,_),m.strokeStyle=l.stroke,m.shadowColor="black",m.shadowBlur=0,m.shadowOffsetX=0,m.shadowOffsetY=0;for(var D=0;D<v.length;D++)d=l.strokeThickness/2,f=l.strokeThickness/2+D*b+E.ascent,"right"===l.align?d+=S-x[D]:"center"===l.align&&(d+=(S-x[D])/2),l.stroke&&l.strokeThickness&&this.drawLetterSpacing(v[D],d+l.padding,f+l.padding-I,!0),l.fill&&this.drawLetterSpacing(v[D],d+l.padding,f+l.padding-I)}this.updateTexture()}},Text.prototype.drawLetterSpacing=function(c,l,d,f){void 0===f&&(f=!1);var m=this._style.letterSpacing;if(0!==m)for(var _=l,y=Array.from?Array.from(c):c.split(""),g=this.context.measureText(c).width,v=0,b=0;b<y.length;++b){var x=y[b];f?this.context.strokeText(x,_,d):this.context.fillText(x,_,d),_+=g-(v=this.context.measureText(c.substring(b+1)).width)+m,g=v}else f?this.context.strokeText(c,l,d):this.context.fillText(c,l,d)},Text.prototype.updateTexture=function(){var c=this.canvas;if(this._style.trim){var l=Object(T.trimCanvas)(c);l.data&&(c.width=l.width,c.height=l.height,this.context.putImageData(l.data,0,0))}var d=this._texture,f=this._style,m=f.trim?0:f.padding,_=d.baseTexture;d.trim.width=d._frame.width=Math.ceil(c.width/this._resolution),d.trim.height=d._frame.height=Math.ceil(c.height/this._resolution),d.trim.x=-m,d.trim.y=-m,d.orig.width=d._frame.width-2*m,d.orig.height=d._frame.height-2*m,this._onTextureUpdate(),_.setRealSize(c.width,c.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},Text.prototype._render=function(l){this._autoResolution&&this._resolution!==l.resolution&&(this._resolution=l.resolution,this.dirty=!0),this.updateText(!0),c.prototype._render.call(this,l)},Text.prototype.getLocalBounds=function(l){return this.updateText(!0),c.prototype.getLocalBounds.call(this,l)},Text.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},Text.prototype._generateFillStyle=function(c,l,d){var f,m=c.fill;if(!Array.isArray(m))return m;if(1===m.length)return m[0];var _=c.dropShadow?c.dropShadowDistance:0,y=c.padding||0,g=Math.ceil(this.canvas.width/this._resolution)-_-2*y,v=Math.ceil(this.canvas.height/this._resolution)-_-2*y,b=m.slice(),x=c.fillGradientStops.slice();if(!x.length)for(var T=b.length+1,S=1;S<T;++S)x.push(S/T);if(b.unshift(m[0]),x.unshift(0),b.push(m[m.length-1]),x.push(1),c.fillGradientType===St.LINEAR_VERTICAL){f=this.context.createLinearGradient(g/2,y,g/2,v+y);var E=0,P=(d.fontProperties.fontSize+c.strokeThickness)/v;for(S=0;S<l.length;S++)for(var w=d.lineHeight*S,O=0;O<b.length;O++){var I=w/v+("number"==typeof x[O]?x[O]:O/b.length)*P,A=Math.max(E,I);A=Math.min(A,1),f.addColorStop(A,b[O]),E=A}}else{f=this.context.createLinearGradient(y,v/2,g+y,v/2);var C=b.length+1,R=1;for(S=0;S<b.length;S++){var D=void 0;D="number"==typeof x[S]?x[S]:R/C,f.addColorStop(D,b[S]),R++}}return f},Text.prototype.destroy=function(l){"boolean"==typeof l&&(l={children:l}),l=Object.assign({},Rt,l),c.prototype.destroy.call(this,l),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(Text.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(c){this.updateText(!0);var l=Object(T.sign)(this.scale.x)||1;this.scale.x=l*c/this._texture.orig.width,this._width=c},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(c){this.updateText(!0);var l=Object(T.sign)(this.scale.y)||1;this.scale.y=l*c/this._texture.orig.height,this._height=c},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"style",{get:function(){return this._style},set:function(c){c=c||{},this._style=c instanceof At?c:new At(c),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"text",{get:function(){return this._text},set:function(c){c=String(null==c?"":c),this._text!==c&&(this._text=c,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"resolution",{get:function(){return this._resolution},set:function(c){this._autoResolution=!1,this._resolution!==c&&(this._resolution=c,this.dirty=!0)},enumerable:!1,configurable:!0}),Text}(wt);S.b.UPLOADS_PER_FRAME=4;var prepare_es_extendStatics=function(c,l){return(prepare_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};var Ft=function(){function CountLimiter(c){this.maxItemsPerFrame=c,this.itemsLeft=0}return CountLimiter.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},CountLimiter.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},CountLimiter}();function findMultipleBaseTextures(c,l){var d=!1;if(c&&c._textures&&c._textures.length)for(var f=0;f<c._textures.length;f++)if(c._textures[f]instanceof G.G){var m=c._textures[f].baseTexture;-1===l.indexOf(m)&&(l.push(m),d=!0)}return d}function findBaseTexture(c,l){if(c.baseTexture instanceof G.e){var d=c.baseTexture;return-1===l.indexOf(d)&&l.push(d),!0}return!1}function findTexture(c,l){if(c._texture&&c._texture instanceof G.G){var d=c._texture.baseTexture;return-1===l.indexOf(d)&&l.push(d),!0}return!1}function drawText(c,l){return l instanceof Dt&&(l.updateText(!0),!0)}function calculateTextStyle(c,l){if(l instanceof At){var d=l.toFontString();return Ct.measureFont(d),!0}return!1}function findText(c,l){if(c instanceof Dt){-1===l.indexOf(c.style)&&l.push(c.style),-1===l.indexOf(c)&&l.push(c);var d=c._texture.baseTexture;return-1===l.indexOf(d)&&l.push(d),!0}return!1}function findTextStyle(c,l){return c instanceof At&&(-1===l.indexOf(c)&&l.push(c),!0)}var Lt=function(){function BasePrepare(c){var l=this;this.limiter=new Ft(S.b.UPLOADS_PER_FRAME),this.renderer=c,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){l.queue&&l.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}return BasePrepare.prototype.upload=function(c,l){"function"==typeof c&&(l=c,c=null),c&&this.add(c),this.queue.length?(l&&this.completes.push(l),this.ticking||(this.ticking=!0,R.a.system.addOnce(this.tick,this,R.c.UTILITY))):l&&l()},BasePrepare.prototype.tick=function(){setTimeout(this.delayedTick,0)},BasePrepare.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var c=this.queue[0],l=!1;if(c&&!c._destroyed)for(var d=0,f=this.uploadHooks.length;d<f;d++)if(this.uploadHooks[d](this.uploadHookHelper,c)){this.queue.shift(),l=!0;break}l||this.queue.shift()}if(this.queue.length)R.a.system.addOnce(this.tick,this,R.c.UTILITY);else{this.ticking=!1;var m=this.completes.slice(0);this.completes.length=0;for(d=0,f=m.length;d<f;d++)m[d]()}},BasePrepare.prototype.registerFindHook=function(c){return c&&this.addHooks.push(c),this},BasePrepare.prototype.registerUploadHook=function(c){return c&&this.uploadHooks.push(c),this},BasePrepare.prototype.add=function(c){for(var l=0,d=this.addHooks.length;l<d&&!this.addHooks[l](c,this.queue);l++);if(c instanceof I)for(l=c.children.length-1;l>=0;l--)this.add(c.children[l]);return this},BasePrepare.prototype.destroy=function(){this.ticking&&R.a.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},BasePrepare}();function uploadBaseTextures(c,l){return l instanceof G.e&&(l._glTextures[c.CONTEXT_UID]||c.texture.bind(l),!0)}function uploadGraphics(c,l){if(!(l instanceof Tt))return!1;var d=l.geometry;l.finishPoly(),d.updateBatches();for(var f=d.batches,m=0;m<f.length;m++){var _=f[m].style.texture;_&&uploadBaseTextures(c,_.baseTexture)}return d.batchable||c.geometry.bind(d,l._resolveDirectShader(c)),!0}function findGraphics(c,l){return c instanceof Tt&&(l.push(c),!0)}var Bt=function(c){function Prepare(l){var d=c.call(this,l)||this;return d.uploadHookHelper=d.renderer,d.registerFindHook(findGraphics),d.registerUploadHook(uploadBaseTextures),d.registerUploadHook(uploadGraphics),d}return function prepare_es_extends(c,l){function __(){this.constructor=c}prepare_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}(Prepare,c),Prepare}(Lt),Nt=function(){function TimeLimiter(c){this.maxMilliseconds=c,this.frameStart=0}return TimeLimiter.prototype.beginFrame=function(){this.frameStart=Date.now()},TimeLimiter.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},TimeLimiter}(),kt=function(){function Spritesheet(c,l,d){void 0===d&&(d=null),this._texture=c instanceof G.G?c:null,this.baseTexture=c instanceof G.e?c:this._texture.baseTexture,this.textures={},this.animations={},this.data=l;var f=this.baseTexture.resource;this.resolution=this._updateResolution(d||(f?f.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return Spritesheet.prototype._updateResolution=function(c){void 0===c&&(c=null);var l=this.data.meta.scale,d=Object(T.getResolutionOfUrl)(c,null);return null===d&&(d=void 0!==l?parseFloat(l):1),1!==d&&this.baseTexture.setResolution(d),d},Spritesheet.prototype.parse=function(c){this._batchIndex=0,this._callback=c,this._frameKeys.length<=Spritesheet.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},Spritesheet.prototype._processFrames=function(c){for(var l=c,d=Spritesheet.BATCH_SIZE;l-c<d&&l<this._frameKeys.length;){var f=this._frameKeys[l],m=this._frames[f],_=m.frame;if(_){var y=null,g=null,v=!1!==m.trimmed&&m.sourceSize?m.sourceSize:m.frame,b=new E.j(0,0,Math.floor(v.w)/this.resolution,Math.floor(v.h)/this.resolution);y=m.rotated?new E.j(Math.floor(_.x)/this.resolution,Math.floor(_.y)/this.resolution,Math.floor(_.h)/this.resolution,Math.floor(_.w)/this.resolution):new E.j(Math.floor(_.x)/this.resolution,Math.floor(_.y)/this.resolution,Math.floor(_.w)/this.resolution,Math.floor(_.h)/this.resolution),!1!==m.trimmed&&m.spriteSourceSize&&(g=new E.j(Math.floor(m.spriteSourceSize.x)/this.resolution,Math.floor(m.spriteSourceSize.y)/this.resolution,Math.floor(_.w)/this.resolution,Math.floor(_.h)/this.resolution)),this.textures[f]=new G.G(this.baseTexture,y,b,g,m.rotated?2:0,m.anchor),G.G.addToCache(this.textures[f],f)}l++}},Spritesheet.prototype._processAnimations=function(){var c=this.data.animations||{};for(var l in c){this.animations[l]=[];for(var d=0;d<c[l].length;d++){var f=c[l][d];this.animations[l].push(this.textures[f])}}},Spritesheet.prototype._parseComplete=function(){var c=this._callback;this._callback=null,this._batchIndex=0,c.call(this,this.textures)},Spritesheet.prototype._nextBatch=function(){var c=this;this._processFrames(this._batchIndex*Spritesheet.BATCH_SIZE),this._batchIndex++,setTimeout((function(){c._batchIndex*Spritesheet.BATCH_SIZE<c._frameKeys.length?c._nextBatch():(c._processAnimations(),c._parseComplete())}),0)},Spritesheet.prototype.destroy=function(c){var l;for(var d in void 0===c&&(c=!1),this.textures)this.textures[d].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,c&&(null===(l=this._texture)||void 0===l||l.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},Spritesheet.BATCH_SIZE=1e3,Spritesheet}(),jt=function(){function SpritesheetLoader(){}return SpritesheetLoader.use=function(c,l){var d=this,f=c.name+"_image";if(c.data&&c.type===Y.c.TYPE.JSON&&c.data.frames&&!d.resources[f]){var m={crossOrigin:c.crossOrigin,metadata:c.metadata.imageMetadata,parentResource:c},_=SpritesheetLoader.getResourcePath(c,d.baseUrl);d.add(f,_,m,(function onImageLoad(d){if(d.error)l(d.error);else{var f=new kt(d.texture,c.data,c.url);f.parse((function(){c.spritesheet=f,c.textures=f.textures,l()}))}}))}else l()},SpritesheetLoader.getResourcePath=function(c,l){return c.isDataUrl?c.data.meta.image:T.url.resolve(c.url.replace(l,""),c.data.meta.image)},SpritesheetLoader}(),sprite_tiling_es_extendStatics=function(c,l){return(sprite_tiling_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};function sprite_tiling_es_extends(c,l){function __(){this.constructor=c}sprite_tiling_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}var Ut=new E.g,Gt=function(c){function TilingSprite(l,d,f){void 0===d&&(d=100),void 0===f&&(f=100);var m=c.call(this,l)||this;return m.tileTransform=new E.m,m._width=d,m._height=f,m.uvMatrix=m.texture.uvMatrix||new G.H(l),m.pluginName="tilingSprite",m.uvRespectAnchor=!1,m}return sprite_tiling_es_extends(TilingSprite,c),Object.defineProperty(TilingSprite.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(c){this.uvMatrix.clampMargin=c,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(TilingSprite.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(c){this.tileTransform.scale.copyFrom(c)},enumerable:!1,configurable:!0}),Object.defineProperty(TilingSprite.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(c){this.tileTransform.position.copyFrom(c)},enumerable:!1,configurable:!0}),TilingSprite.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},TilingSprite.prototype._render=function(c){var l=this._texture;l&&l.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),c.batch.setObjectRenderer(c.plugins[this.pluginName]),c.plugins[this.pluginName].render(this))},TilingSprite.prototype._calculateBounds=function(){var c=this._width*-this._anchor._x,l=this._height*-this._anchor._y,d=this._width*(1-this._anchor._x),f=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,c,l,d,f)},TilingSprite.prototype.getLocalBounds=function(l){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),l||(this._localBoundsRect||(this._localBoundsRect=new E.j),l=this._localBoundsRect),this._bounds.getRectangle(l)):c.prototype.getLocalBounds.call(this,l)},TilingSprite.prototype.containsPoint=function(c){this.worldTransform.applyInverse(c,Ut);var l=this._width,d=this._height,f=-l*this.anchor._x;if(Ut.x>=f&&Ut.x<f+l){var m=-d*this.anchor._y;if(Ut.y>=m&&Ut.y<m+d)return!0}return!1},TilingSprite.prototype.destroy=function(l){c.prototype.destroy.call(this,l),this.tileTransform=null,this.uvMatrix=null},TilingSprite.from=function(c,l){return"number"==typeof l&&(Object(T.deprecation)("5.3.0","TilingSprite.from use options instead of width and height args"),l={width:l,height:arguments[2]}),new TilingSprite(G.G.from(c,l),l.width,l.height)},Object.defineProperty(TilingSprite.prototype,"width",{get:function(){return this._width},set:function(c){this._width=c},enumerable:!1,configurable:!0}),Object.defineProperty(TilingSprite.prototype,"height",{get:function(){return this._height},set:function(c){this._height=c},enumerable:!1,configurable:!0}),TilingSprite}(wt),Xt="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Ht=new E.d,zt=function(c){function TilingSpriteRenderer(l){var d=c.call(this,l)||this,f={globals:d.renderer.globalUniforms};return d.shader=G.C.from(Xt,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",f),d.simpleShader=G.C.from(Xt,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",f),d.quad=new G.y,d.state=G.E.for2d(),d}return sprite_tiling_es_extends(TilingSpriteRenderer,c),TilingSpriteRenderer.prototype.render=function(c){var l=this.renderer,d=this.quad,f=d.vertices;f[0]=f[6]=c._width*-c.anchor.x,f[1]=f[3]=c._height*-c.anchor.y,f[2]=f[4]=c._width*(1-c.anchor.x),f[5]=f[7]=c._height*(1-c.anchor.y),c.uvRespectAnchor&&((f=d.uvs)[0]=f[6]=-c.anchor.x,f[1]=f[3]=-c.anchor.y,f[2]=f[4]=1-c.anchor.x,f[5]=f[7]=1-c.anchor.y),d.invalidate();var m=c._texture,_=m.baseTexture,y=c.tileTransform.localTransform,g=c.uvMatrix,v=_.isPowerOfTwo&&m.frame.width===_.width&&m.frame.height===_.height;v&&(_._glTextures[l.CONTEXT_UID]?v=_.wrapMode!==W.q.CLAMP:_.wrapMode===W.q.CLAMP&&(_.wrapMode=W.q.REPEAT));var b=v?this.simpleShader:this.shader,x=m.width,S=m.height,E=c._width,P=c._height;Ht.set(y.a*x/E,y.b*x/P,y.c*S/E,y.d*S/P,y.tx/E,y.ty/P),Ht.invert(),v?Ht.prepend(g.mapCoord):(b.uniforms.uMapCoord=g.mapCoord.toArray(!0),b.uniforms.uClampFrame=g.uClampFrame,b.uniforms.uClampOffset=g.uClampOffset),b.uniforms.uTransform=Ht.toArray(!0),b.uniforms.uColor=Object(T.premultiplyTintToRgba)(c.tint,c.worldAlpha,b.uniforms.uColor,_.alphaMode),b.uniforms.translationMatrix=c.transform.worldTransform.toArray(!0),b.uniforms.uSampler=m,l.shader.bind(b),l.geometry.bind(d),this.state.blendMode=Object(T.correctBlendMode)(c.blendMode,_.alphaMode),l.state.set(this.state),l.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},TilingSpriteRenderer}(G.v),mesh_es_extendStatics=function(c,l){return(mesh_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};function mesh_es_extends(c,l){function __(){this.constructor=c}mesh_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}var Vt=function(){function MeshBatchUvs(c,l){this.uvBuffer=c,this.uvMatrix=l,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return MeshBatchUvs.prototype.update=function(c){if(c||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var l=this.uvBuffer.data;this.data&&this.data.length===l.length||(this.data=new Float32Array(l.length)),this.uvMatrix.multiplyUvs(l,this.data),this._updateID++}},MeshBatchUvs}(),Yt=new E.g,Wt=new E.h,qt=function(c){function Mesh(l,d,f,m){void 0===m&&(m=W.e.TRIANGLES);var _=c.call(this)||this;return _.geometry=l,l.refCount++,_.shader=d,_.state=f||G.E.for2d(),_.drawMode=m,_.start=0,_.size=0,_.uvs=null,_.indices=null,_.vertexData=new Float32Array(1),_.vertexDirty=0,_._transformID=-1,_._roundPixels=S.b.ROUND_PIXELS,_.batchUvs=null,_}return mesh_es_extends(Mesh,c),Object.defineProperty(Mesh.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"material",{get:function(){return this.shader},set:function(c){this.shader=c},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(c){this.state.blendMode=c},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(c){this._roundPixels!==c&&(this._transformID=-1),this._roundPixels=c},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"tint",{get:function(){return this.shader.tint},set:function(c){this.shader.tint=c},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"texture",{get:function(){return this.shader.texture},set:function(c){this.shader.texture=c},enumerable:!1,configurable:!0}),Mesh.prototype._render=function(c){var l=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===W.e.TRIANGLES&&l.length<2*Mesh.BATCHABLE_SIZE?this._renderToBatch(c):this._renderDefault(c)},Mesh.prototype._renderDefault=function(c){var l=this.shader;l.alpha=this.worldAlpha,l.update&&l.update(),c.batch.flush(),l.program.uniformData.translationMatrix&&(l.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),c.shader.bind(l),c.state.set(this.state),c.geometry.bind(this.geometry,l),c.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},Mesh.prototype._renderToBatch=function(c){var l=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=l.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var d=this.material.pluginName;c.batch.setObjectRenderer(c.plugins[d]),c.plugins[d].render(this)},Mesh.prototype.calculateVertices=function(){var c=this.geometry,l=c.buffers[0].data;if(c.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==l.length&&(this.vertexData=new Float32Array(l.length));for(var d=this.transform.worldTransform,f=d.a,m=d.b,_=d.c,y=d.d,g=d.tx,v=d.ty,b=this.vertexData,x=0;x<b.length/2;x++){var T=l[2*x],E=l[2*x+1];b[2*x]=f*T+_*E+g,b[2*x+1]=m*T+y*E+v}if(this._roundPixels){var P=S.b.RESOLUTION;for(x=0;x<b.length;++x)b[x]=Math.round((b[x]*P|0)/P)}this.vertexDirty=c.vertexDirtyId}},Mesh.prototype.calculateUvs=function(){var c=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=c.data:(this.batchUvs||(this.batchUvs=new Vt(c,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},Mesh.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},Mesh.prototype.containsPoint=function(c){if(!this.getBounds().contains(c.x,c.y))return!1;this.worldTransform.applyInverse(c,Yt);for(var l=this.geometry.getBuffer("aVertexPosition").data,d=Wt.points,f=this.geometry.getIndex().data,m=f.length,_=4===this.drawMode?3:1,y=0;y+2<m;y+=_){var g=2*f[y],v=2*f[y+1],b=2*f[y+2];if(d[0]=l[g],d[1]=l[g+1],d[2]=l[v],d[3]=l[v+1],d[4]=l[b],d[5]=l[b+1],Wt.contains(Yt.x,Yt.y))return!0}return!1},Mesh.prototype.destroy=function(l){c.prototype.destroy.call(this,l),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},Mesh.BATCHABLE_SIZE=100,Mesh}(I),Kt=function(c){function MeshMaterial(l,d){var f=this,m={uSampler:l,alpha:1,uTextureMatrix:E.d.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(d=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},d)).uniforms&&Object.assign(m,d.uniforms),(f=c.call(this,d.program||G.w.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),m)||this)._colorDirty=!1,f.uvMatrix=new G.H(l),f.batchable=void 0===d.program,f.pluginName=d.pluginName,f.tint=d.tint,f.alpha=d.alpha,f}return mesh_es_extends(MeshMaterial,c),Object.defineProperty(MeshMaterial.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(c){this.uniforms.uSampler!==c&&(this.uniforms.uSampler=c,this.uvMatrix.texture=c)},enumerable:!1,configurable:!0}),Object.defineProperty(MeshMaterial.prototype,"alpha",{get:function(){return this._alpha},set:function(c){c!==this._alpha&&(this._alpha=c,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(MeshMaterial.prototype,"tint",{get:function(){return this._tint},set:function(c){c!==this._tint&&(this._tint=c,this._tintRGB=(c>>16)+(65280&c)+((255&c)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),MeshMaterial.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var c=this.texture.baseTexture;Object(T.premultiplyTintToRgba)(this._tint,this._alpha,this.uniforms.uColor,c.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},MeshMaterial}(G.C),Zt=function(c){function MeshGeometry(l,d,f){var m=c.call(this)||this,_=new G.l(l),y=new G.l(d,!0),g=new G.l(f,!0,!0);return m.addAttribute("aVertexPosition",_,2,!1,W.p.FLOAT).addAttribute("aTextureCoord",y,2,!1,W.p.FLOAT).addIndex(g),m._updateId=-1,m}return mesh_es_extends(MeshGeometry,c),Object.defineProperty(MeshGeometry.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),MeshGeometry}(G.s),text_bitmap_es_extendStatics=function(c,l){return(text_bitmap_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};var Qt=function Qt(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},Jt=function(){function TextFormat(){}return TextFormat.test=function(c){return"string"==typeof c&&0===c.indexOf("info face=")},TextFormat.parse=function(c){var l=c.match(/^[a-z]+\s+.+$/gm),d={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var f in l){var m=l[f].match(/^[a-z]+/gm)[0],_=l[f].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),y={};for(var g in _){var v=_[g].split("="),b=v[0],x=v[1].replace(/"/gm,""),T=parseFloat(x),S=isNaN(T)?x:T;y[b]=S}d[m].push(y)}var E=new Qt;return d.info.forEach((function(c){return E.info.push({face:c.face,size:parseInt(c.size,10)})})),d.common.forEach((function(c){return E.common.push({lineHeight:parseInt(c.lineHeight,10)})})),d.page.forEach((function(c){return E.page.push({id:parseInt(c.id,10),file:c.file})})),d.char.forEach((function(c){return E.char.push({id:parseInt(c.id,10),page:parseInt(c.page,10),x:parseInt(c.x,10),y:parseInt(c.y,10),width:parseInt(c.width,10),height:parseInt(c.height,10),xoffset:parseInt(c.xoffset,10),yoffset:parseInt(c.yoffset,10),xadvance:parseInt(c.xadvance,10)})})),d.kerning.forEach((function(c){return E.kerning.push({first:parseInt(c.first,10),second:parseInt(c.second,10),amount:parseInt(c.amount,10)})})),E},TextFormat}(),$t=function(){function XMLFormat(){}return XMLFormat.test=function(c){return c instanceof XMLDocument&&c.getElementsByTagName("page").length&&null!==c.getElementsByTagName("info")[0].getAttribute("face")},XMLFormat.parse=function(c){for(var l=new Qt,d=c.getElementsByTagName("info"),f=c.getElementsByTagName("common"),m=c.getElementsByTagName("page"),_=c.getElementsByTagName("char"),y=c.getElementsByTagName("kerning"),g=0;g<d.length;g++)l.info.push({face:d[g].getAttribute("face"),size:parseInt(d[g].getAttribute("size"),10)});for(g=0;g<f.length;g++)l.common.push({lineHeight:parseInt(f[g].getAttribute("lineHeight"),10)});for(g=0;g<m.length;g++)l.page.push({id:parseInt(m[g].getAttribute("id"),10)||0,file:m[g].getAttribute("file")});for(g=0;g<_.length;g++){var v=_[g];l.char.push({id:parseInt(v.getAttribute("id"),10),page:parseInt(v.getAttribute("page"),10)||0,x:parseInt(v.getAttribute("x"),10),y:parseInt(v.getAttribute("y"),10),width:parseInt(v.getAttribute("width"),10),height:parseInt(v.getAttribute("height"),10),xoffset:parseInt(v.getAttribute("xoffset"),10),yoffset:parseInt(v.getAttribute("yoffset"),10),xadvance:parseInt(v.getAttribute("xadvance"),10)})}for(g=0;g<y.length;g++)l.kerning.push({first:parseInt(y[g].getAttribute("first"),10),second:parseInt(y[g].getAttribute("second"),10),amount:parseInt(y[g].getAttribute("amount"),10)});return l},XMLFormat}(),te=function(){function XMLStringFormat(){}return XMLStringFormat.test=function(c){if("string"==typeof c&&c.indexOf("<font>")>-1){var l=(new self.DOMParser).parseFromString(c,"text/xml");return $t.test(l)}return!1},XMLStringFormat.parse=function(c){var l=(new window.DOMParser).parseFromString(c,"text/xml");return $t.parse(l)},XMLStringFormat}(),ee=[Jt,$t,te];function autoDetectFormat(c){for(var l=0;l<ee.length;l++)if(ee[l].test(c))return ee[l];return null}function generateFillStyle(c,l,d,f,m,_){var y,g=d.fill;if(!Array.isArray(g))return g;if(1===g.length)return g[0];var v=d.dropShadow?d.dropShadowDistance:0,b=d.padding||0,x=Math.ceil(c.width/f)-v-2*b,T=Math.ceil(c.height/f)-v-2*b,S=g.slice(),E=d.fillGradientStops.slice();if(!E.length)for(var P=S.length+1,w=1;w<P;++w)E.push(w/P);if(S.unshift(g[0]),E.unshift(0),S.push(g[g.length-1]),E.push(1),d.fillGradientType===St.LINEAR_VERTICAL){y=l.createLinearGradient(x/2,b,x/2,T+b);var O=0,I=(_.fontProperties.fontSize+d.strokeThickness)/T;for(w=0;w<m.length;w++)for(var A=_.lineHeight*w,C=0;C<S.length;C++){var R=A/T+("number"==typeof E[C]?E[C]:C/S.length)*I,D=Math.max(O,R);D=Math.min(D,1),y.addColorStop(D,S[C]),O=D}}else{y=l.createLinearGradient(b,T/2,x+b,T/2);var L=S.length+1,B=1;for(w=0;w<S.length;w++){var N=void 0;N="number"==typeof E[w]?E[w]:B/L,y.addColorStop(N,S[w]),B++}}return y}function drawGlyph(c,l,d,f,m,_,y){var g=d.text,v=d.fontProperties;l.translate(f,m),l.scale(_,_);var b=y.strokeThickness/2,x=-y.strokeThickness/2;l.font=y.toFontString(),l.lineWidth=y.strokeThickness,l.textBaseline=y.textBaseline,l.lineJoin=y.lineJoin,l.miterLimit=y.miterLimit,l.fillStyle=generateFillStyle(c,l,y,_,[g],d),l.strokeStyle=y.stroke,l.font=y.toFontString(),l.lineWidth=y.strokeThickness,l.textBaseline=y.textBaseline,l.lineJoin=y.lineJoin,l.miterLimit=y.miterLimit,l.fillStyle=generateFillStyle(c,l,y,_,[g],d),l.strokeStyle=y.stroke;var S=y.dropShadowColor,E=Object(T.hex2rgb)("number"==typeof S?S:Object(T.string2hex)(S));y.dropShadow?(l.shadowColor="rgba("+255*E[0]+","+255*E[1]+","+255*E[2]+","+y.dropShadowAlpha+")",l.shadowBlur=y.dropShadowBlur,l.shadowOffsetX=Math.cos(y.dropShadowAngle)*y.dropShadowDistance,l.shadowOffsetY=Math.sin(y.dropShadowAngle)*y.dropShadowDistance):(l.shadowColor="black",l.shadowBlur=0,l.shadowOffsetX=0,l.shadowOffsetY=0),y.stroke&&y.strokeThickness&&l.strokeText(g,b,x+d.lineHeight-v.descent),y.fill&&l.fillText(g,b,x+d.lineHeight-v.descent),l.setTransform(1,0,0,1,0,0),l.fillStyle="rgba(0, 0, 0, 0)"}var re=function(){function BitmapFont(c,l){var d=c.info[0],f=c.common[0],m=c.page[0],_=Object(T.getResolutionOfUrl)(m.file),y={};this.font=d.face,this.size=d.size,this.lineHeight=f.lineHeight/_,this.chars={},this.pageTextures=y;for(var g=0;g<c.page.length;g++){var v=c.page[g],b=v.id,x=v.file;y[b]=l instanceof Array?l[g]:l[x]}for(g=0;g<c.char.length;g++){var S=c.char[g],P=(b=S.id,S.page),w=c.char[g],O=w.x,I=w.y,A=w.width,C=w.height,R=w.xoffset,D=w.yoffset,L=w.xadvance;O/=_,I/=_,A/=_,C/=_,R/=_,D/=_,L/=_;var B=new E.j(O+y[P].frame.x/_,I+y[P].frame.y/_,A,C);this.chars[b]={xOffset:R,yOffset:D,xAdvance:L,kerning:{},texture:new G.G(y[P].baseTexture,B),page:P}}for(g=0;g<c.kerning.length;g++){var N=c.kerning[g],k=N.first,j=N.second,U=N.amount;k/=_,j/=_,U/=_,this.chars[j]&&(this.chars[j].kerning[k]=U)}}return BitmapFont.prototype.destroy=function(){for(var c in this.chars)this.chars[c].texture.destroy(),this.chars[c].texture=null;for(var c in this.pageTextures)this.pageTextures[c].destroy(!0),this.pageTextures[c]=null;this.chars=null,this.pageTextures=null},BitmapFont.install=function(c,l){var d;if(c instanceof Qt)d=c;else{var f=autoDetectFormat(c);if(!f)throw new Error("Unrecognized data format for font.");d=f.parse(c)}l instanceof G.G&&(l=[l]);var m=new BitmapFont(d,l);return BitmapFont.available[m.font]=m,m},BitmapFont.uninstall=function(c){var l=BitmapFont.available[c];if(!l)throw new Error("No font found named '"+c+"'");l.destroy(),delete BitmapFont.available[c]},BitmapFont.from=function(c,l,d){if(!c)throw new Error("[BitmapFont] Property `name` is required.");var f=Object.assign({},BitmapFont.defaultOptions,d),m=f.chars,_=f.padding,y=f.resolution,g=f.textureWidth,v=f.textureHeight,b=function resolveCharacters(c){"string"==typeof c&&(c=[c]);for(var l=[],d=0,f=c.length;d<f;d++){var m=c[d];if(Array.isArray(m)){if(2!==m.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+m.length+".");var _=m[0].charCodeAt(0),y=m[1].charCodeAt(0);if(y<_)throw new Error("[BitmapFont]: Invalid character range.");for(var g=_,v=y;g<=v;g++)l.push(String.fromCharCode(g))}else l.push.apply(l,m.split(""))}if(0===l.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return l}(m),x=l instanceof At?l:new At(l),T=g,S=new Qt;S.info[0]={face:x.fontFamily,size:x.fontSize},S.common[0]={lineHeight:x.fontSize};for(var E,P,w,O=0,I=0,A=0,C=[],R=0;R<b.length;R++){E||((E=document.createElement("canvas")).width=g,E.height=v,P=E.getContext("2d"),w=new G.e(E,{resolution:y}),C.push(new G.G(w)),S.page.push({id:C.length-1,file:""}));var D=Ct.measureText(b[R],x,!1,E),L=D.width,B=Math.ceil(D.height),N=Math.ceil(("italic"===x.fontStyle?2:1)*L);if(I>=v-B*y){if(0===I)throw new Error("[BitmapFont] textureHeight "+v+"px is too small for "+x.fontSize+"px fonts");--R,E=null,P=null,w=null,I=0,O=0,A=0}else if(A=Math.max(B+D.fontProperties.descent,A),N*y+O>=T)--R,I+=A*y,I=Math.ceil(I),O=0,A=0;else{drawGlyph(E,P,D,O,I,y,x);var k=D.text.charCodeAt(0);S.char.push({id:k,page:C.length-1,x:O/y,y:I/y,width:N,height:B,xoffset:0,yoffset:0,xadvance:Math.ceil(L-(x.dropShadow?x.dropShadowDistance:0)-(x.stroke?x.strokeThickness:0))}),O+=(N+2*_)*y,O=Math.ceil(O)}}var j=new BitmapFont(S,C);return void 0!==BitmapFont.available[c]&&BitmapFont.uninstall(c),BitmapFont.available[c]=j,j},BitmapFont.ALPHA=[["a","z"],["A","Z"]," "],BitmapFont.NUMERIC=[["0","9"]],BitmapFont.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],BitmapFont.ASCII=[[" ","~"]],BitmapFont.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:BitmapFont.ALPHANUMERIC},BitmapFont.available={},BitmapFont}(),ie=[],ne=[],oe=function(c){function BitmapText(l,d){void 0===d&&(d={});var f=c.call(this)||this;f._tint=16777215,d.font&&(Object(T.deprecation)("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),f._upgradeStyle(d));var m=Object.assign({},BitmapText.styleDefaults,d),_=m.align,y=m.tint,g=m.maxWidth,v=m.letterSpacing,b=m.fontName,x=m.fontSize;if(!re.available[b])throw new Error('Missing BitmapFont "'+b+'"');return f._activePagesMeshData=[],f._textWidth=0,f._textHeight=0,f._align=_,f._tint=y,f._fontName=b,f._fontSize=x||re.available[b].size,f._text=l,f._maxWidth=g,f._maxLineHeight=0,f._letterSpacing=v,f._anchor=new E.e((function(){f.dirty=!0}),f,0,0),f._roundPixels=S.b.ROUND_PIXELS,f.dirty=!0,f._textureCache={},f}return function text_bitmap_es_extends(c,l){function __(){this.constructor=c}text_bitmap_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}(BitmapText,c),BitmapText.prototype.updateText=function(){for(var c,l=re.available[this._fontName],d=this._fontSize/l.size,f=new E.g,m=[],_=[],y=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",g=y.length,v=this._maxWidth*l.size/this._fontSize,b=null,x=0,S=0,P=0,w=-1,O=0,I=0,A=0,C=0;C<g;C++){var R=y.charCodeAt(C),D=y.charAt(C);if(/(?:\s)/.test(D)&&(w=C,O=x),"\r"!==D&&"\n"!==D){var L=l.chars[R];if(L){b&&L.kerning[b]&&(f.x+=L.kerning[b]);var B=ne.pop()||{texture:G.G.EMPTY,line:0,charCode:0,position:new E.g};B.texture=L.texture,B.line=P,B.charCode=R,B.position.x=f.x+L.xOffset+this._letterSpacing/2,B.position.y=f.y+L.yOffset,m.push(B),f.x+=L.xAdvance+this._letterSpacing,x=f.x,A=Math.max(A,L.yOffset+L.texture.height),b=R,-1!==w&&v>0&&f.x>v&&(++I,Object(T.removeItems)(m,1+w-I,1+C-w),C=w,w=-1,_.push(O),S=Math.max(S,O),P++,f.x=0,f.y+=l.lineHeight,b=null)}}else _.push(x),S=Math.max(S,x),++P,++I,f.x=0,f.y+=l.lineHeight,b=null}var N=y.charAt(y.length-1);"\r"!==N&&"\n"!==N&&(/(?:\s)/.test(N)&&(x=O),_.push(x),S=Math.max(S,x));var k=[];for(C=0;C<=P;C++){var j=0;"right"===this._align?j=S-_[C]:"center"===this._align&&(j=(S-_[C])/2),k.push(j)}var U=m.length,X={},H=[],z=this._activePagesMeshData;for(C=0;C<z.length;C++)ie.push(z[C]);for(C=0;C<U;C++){var V=(tt=m[C].texture).baseTexture.uid;if(!X[V]){if(!(at=ie.pop())){var Y=new Zt,W=new Kt(G.G.EMPTY);at={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new qt(Y,W),vertices:null,uvs:null,indices:null}}at.index=0,at.indexCount=0,at.vertexCount=0,at.uvsCount=0,at.total=0;var q=this._textureCache;q[V]=q[V]||new G.G(tt.baseTexture),at.mesh.texture=q[V],at.mesh.tint=this._tint,H.push(at),X[V]=at}X[V].total++}for(C=0;C<z.length;C++)-1===H.indexOf(z[C])&&this.removeChild(z[C].mesh);for(C=0;C<H.length;C++)H[C].mesh.parent!==this&&this.addChild(H[C].mesh);for(var C in this._activePagesMeshData=H,X){var K=(at=X[C]).total;if(!((null===(c=at.indices)||void 0===c?void 0:c.length)>6*K)||at.vertices.length<2*qt.BATCHABLE_SIZE)at.vertices=new Float32Array(8*K),at.uvs=new Float32Array(8*K),at.indices=new Uint16Array(6*K);else for(var Z=at.total,Q=at.vertices,J=4*Z*2;J<Q.length;J++)Q[J]=0;at.mesh.size=6*K}for(C=0;C<U;C++){var $=(D=m[C]).position.x+k[D.line];this._roundPixels&&($=Math.round($));var tt,et=$*d,rt=D.position.y*d,it=X[(tt=D.texture).baseTexture.uid],nt=tt.frame,ot=tt._uvs,st=it.index++;it.indices[6*st+0]=0+4*st,it.indices[6*st+1]=1+4*st,it.indices[6*st+2]=2+4*st,it.indices[6*st+3]=0+4*st,it.indices[6*st+4]=2+4*st,it.indices[6*st+5]=3+4*st,it.vertices[8*st+0]=et,it.vertices[8*st+1]=rt,it.vertices[8*st+2]=et+nt.width*d,it.vertices[8*st+3]=rt,it.vertices[8*st+4]=et+nt.width*d,it.vertices[8*st+5]=rt+nt.height*d,it.vertices[8*st+6]=et,it.vertices[8*st+7]=rt+nt.height*d,it.uvs[8*st+0]=ot.x0,it.uvs[8*st+1]=ot.y0,it.uvs[8*st+2]=ot.x1,it.uvs[8*st+3]=ot.y1,it.uvs[8*st+4]=ot.x2,it.uvs[8*st+5]=ot.y2,it.uvs[8*st+6]=ot.x3,it.uvs[8*st+7]=ot.y3}for(var C in this._textWidth=S*d,this._textHeight=(f.y+l.lineHeight)*d,X){var at=X[C];if(0!==this.anchor.x||0!==this.anchor.y)for(var ut=0,ht=this._textWidth*this.anchor.x,ct=this._textHeight*this.anchor.y,lt=0;lt<at.total;lt++)at.vertices[ut++]-=ht,at.vertices[ut++]-=ct,at.vertices[ut++]-=ht,at.vertices[ut++]-=ct,at.vertices[ut++]-=ht,at.vertices[ut++]-=ct,at.vertices[ut++]-=ht,at.vertices[ut++]-=ct;this._maxLineHeight=A*d;var dt=at.mesh.geometry.getBuffer("aVertexPosition"),pt=at.mesh.geometry.getBuffer("aTextureCoord"),ft=at.mesh.geometry.getIndex();dt.data=at.vertices,pt.data=at.uvs,ft.data=at.indices,dt.update(),pt.update(),ft.update()}for(C=0;C<m.length;C++)ne.push(m[C])},BitmapText.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},BitmapText.prototype.getLocalBounds=function(){return this.validate(),c.prototype.getLocalBounds.call(this)},BitmapText.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(BitmapText.prototype,"tint",{get:function(){return this._tint},set:function(c){if(this._tint!==c){this._tint=c;for(var l=0;l<this._activePagesMeshData.length;l++)this._activePagesMeshData[l].mesh.tint=c}},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"align",{get:function(){return this._align},set:function(c){this._align!==c&&(this._align=c,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"fontName",{get:function(){return this._fontName},set:function(c){if(!re.available[c])throw new Error('Missing BitmapFont "'+c+'"');this._fontName!==c&&(this._fontName=c,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"fontSize",{get:function(){return this._fontSize},set:function(c){this._fontSize!==c&&(this._fontSize=c,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"anchor",{get:function(){return this._anchor},set:function(c){"number"==typeof c?this._anchor.set(c):this._anchor.copyFrom(c)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"text",{get:function(){return this._text},set:function(c){c=String(null==c?"":c),this._text!==c&&(this._text=c,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(c){this._maxWidth!==c&&(this._maxWidth=c,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(c){this._letterSpacing!==c&&(this._letterSpacing=c,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(c){c!==this._roundPixels&&(this._roundPixels=c,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),BitmapText.prototype._upgradeStyle=function(c){if("string"==typeof c.font){var l=c.font.split(" ");c.fontName=1===l.length?l[0]:l.slice(1).join(" "),l.length>=2&&(c.fontSize=parseInt(l[0],10))}else c.fontName=c.font.name,c.fontSize="number"==typeof c.font.size?c.font.size:parseInt(c.font.size,10)},BitmapText.prototype.destroy=function(l){var d=this._textureCache;for(var f in d){d[f].destroy(),delete d[f]}this._textureCache=null,c.prototype.destroy.call(this,l)},BitmapText.registerFont=function(c,l){return Object(T.deprecation)("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),re.install(c,l)},Object.defineProperty(BitmapText,"fonts",{get:function(){return Object(T.deprecation)("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),re.available},enumerable:!1,configurable:!0}),BitmapText.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},BitmapText}(I),se=function(){function BitmapFontLoader(){}return BitmapFontLoader.add=function(){Y.c.setExtensionXhrType("fnt",Y.c.XHR_RESPONSE_TYPE.TEXT)},BitmapFontLoader.use=function(c,l){var d=autoDetectFormat(c.data);if(d)for(var f=BitmapFontLoader.getBaseUrl(this,c),m=d.parse(c.data),_={},completed=function(d){_[d.metadata.pageFile]=d.texture,Object.keys(_).length===m.page.length&&(c.bitmapFont=re.install(m,_),l())},y=0;y<m.page.length;++y){var g=m.page[y].file,v=f+g,b=!1;for(var x in this.resources){var T=this.resources[x];if(T.url===v){T.metadata.pageFile=g,T.texture?completed(T):T.onAfterMiddleware.add(completed),b=!0;break}}if(!b){var S={crossOrigin:c.crossOrigin,loadType:Y.c.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:g},c.metadata.imageMetadata),parentResource:c};this.add(v,S,completed)}}else l()},BitmapFontLoader.getBaseUrl=function(c,l){var d=l.isDataUrl?"":BitmapFontLoader.dirname(l.url);return l.isDataUrl&&("."===d&&(d=""),c.baseUrl&&d&&"/"===c.baseUrl.charAt(c.baseUrl.length-1)&&(d+="/")),(d=d.replace(c.baseUrl,""))&&"/"!==d.charAt(d.length-1)&&(d+="/"),d},BitmapFontLoader.dirname=function(c){var l=c.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return l===c?".":""===l?"/":l},BitmapFontLoader}(),filter_alpha_es_extendStatics=function(c,l){return(filter_alpha_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};var ae=function(c){function AlphaFilter(l){void 0===l&&(l=1);var d=c.call(this,G.O,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return d.alpha=l,d}return function filter_alpha_es_extends(c,l){function __(){this.constructor=c}filter_alpha_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}(AlphaFilter,c),Object.defineProperty(AlphaFilter.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(c){this.uniforms.uAlpha=c},enumerable:!1,configurable:!0}),AlphaFilter}(G.m),filter_blur_es_extendStatics=function(c,l){return(filter_blur_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};function filter_blur_es_extends(c,l){function __(){this.constructor=c}filter_blur_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}var ue,he,ce,le,de,pe,fe,me,_e,ye,ge,ve,be,xe,Te,Se,Ee,Pe={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},we=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(c){c[c.WEBGL_LEGACY=0]="WEBGL_LEGACY",c[c.WEBGL=1]="WEBGL",c[c.WEBGL2=2]="WEBGL2"}(ue||(ue={})),function(c){c[c.UNKNOWN=0]="UNKNOWN",c[c.WEBGL=1]="WEBGL",c[c.CANVAS=2]="CANVAS"}(he||(he={})),function(c){c[c.COLOR=16384]="COLOR",c[c.DEPTH=256]="DEPTH",c[c.STENCIL=1024]="STENCIL"}(ce||(ce={})),function(c){c[c.NORMAL=0]="NORMAL",c[c.ADD=1]="ADD",c[c.MULTIPLY=2]="MULTIPLY",c[c.SCREEN=3]="SCREEN",c[c.OVERLAY=4]="OVERLAY",c[c.DARKEN=5]="DARKEN",c[c.LIGHTEN=6]="LIGHTEN",c[c.COLOR_DODGE=7]="COLOR_DODGE",c[c.COLOR_BURN=8]="COLOR_BURN",c[c.HARD_LIGHT=9]="HARD_LIGHT",c[c.SOFT_LIGHT=10]="SOFT_LIGHT",c[c.DIFFERENCE=11]="DIFFERENCE",c[c.EXCLUSION=12]="EXCLUSION",c[c.HUE=13]="HUE",c[c.SATURATION=14]="SATURATION",c[c.COLOR=15]="COLOR",c[c.LUMINOSITY=16]="LUMINOSITY",c[c.NORMAL_NPM=17]="NORMAL_NPM",c[c.ADD_NPM=18]="ADD_NPM",c[c.SCREEN_NPM=19]="SCREEN_NPM",c[c.NONE=20]="NONE",c[c.SRC_OVER=0]="SRC_OVER",c[c.SRC_IN=21]="SRC_IN",c[c.SRC_OUT=22]="SRC_OUT",c[c.SRC_ATOP=23]="SRC_ATOP",c[c.DST_OVER=24]="DST_OVER",c[c.DST_IN=25]="DST_IN",c[c.DST_OUT=26]="DST_OUT",c[c.DST_ATOP=27]="DST_ATOP",c[c.ERASE=26]="ERASE",c[c.SUBTRACT=28]="SUBTRACT",c[c.XOR=29]="XOR"}(le||(le={})),function(c){c[c.POINTS=0]="POINTS",c[c.LINES=1]="LINES",c[c.LINE_LOOP=2]="LINE_LOOP",c[c.LINE_STRIP=3]="LINE_STRIP",c[c.TRIANGLES=4]="TRIANGLES",c[c.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",c[c.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(de||(de={})),function(c){c[c.RGBA=6408]="RGBA",c[c.RGB=6407]="RGB",c[c.ALPHA=6406]="ALPHA",c[c.LUMINANCE=6409]="LUMINANCE",c[c.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",c[c.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",c[c.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(pe||(pe={})),function(c){c[c.TEXTURE_2D=3553]="TEXTURE_2D",c[c.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",c[c.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",c[c.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",c[c.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",c[c.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",c[c.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",c[c.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",c[c.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(fe||(fe={})),function(c){c[c.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",c[c.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",c[c.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",c[c.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",c[c.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",c[c.FLOAT=5126]="FLOAT",c[c.HALF_FLOAT=36193]="HALF_FLOAT"}(me||(me={})),function(c){c[c.NEAREST=0]="NEAREST",c[c.LINEAR=1]="LINEAR"}(_e||(_e={})),function(c){c[c.CLAMP=33071]="CLAMP",c[c.REPEAT=10497]="REPEAT",c[c.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(ye||(ye={})),function(c){c[c.OFF=0]="OFF",c[c.POW2=1]="POW2",c[c.ON=2]="ON"}(ge||(ge={})),function(c){c[c.NPM=0]="NPM",c[c.UNPACK=1]="UNPACK",c[c.PMA=2]="PMA",c[c.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",c[c.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",c[c.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(ve||(ve={})),function(c){c[c.NO=0]="NO",c[c.YES=1]="YES",c[c.AUTO=2]="AUTO",c[c.BLEND=0]="BLEND",c[c.CLEAR=1]="CLEAR",c[c.BLIT=2]="BLIT"}(be||(be={})),function(c){c[c.AUTO=0]="AUTO",c[c.MANUAL=1]="MANUAL"}(xe||(xe={})),function(c){c.LOW="lowp",c.MEDIUM="mediump",c.HIGH="highp"}(Te||(Te={})),function(c){c[c.NONE=0]="NONE",c[c.SCISSOR=1]="SCISSOR",c[c.STENCIL=2]="STENCIL",c[c.SPRITE=3]="SPRITE"}(Se||(Se={})),function(c){c[c.NONE=0]="NONE",c[c.LOW=2]="LOW",c[c.MEDIUM=4]="MEDIUM",c[c.HIGH=8]="HIGH"}(Ee||(Ee={}));var Oe=function(c){function BlurFilterPass(l,d,f,m,_){void 0===d&&(d=8),void 0===f&&(f=4),void 0===m&&(m=S.b.FILTER_RESOLUTION),void 0===_&&(_=5);var y=this,g=function generateBlurVertSource(c,l){var d,f=Math.ceil(c/2),m="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",_="";d=l?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var y=0;y<c;y++){var g=d.replace("%index%",y.toString());_+=g=g.replace("%sampleIndex%",y-(f-1)+".0"),_+="\n"}return(m=m.replace("%blur%",_)).replace("%size%",c.toString())}(_,l),v=function generateBlurFragSource(c){for(var l,d=Pe[c],f=d.length,m=we,_="",y=0;y<c;y++){var g="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",y.toString());l=y,y>=f&&(l=c-y-1),_+=g=g.replace("%value%",d[l].toString()),_+="\n"}return(m=m.replace("%blur%",_)).replace("%size%",c.toString())}(_);return(y=c.call(this,g,v)||this).horizontal=l,y.resolution=m,y._quality=0,y.quality=f,y.blur=d,y}return filter_blur_es_extends(BlurFilterPass,c),BlurFilterPass.prototype.apply=function(c,l,d,f){if(d?this.horizontal?this.uniforms.strength=1/d.width*(d.width/l.width):this.uniforms.strength=1/d.height*(d.height/l.height):this.horizontal?this.uniforms.strength=1/c.renderer.width*(c.renderer.width/l.width):this.uniforms.strength=1/c.renderer.height*(c.renderer.height/l.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)c.applyFilter(this,l,d,f);else{var m=c.getFilterTexture(),_=c.renderer,y=l,g=m;this.state.blend=!1,c.applyFilter(this,y,g,be.CLEAR);for(var v=1;v<this.passes-1;v++){c.bindAndClear(y,be.BLIT),this.uniforms.uSampler=g;var b=g;g=y,y=b,_.shader.bind(this),_.geometry.draw(5)}this.state.blend=!0,c.applyFilter(this,g,d,f),c.returnFilterTexture(m)}},Object.defineProperty(BlurFilterPass.prototype,"blur",{get:function(){return this.strength},set:function(c){this.padding=1+2*Math.abs(c),this.strength=c},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilterPass.prototype,"quality",{get:function(){return this._quality},set:function(c){this._quality=c,this.passes=c},enumerable:!1,configurable:!0}),BlurFilterPass}(G.m),Ie=function(c){function BlurFilter(l,d,f,m){void 0===l&&(l=8),void 0===d&&(d=4),void 0===f&&(f=S.b.FILTER_RESOLUTION),void 0===m&&(m=5);var _=c.call(this)||this;return _.blurXFilter=new Oe(!0,l,d,f,m),_.blurYFilter=new Oe(!1,l,d,f,m),_.resolution=f,_.quality=d,_.blur=l,_.repeatEdgePixels=!1,_}return filter_blur_es_extends(BlurFilter,c),BlurFilter.prototype.apply=function(c,l,d,f){var m=Math.abs(this.blurXFilter.strength),_=Math.abs(this.blurYFilter.strength);if(m&&_){var y=c.getFilterTexture();this.blurXFilter.apply(c,l,y,be.CLEAR),this.blurYFilter.apply(c,y,d,f),c.returnFilterTexture(y)}else _?this.blurYFilter.apply(c,l,d,f):this.blurXFilter.apply(c,l,d,f)},BlurFilter.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(c){this.blurXFilter.blur=this.blurYFilter.blur=c,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(c){this.blurXFilter.quality=this.blurYFilter.quality=c},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(c){this.blurXFilter.blur=c,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(c){this.blurYFilter.blur=c,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(c){this.blurYFilter.blendMode=c},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(c){this._repeatEdgePixels=c,this.updatePadding()},enumerable:!1,configurable:!0}),BlurFilter}(G.m),filter_color_matrix_es_extendStatics=function(c,l){return(filter_color_matrix_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};var Ae=function(c){function ColorMatrixFilter(){var l=this,d={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(l=c.call(this,G.N,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",d)||this).alpha=1,l}return function filter_color_matrix_es_extends(c,l){function __(){this.constructor=c}filter_color_matrix_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}(ColorMatrixFilter,c),ColorMatrixFilter.prototype._loadMatrix=function(c,l){void 0===l&&(l=!1);var d=c;l&&(this._multiply(d,this.uniforms.m,c),d=this._colorMatrix(d)),this.uniforms.m=d},ColorMatrixFilter.prototype._multiply=function(c,l,d){return c[0]=l[0]*d[0]+l[1]*d[5]+l[2]*d[10]+l[3]*d[15],c[1]=l[0]*d[1]+l[1]*d[6]+l[2]*d[11]+l[3]*d[16],c[2]=l[0]*d[2]+l[1]*d[7]+l[2]*d[12]+l[3]*d[17],c[3]=l[0]*d[3]+l[1]*d[8]+l[2]*d[13]+l[3]*d[18],c[4]=l[0]*d[4]+l[1]*d[9]+l[2]*d[14]+l[3]*d[19]+l[4],c[5]=l[5]*d[0]+l[6]*d[5]+l[7]*d[10]+l[8]*d[15],c[6]=l[5]*d[1]+l[6]*d[6]+l[7]*d[11]+l[8]*d[16],c[7]=l[5]*d[2]+l[6]*d[7]+l[7]*d[12]+l[8]*d[17],c[8]=l[5]*d[3]+l[6]*d[8]+l[7]*d[13]+l[8]*d[18],c[9]=l[5]*d[4]+l[6]*d[9]+l[7]*d[14]+l[8]*d[19]+l[9],c[10]=l[10]*d[0]+l[11]*d[5]+l[12]*d[10]+l[13]*d[15],c[11]=l[10]*d[1]+l[11]*d[6]+l[12]*d[11]+l[13]*d[16],c[12]=l[10]*d[2]+l[11]*d[7]+l[12]*d[12]+l[13]*d[17],c[13]=l[10]*d[3]+l[11]*d[8]+l[12]*d[13]+l[13]*d[18],c[14]=l[10]*d[4]+l[11]*d[9]+l[12]*d[14]+l[13]*d[19]+l[14],c[15]=l[15]*d[0]+l[16]*d[5]+l[17]*d[10]+l[18]*d[15],c[16]=l[15]*d[1]+l[16]*d[6]+l[17]*d[11]+l[18]*d[16],c[17]=l[15]*d[2]+l[16]*d[7]+l[17]*d[12]+l[18]*d[17],c[18]=l[15]*d[3]+l[16]*d[8]+l[17]*d[13]+l[18]*d[18],c[19]=l[15]*d[4]+l[16]*d[9]+l[17]*d[14]+l[18]*d[19]+l[19],c},ColorMatrixFilter.prototype._colorMatrix=function(c){var l=new Float32Array(c);return l[4]/=255,l[9]/=255,l[14]/=255,l[19]/=255,l},ColorMatrixFilter.prototype.brightness=function(c,l){var d=[c,0,0,0,0,0,c,0,0,0,0,0,c,0,0,0,0,0,1,0];this._loadMatrix(d,l)},ColorMatrixFilter.prototype.greyscale=function(c,l){var d=[c,c,c,0,0,c,c,c,0,0,c,c,c,0,0,0,0,0,1,0];this._loadMatrix(d,l)},ColorMatrixFilter.prototype.blackAndWhite=function(c){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],c)},ColorMatrixFilter.prototype.hue=function(c,l){c=(c||0)/180*Math.PI;var d=Math.cos(c),f=Math.sin(c),m=1/3,_=(0,Math.sqrt)(m),y=[d+(1-d)*m,m*(1-d)-_*f,m*(1-d)+_*f,0,0,m*(1-d)+_*f,d+m*(1-d),m*(1-d)-_*f,0,0,m*(1-d)-_*f,m*(1-d)+_*f,d+m*(1-d),0,0,0,0,0,1,0];this._loadMatrix(y,l)},ColorMatrixFilter.prototype.contrast=function(c,l){var d=(c||0)+1,f=-.5*(d-1),m=[d,0,0,0,f,0,d,0,0,f,0,0,d,0,f,0,0,0,1,0];this._loadMatrix(m,l)},ColorMatrixFilter.prototype.saturate=function(c,l){void 0===c&&(c=0);var d=2*c/3+1,f=-.5*(d-1),m=[d,f,f,0,0,f,d,f,0,0,f,f,d,0,0,0,0,0,1,0];this._loadMatrix(m,l)},ColorMatrixFilter.prototype.desaturate=function(){this.saturate(-1)},ColorMatrixFilter.prototype.negative=function(c){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],c)},ColorMatrixFilter.prototype.sepia=function(c){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],c)},ColorMatrixFilter.prototype.technicolor=function(c){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],c)},ColorMatrixFilter.prototype.polaroid=function(c){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],c)},ColorMatrixFilter.prototype.toBGR=function(c){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],c)},ColorMatrixFilter.prototype.kodachrome=function(c){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],c)},ColorMatrixFilter.prototype.browni=function(c){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],c)},ColorMatrixFilter.prototype.vintage=function(c){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],c)},ColorMatrixFilter.prototype.colorTone=function(c,l,d,f,m){var _=((d=d||16770432)>>16&255)/255,y=(d>>8&255)/255,g=(255&d)/255,v=((f=f||3375104)>>16&255)/255,b=(f>>8&255)/255,x=(255&f)/255,T=[.3,.59,.11,0,0,_,y,g,c=c||.2,0,v,b,x,l=l||.15,0,_-v,y-b,g-x,0,0];this._loadMatrix(T,m)},ColorMatrixFilter.prototype.night=function(c,l){var d=[-2*(c=c||.1),-c,0,0,0,-c,0,c,0,0,0,c,2*c,0,0,0,0,0,1,0];this._loadMatrix(d,l)},ColorMatrixFilter.prototype.predator=function(c,l){var d=[11.224130630493164*c,-4.794486999511719*c,-2.8746118545532227*c,0*c,.40342438220977783*c,-3.6330697536468506*c,9.193157196044922*c,-2.951810836791992*c,0*c,-1.316135048866272*c,-3.2184197902679443*c,-4.2375030517578125*c,7.476448059082031*c,0*c,.8044459223747253*c,0,0,0,1,0];this._loadMatrix(d,l)},ColorMatrixFilter.prototype.lsd=function(c){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],c)},ColorMatrixFilter.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(c){this.uniforms.m=c},enumerable:!1,configurable:!0}),Object.defineProperty(ColorMatrixFilter.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(c){this.uniforms.uAlpha=c},enumerable:!1,configurable:!0}),ColorMatrixFilter}(G.m);Ae.prototype.grayscale=Ae.prototype.greyscale;var filter_displacement_es_extendStatics=function(c,l){return(filter_displacement_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};var Ce=function(c){function DisplacementFilter(l,d){var f=this,m=new E.d;return l.renderable=!1,(f=c.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:l._texture,filterMatrix:m,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=l,f.maskMatrix=m,null==d&&(d=20),f.scale=new E.g(d,d),f}return function filter_displacement_es_extends(c,l){function __(){this.constructor=c}filter_displacement_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}(DisplacementFilter,c),DisplacementFilter.prototype.apply=function(c,l,d,f){this.uniforms.filterMatrix=c.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var m=this.maskSprite.worldTransform,_=Math.sqrt(m.a*m.a+m.b*m.b),y=Math.sqrt(m.c*m.c+m.d*m.d);0!==_&&0!==y&&(this.uniforms.rotation[0]=m.a/_,this.uniforms.rotation[1]=m.b/_,this.uniforms.rotation[2]=m.c/y,this.uniforms.rotation[3]=m.d/y),c.applyFilter(this,l,d,f)},Object.defineProperty(DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(c){this.uniforms.mapSampler=c},enumerable:!1,configurable:!0}),DisplacementFilter}(G.m),filter_fxaa_es_extendStatics=function(c,l){return(filter_fxaa_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};var Me=function(c){function FXAAFilter(){return c.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function filter_fxaa_es_extends(c,l){function __(){this.constructor=c}filter_fxaa_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}(FXAAFilter,c),FXAAFilter}(G.m),filter_noise_es_extendStatics=function(c,l){return(filter_noise_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};var Re=function(c){function NoiseFilter(l,d){void 0===l&&(l=.5),void 0===d&&(d=Math.random());var f=c.call(this,G.N,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return f.noise=l,f.seed=d,f}return function filter_noise_es_extends(c,l){function __(){this.constructor=c}filter_noise_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}(NoiseFilter,c),Object.defineProperty(NoiseFilter.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(c){this.uniforms.uNoise=c},enumerable:!1,configurable:!0}),Object.defineProperty(NoiseFilter.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(c){this.uniforms.uSeed=c},enumerable:!1,configurable:!0}),NoiseFilter}(G.m),De=new E.d;w.prototype._cacheAsBitmap=!1,w.prototype._cacheData=null;var Fe=function Fe(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(w.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(c){var l;this._cacheAsBitmap!==c&&(this._cacheAsBitmap=c,c?(this._cacheData||(this._cacheData=new Fe),(l=this._cacheData).originalRender=this.render,l.originalRenderCanvas=this.renderCanvas,l.originalUpdateTransform=this.updateTransform,l.originalCalculateBounds=this.calculateBounds,l.originalGetLocalBounds=this.getLocalBounds,l.originalDestroy=this.destroy,l.originalContainsPoint=this.containsPoint,l.originalMask=this._mask,l.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((l=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=l.originalRender,this.renderCanvas=l.originalRenderCanvas,this.calculateBounds=l.originalCalculateBounds,this.getLocalBounds=l.originalGetLocalBounds,this.destroy=l.originalDestroy,this.updateTransform=l.originalUpdateTransform,this.containsPoint=l.originalContainsPoint,this._mask=l.originalMask,this.filterArea=l.originalFilterArea))}}}),w.prototype._renderCached=function _renderCached(c){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(c),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(c))},w.prototype._initCachedDisplayObject=function _initCachedDisplayObject(c){if(!this._cacheData||!this._cacheData.sprite){var l=this.alpha;this.alpha=1,c.batch.flush();var d=this.getLocalBounds(null,!0).clone();if(this.filters){var f=this.filters[0].padding;d.pad(f)}d.ceil(S.b.RESOLUTION);var m=c.renderTexture.current,_=c.renderTexture.sourceFrame.clone(),y=c.projection.transform,g=G.z.create({width:d.width,height:d.height}),v="cacheAsBitmap_"+Object(T.uid)();this._cacheData.textureCacheId=v,G.e.addToCache(g.baseTexture,v),G.G.addToCache(g,v);var b=this.transform.localTransform.copyTo(De).invert().translate(-d.x,-d.y);this.render=this._cacheData.originalRender,c.render(this,g,!0,b,!1),c.projection.transform=y,c.renderTexture.bind(m,_),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var x=new wt(g);x.transform.worldTransform=this.transform.worldTransform,x.anchor.x=-d.x/d.width,x.anchor.y=-d.y/d.height,x.alpha=l,x._bounds=this._bounds,this._cacheData.sprite=x,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=x.containsPoint.bind(x)}},w.prototype._renderCachedCanvas=function _renderCachedCanvas(c){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(c),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(c))},w.prototype._initCachedDisplayObjectCanvas=function _initCachedDisplayObjectCanvas(c){if(!this._cacheData||!this._cacheData.sprite){var l=this.getLocalBounds(null,!0),d=this.alpha;this.alpha=1;var f=c.context,m=c._projTransform;l.ceil(S.b.RESOLUTION);var _=G.z.create({width:l.width,height:l.height}),y="cacheAsBitmap_"+Object(T.uid)();this._cacheData.textureCacheId=y,G.e.addToCache(_.baseTexture,y),G.G.addToCache(_,y);var g=De;this.transform.localTransform.copyTo(g),g.invert(),g.tx-=l.x,g.ty-=l.y,this.renderCanvas=this._cacheData.originalRenderCanvas,c.render(this,_,!0,g,!1),c.context=f,c._projTransform=m,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var v=new wt(_);v.transform.worldTransform=this.transform.worldTransform,v.anchor.x=-l.x/l.width,v.anchor.y=-l.y/l.height,v.alpha=d,v._bounds=this._bounds,this._cacheData.sprite=v,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=c._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=v.containsPoint.bind(v)}},w.prototype._calculateCachedBounds=function _calculateCachedBounds(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},w.prototype._getCachedLocalBounds=function _getCachedLocalBounds(){return this._cacheData.sprite.getLocalBounds(null)},w.prototype._destroyCachedDisplayObject=function _destroyCachedDisplayObject(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,G.e.removeFromCache(this._cacheData.textureCacheId),G.G.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},w.prototype._cacheAsBitmapDestroy=function _cacheAsBitmapDestroy(c){this.cacheAsBitmap=!1,this.destroy(c)},w.prototype.name=null,I.prototype.getChildByName=function getChildByName(c,l){for(var d=0,f=this.children.length;d<f;d++)if(this.children[d].name===c)return this.children[d];if(l)for(d=0,f=this.children.length;d<f;d++){if(this.children[d].getChildByName){var m=this.children[d].getChildByName(c,!0);if(m)return m}}return null},w.prototype.getGlobalPosition=function getGlobalPosition(c,l){return void 0===c&&(c=new E.g),void 0===l&&(l=!1),this.parent?this.parent.toGlobal(this.position,c,l):(c.x=this.position.x,c.y=this.position.y),c};var mesh_extras_es_extendStatics=function(c,l){return(mesh_extras_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};function mesh_extras_es_extends(c,l){function __(){this.constructor=c}mesh_extras_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}var Le=function(c){function PlaneGeometry(l,d,f,m){void 0===l&&(l=100),void 0===d&&(d=100),void 0===f&&(f=10),void 0===m&&(m=10);var _=c.call(this)||this;return _.segWidth=f,_.segHeight=m,_.width=l,_.height=d,_.build(),_}return mesh_extras_es_extends(PlaneGeometry,c),PlaneGeometry.prototype.build=function(){for(var c=this.segWidth*this.segHeight,l=[],d=[],f=[],m=this.segWidth-1,_=this.segHeight-1,y=this.width/m,g=this.height/_,v=0;v<c;v++){var b=v%this.segWidth,x=v/this.segWidth|0;l.push(b*y,x*g),d.push(b/m,x/_)}var T=m*_;for(v=0;v<T;v++){var S=v%m,E=v/m|0,P=E*this.segWidth+S,w=E*this.segWidth+S+1,O=(E+1)*this.segWidth+S,I=(E+1)*this.segWidth+S+1;f.push(P,w,O,w,I,O)}this.buffers[0].data=new Float32Array(l),this.buffers[1].data=new Float32Array(d),this.indexBuffer.data=new Uint16Array(f),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},PlaneGeometry}(Zt),Be=function(c){function RopeGeometry(l,d,f){void 0===l&&(l=200),void 0===f&&(f=0);var m=c.call(this,new Float32Array(4*d.length),new Float32Array(4*d.length),new Uint16Array(6*(d.length-1)))||this;return m.points=d,m._width=l,m.textureScale=f,m.build(),m}return mesh_extras_es_extends(RopeGeometry,c),Object.defineProperty(RopeGeometry.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),RopeGeometry.prototype.build=function(){var c=this.points;if(c){var l=this.getBuffer("aVertexPosition"),d=this.getBuffer("aTextureCoord"),f=this.getIndex();if(!(c.length<1)){l.data.length/4!==c.length&&(l.data=new Float32Array(4*c.length),d.data=new Float32Array(4*c.length),f.data=new Uint16Array(6*(c.length-1)));var m=d.data,_=f.data;m[0]=0,m[1]=0,m[2]=0,m[3]=1;for(var y=0,g=c[0],v=this._width*this.textureScale,b=c.length,x=0;x<b;x++){var T=4*x;if(this.textureScale>0){var S=g.x-c[x].x,E=g.y-c[x].y,P=Math.sqrt(S*S+E*E);g=c[x],y+=P/v}else y=x/(b-1);m[T]=y,m[T+1]=0,m[T+2]=y,m[T+3]=1}var w=0;for(x=0;x<b-1;x++){T=2*x;_[w++]=T,_[w++]=T+1,_[w++]=T+2,_[w++]=T+2,_[w++]=T+1,_[w++]=T+3}d.update(),f.update(),this.updateVertices()}}},RopeGeometry.prototype.updateVertices=function(){var c=this.points;if(!(c.length<1)){for(var l,d=c[0],f=0,m=0,_=this.buffers[0].data,y=c.length,g=0;g<y;g++){var v=c[g],b=4*g;m=-((l=g<c.length-1?c[g+1]:v).x-d.x),f=l.y-d.y;var x=Math.sqrt(f*f+m*m),T=this.textureScale>0?this.textureScale*this._width/2:this._width/2;f/=x,m/=x,f*=T,m*=T,_[b]=v.x+f,_[b+1]=v.y+m,_[b+2]=v.x-f,_[b+3]=v.y-m,d=v}this.buffers[0].update()}},RopeGeometry.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},RopeGeometry}(Zt),Ne=function(c){function SimpleRope(l,d,f){void 0===f&&(f=0);var m=this,_=new Be(l.height,d,f),y=new Kt(l);return f>0&&(l.baseTexture.wrapMode=W.q.REPEAT),(m=c.call(this,_,y)||this).autoUpdate=!0,m}return mesh_extras_es_extends(SimpleRope,c),SimpleRope.prototype._render=function(l){var d=this.geometry;(this.autoUpdate||d._width!==this.shader.texture.height)&&(d._width=this.shader.texture.height,d.update()),c.prototype._render.call(this,l)},SimpleRope}(qt),ke=function(c){function SimplePlane(l,d,f){var m=this,_=new Le(l.width,l.height,d,f),y=new Kt(G.G.WHITE);return(m=c.call(this,_,y)||this).texture=l,m}return mesh_extras_es_extends(SimplePlane,c),SimplePlane.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var c=this.geometry;c.width=this.shader.texture.width,c.height=this.shader.texture.height,c.build()},Object.defineProperty(SimplePlane.prototype,"texture",{get:function(){return this.shader.texture},set:function(c){this.shader.texture!==c&&(this.shader.texture=c,this._textureID=-1,c.baseTexture.valid?this.textureUpdated():c.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),SimplePlane.prototype._render=function(l){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),c.prototype._render.call(this,l)},SimplePlane.prototype.destroy=function(l){this.shader.texture.off("update",this.textureUpdated,this),c.prototype.destroy.call(this,l)},SimplePlane}(qt),je=function(c){function SimpleMesh(l,d,f,m,_){void 0===l&&(l=G.G.EMPTY);var y=this,g=new Zt(d,f,m);g.getBuffer("aVertexPosition").static=!1;var v=new Kt(l);return(y=c.call(this,g,v,null,_)||this).autoUpdate=!0,y}return mesh_extras_es_extends(SimpleMesh,c),Object.defineProperty(SimpleMesh.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(c){this.geometry.getBuffer("aVertexPosition").data=c},enumerable:!1,configurable:!0}),SimpleMesh.prototype._render=function(l){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),c.prototype._render.call(this,l)},SimpleMesh}(qt),Ue=function(c){function NineSlicePlane(l,d,f,m,_){void 0===d&&(d=10),void 0===f&&(f=10),void 0===m&&(m=10),void 0===_&&(_=10);var y=c.call(this,G.G.WHITE,4,4)||this;return y._origWidth=l.orig.width,y._origHeight=l.orig.height,y._width=y._origWidth,y._height=y._origHeight,y._leftWidth=d,y._rightWidth=m,y._topHeight=f,y._bottomHeight=_,y.texture=l,y}return mesh_extras_es_extends(NineSlicePlane,c),NineSlicePlane.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(NineSlicePlane.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(c){this.geometry.getBuffer("aVertexPosition").data=c},enumerable:!1,configurable:!0}),NineSlicePlane.prototype.updateHorizontalVertices=function(){var c=this.vertices,l=this._getMinScale();c[9]=c[11]=c[13]=c[15]=this._topHeight*l,c[17]=c[19]=c[21]=c[23]=this._height-this._bottomHeight*l,c[25]=c[27]=c[29]=c[31]=this._height},NineSlicePlane.prototype.updateVerticalVertices=function(){var c=this.vertices,l=this._getMinScale();c[2]=c[10]=c[18]=c[26]=this._leftWidth*l,c[4]=c[12]=c[20]=c[28]=this._width-this._rightWidth*l,c[6]=c[14]=c[22]=c[30]=this._width},NineSlicePlane.prototype._getMinScale=function(){var c=this._leftWidth+this._rightWidth,l=this._width>c?1:this._width/c,d=this._topHeight+this._bottomHeight,f=this._height>d?1:this._height/d;return Math.min(l,f)},Object.defineProperty(NineSlicePlane.prototype,"width",{get:function(){return this._width},set:function(c){this._width=c,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"height",{get:function(){return this._height},set:function(c){this._height=c,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(c){this._leftWidth=c,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(c){this._rightWidth=c,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"topHeight",{get:function(){return this._topHeight},set:function(c){this._topHeight=c,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(c){this._bottomHeight=c,this._refresh()},enumerable:!1,configurable:!0}),NineSlicePlane.prototype._refresh=function(){var c=this.texture,l=this.geometry.buffers[1].data;this._origWidth=c.orig.width,this._origHeight=c.orig.height;var d=1/this._origWidth,f=1/this._origHeight;l[0]=l[8]=l[16]=l[24]=0,l[1]=l[3]=l[5]=l[7]=0,l[6]=l[14]=l[22]=l[30]=1,l[25]=l[27]=l[29]=l[31]=1,l[2]=l[10]=l[18]=l[26]=d*this._leftWidth,l[4]=l[12]=l[20]=l[28]=1-d*this._rightWidth,l[9]=l[11]=l[13]=l[15]=f*this._topHeight,l[17]=l[19]=l[21]=l[23]=1-f*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},NineSlicePlane}(ke),Ge=d(7),sprite_animated_es_extendStatics=function(c,l){return(sprite_animated_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};var Xe=function(c){function AnimatedSprite(l,d){void 0===d&&(d=!0);var f=c.call(this,l[0]instanceof G.G?l[0]:l[0].texture)||this;return f._textures=null,f._durations=null,f._autoUpdate=d,f._isConnectedToTicker=!1,f.animationSpeed=1,f.loop=!0,f.updateAnchor=!1,f.onComplete=null,f.onFrameChange=null,f.onLoop=null,f._currentTime=0,f._playing=!1,f._previousFrame=null,f.textures=l,f}return function sprite_animated_es_extends(c,l){function __(){this.constructor=c}sprite_animated_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}(AnimatedSprite,c),AnimatedSprite.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(R.a.shared.remove(this.update,this),this._isConnectedToTicker=!1))},AnimatedSprite.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(R.a.shared.add(this.update,this,R.c.HIGH),this._isConnectedToTicker=!0))},AnimatedSprite.prototype.gotoAndStop=function(c){this.stop();var l=this.currentFrame;this._currentTime=c,l!==this.currentFrame&&this.updateTexture()},AnimatedSprite.prototype.gotoAndPlay=function(c){var l=this.currentFrame;this._currentTime=c,l!==this.currentFrame&&this.updateTexture(),this.play()},AnimatedSprite.prototype.update=function(c){var l=this.animationSpeed*c,d=this.currentFrame;if(null!==this._durations){var f=this._currentTime%1*this._durations[this.currentFrame];for(f+=l/60*1e3;f<0;)this._currentTime--,f+=this._durations[this.currentFrame];var m=Math.sign(this.animationSpeed*c);for(this._currentTime=Math.floor(this._currentTime);f>=this._durations[this.currentFrame];)f-=this._durations[this.currentFrame]*m,this._currentTime+=m;this._currentTime+=f/this._durations[this.currentFrame]}else this._currentTime+=l;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):d!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<d||this.animationSpeed<0&&this.currentFrame>d)&&this.onLoop(),this.updateTexture())},AnimatedSprite.prototype.updateTexture=function(){var c=this.currentFrame;this._previousFrame!==c&&(this._previousFrame=c,this._texture=this._textures[c],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},AnimatedSprite.prototype.destroy=function(l){this.stop(),c.prototype.destroy.call(this,l),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},AnimatedSprite.fromFrames=function(c){for(var l=[],d=0;d<c.length;++d)l.push(G.G.from(c[d]));return new AnimatedSprite(l)},AnimatedSprite.fromImages=function(c){for(var l=[],d=0;d<c.length;++d)l.push(G.G.from(c[d]));return new AnimatedSprite(l)},Object.defineProperty(AnimatedSprite.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"textures",{get:function(){return this._textures},set:function(c){if(c[0]instanceof G.G)this._textures=c,this._durations=null;else{this._textures=[],this._durations=[];for(var l=0;l<c.length;l++)this._textures.push(c[l].texture),this._durations.push(c[l].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"currentFrame",{get:function(){var c=Math.floor(this._currentTime)%this._textures.length;return c<0&&(c+=this._textures.length),c},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(c){c!==this._autoUpdate&&(this._autoUpdate=c,!this._autoUpdate&&this._isConnectedToTicker?(R.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(R.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),AnimatedSprite}(wt),pixi_es_extendStatics=function(c,l){return(pixi_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};function pixi_es_extends(c,l){function __(){this.constructor=c}pixi_es_extendStatics(c,l),c.prototype=null===l?Object.create(l):(__.prototype=l.prototype,new __)}var He="5.0.0";function useDeprecated(){var c=this;Object.defineProperties(c,{SVG_SIZE:{get:function(){return Object(T.deprecation)(He,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),c.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return Object(T.deprecation)(He,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),c.Transform}},TransformBase:{get:function(){return Object(T.deprecation)(He,"PIXI.TransformBase class has been removed, use PIXI.Transform"),c.Transform}},TRANSFORM_MODE:{get:function(){return Object(T.deprecation)(He,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return Object(T.deprecation)(He,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),c.Renderer}},CanvasRenderTarget:{get:function(){return Object(T.deprecation)(He,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),c.utils.CanvasRenderTarget}},loader:{get:function(){return Object(T.deprecation)(He,"PIXI.loader instance has moved to PIXI.Loader.shared"),c.Loader.shared}},FilterManager:{get:function(){return Object(T.deprecation)(He,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),c.systems.FilterSystem}},CanvasTinter:{get:function(){return Object(T.deprecation)("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),c.canvasUtils}},GroupD8:{get:function(){return Object(T.deprecation)("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),c.groupD8}}}),c.accessibility={},Object.defineProperties(c.accessibility,{AccessibilityManager:{get:function(){return Object(T.deprecation)("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),c.AccessibilityManager}}}),c.interaction={},Object.defineProperties(c.interaction,{InteractionManager:{get:function(){return Object(T.deprecation)("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),c.InteractionManager}},InteractionData:{get:function(){return Object(T.deprecation)("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),c.InteractionData}},InteractionEvent:{get:function(){return Object(T.deprecation)("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),c.InteractionEvent}}}),c.prepare={},Object.defineProperties(c.prepare,{BasePrepare:{get:function(){return Object(T.deprecation)("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),c.BasePrepare}},Prepare:{get:function(){return Object(T.deprecation)("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),c.Prepare}},CanvasPrepare:{get:function(){return Object(T.deprecation)("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),c.CanvasPrepare}}}),c.extract={},Object.defineProperties(c.extract,{Extract:{get:function(){return Object(T.deprecation)("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),c.Extract}},CanvasExtract:{get:function(){return Object(T.deprecation)("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),c.CanvasExtract}}}),c.extras={},Object.defineProperties(c.extras,{TilingSprite:{get:function(){return Object(T.deprecation)(He,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),c.TilingSprite}},TilingSpriteRenderer:{get:function(){return Object(T.deprecation)(He,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),c.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return Object(T.deprecation)(He,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),c.AnimatedSprite}},BitmapText:{get:function(){return Object(T.deprecation)(He,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),c.BitmapText}}}),c.TilingSprite.fromFrame=function fromFrame(l,d,f){return Object(T.deprecation)("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),c.TilingSprite.from(l,{width:d,height:f})},c.TilingSprite.fromImage=function fromImage(l,d,f,m){return void 0===m&&(m={}),Object(T.deprecation)("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),m&&"object"!=typeof m&&(m={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),m.width=d,m.height=f,c.TilingSprite.from(l,m)},Object.defineProperties(c.utils,{getSvgSize:{get:function(){return Object(T.deprecation)(He,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),c.resources.SVGResource.getSize}}}),c.mesh={},Object.defineProperties(c.mesh,{Mesh:{get:function(){return Object(T.deprecation)(He,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),c.SimpleMesh}},NineSlicePlane:{get:function(){return Object(T.deprecation)(He,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),c.NineSlicePlane}},Plane:{get:function(){return Object(T.deprecation)(He,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),c.SimplePlane}},Rope:{get:function(){return Object(T.deprecation)(He,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),c.SimpleRope}},RawMesh:{get:function(){return Object(T.deprecation)(He,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),c.Mesh}},CanvasMeshRenderer:{get:function(){return Object(T.deprecation)(He,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),c.CanvasMeshRenderer}},MeshRenderer:{get:function(){return Object(T.deprecation)(He,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),c.MeshRenderer}}}),c.particles={},Object.defineProperties(c.particles,{ParticleContainer:{get:function(){return Object(T.deprecation)(He,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),c.ParticleContainer}},ParticleRenderer:{get:function(){return Object(T.deprecation)(He,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),c.ParticleRenderer}}}),c.ticker={},Object.defineProperties(c.ticker,{Ticker:{get:function(){return Object(T.deprecation)(He,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),c.Ticker}},shared:{get:function(){return Object(T.deprecation)(He,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),c.Ticker.shared}}}),c.loaders={},Object.defineProperties(c.loaders,{Loader:{get:function(){return Object(T.deprecation)(He,"PIXI.loaders.Loader class has moved to PIXI.Loader"),c.Loader}},Resource:{get:function(){return Object(T.deprecation)(He,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),c.LoaderResource}},bitmapFontParser:{get:function(){return Object(T.deprecation)(He,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),c.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){Object(T.deprecation)(He,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return Object(T.deprecation)(He,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),c.SpritesheetLoader.use}},getResourcePath:{get:function(){return Object(T.deprecation)(He,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),c.SpritesheetLoader.getResourcePath}}}),c.Loader.addPixiMiddleware=function addPixiMiddleware(l){return Object(T.deprecation)(He,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),c.loaders.Loader.registerPlugin({use:l()})};var eventToSignal=function(c){return"on"+c.charAt(0).toUpperCase()+c.slice(1)};Object.assign(c.Loader.prototype,{on:function(c){var l=eventToSignal(c);Object(T.deprecation)(He,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+l+".add")},once:function(c){var l=eventToSignal(c);Object(T.deprecation)(He,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+l+".once")},off:function(c){var l=eventToSignal(c);Object(T.deprecation)(He,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+l+".detach")}}),Object.defineProperty(c.extract,"WebGLExtract",{get:function(){return Object(T.deprecation)(He,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),c.Extract}}),Object.defineProperty(c.prepare,"WebGLPrepare",{get:function(){return Object(T.deprecation)(He,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),c.Prepare}}),c.Container.prototype._renderWebGL=function _renderWebGL(c){Object(T.deprecation)(He,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(c)},c.Container.prototype.renderWebGL=function renderWebGL(c){Object(T.deprecation)(He,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(c)},c.DisplayObject.prototype.renderWebGL=function renderWebGL(c){Object(T.deprecation)(He,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(c)},c.Container.prototype.renderAdvancedWebGL=function renderAdvancedWebGL(c){Object(T.deprecation)(He,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(c)},Object.defineProperties(c.settings,{TRANSFORM_MODE:{get:function(){return Object(T.deprecation)(He,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){Object(T.deprecation)(He,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var l=c.BaseTexture;l.prototype.loadSource=function loadSource(l){Object(T.deprecation)(He,"PIXI.BaseTexture.loadSource method has been deprecated");var d=c.resources.autoDetectResource(l);d.internal=!0,this.setResource(d),this.update()};var d=!1;Object.defineProperties(l.prototype,{hasLoaded:{get:function(){return Object(T.deprecation)(He,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var c;return Object(T.deprecation)(He,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),null===(c=this.resource)||void 0===c?void 0:c.url},set:function(c){Object(T.deprecation)(He,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=c)}},source:{get:function(){return Object(T.deprecation)(He,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(c){Object(T.deprecation)(He,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=c)}},premultiplyAlpha:{get:function(){return Object(T.deprecation)("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(c){Object(T.deprecation)("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(c)}},_id:{get:function(){return d||(Object(T.deprecation)("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),d=!0),this._batchLocation},set:function(c){this._batchLocation=c}}}),l.fromImage=function fromImage(c,d,f,m){Object(T.deprecation)(He,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var _={scale:m,crossorigin:d};return l.from(c,{scaleMode:f,resourceOptions:_})},l.fromCanvas=function fromCanvas(c,d){return Object(T.deprecation)(He,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),l.from(c,{scaleMode:d})},l.fromSVG=function fromSVG(c,d,f,m){Object(T.deprecation)(He,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var _={scale:m,crossorigin:d};return l.from(c,{scaleMode:f,resourceOptions:_})},Object.defineProperties(c.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return Object(T.deprecation)("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(c){Object(T.deprecation)("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(c)}}}),c.Point.prototype.copy=function copy(c){return Object(T.deprecation)(He,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(c)},c.ObservablePoint.prototype.copy=function copy(c){return Object(T.deprecation)(He,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(c)},c.Rectangle.prototype.copy=function copy(c){return Object(T.deprecation)(He,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(c)},c.Matrix.prototype.copy=function copy(c){return Object(T.deprecation)(He,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(c)},c.systems.StateSystem.prototype.setState=function setState(c){return Object(T.deprecation)("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(c)},Object.assign(c.systems.FilterSystem.prototype,{getRenderTarget:function(c,l){return Object(T.deprecation)(He,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,l)},returnRenderTarget:function(c){Object(T.deprecation)(He,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(c)},calculateScreenSpaceMatrix:function(c){Object(T.deprecation)(He,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var l=c.identity(),d=this.activeState,f=d.sourceFrame,m=d.destinationFrame;return l.translate(f.x/m.width,f.y/m.height),l.scale(m.width,m.height),l},calculateNormalizedScreenSpaceMatrix:function(c){Object(T.deprecation)(He,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var l=this.activeState,d=l.sourceFrame,f=l.destinationFrame,m=c.identity();m.translate(d.x/f.width,d.y/f.height);var _=f.width/d.width,y=f.height/d.height;return m.scale(_,y),m}}),Object.defineProperties(c.RenderTexture.prototype,{sourceFrame:{get:function(){return Object(T.deprecation)(He,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return Object(T.deprecation)(He,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var f=function(c){function BlurXFilter(l,d,f,m){return Object(T.deprecation)(He,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),c.call(this,!0,l,d,f,m)||this}return pixi_es_extends(BlurXFilter,c),BlurXFilter}(c.filters.BlurFilterPass),m=function(c){function BlurYFilter(l,d,f,m){return Object(T.deprecation)(He,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),c.call(this,!1,l,d,f,m)||this}return pixi_es_extends(BlurYFilter,c),BlurYFilter}(c.filters.BlurFilterPass);Object.assign(c.filters,{BlurXFilter:f,BlurYFilter:m});var _=c.Sprite,y=c.Texture,g=c.Graphics;function spriteFrom(c,l,d,f){return Object(T.deprecation)(He,"PIXI.Sprite."+c+" method is deprecated, use PIXI.Sprite.from"),_.from(l,{resourceOptions:{scale:f,crossorigin:d}})}function textureFrom(c,l,d,f){return Object(T.deprecation)(He,"PIXI.Texture."+c+" method is deprecated, use PIXI.Texture.from"),y.from(l,{resourceOptions:{scale:f,crossorigin:d}})}g.prototype.generateCanvasTexture||(g.prototype.generateCanvasTexture=function generateCanvasTexture(){Object(T.deprecation)(He,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(g.prototype,"graphicsData",{get:function(){return Object(T.deprecation)(He,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),_.fromImage=spriteFrom.bind(null,"fromImage"),_.fromSVG=spriteFrom.bind(null,"fromSVG"),_.fromCanvas=spriteFrom.bind(null,"fromCanvas"),_.fromVideo=spriteFrom.bind(null,"fromVideo"),_.fromFrame=spriteFrom.bind(null,"fromFrame"),y.fromImage=textureFrom.bind(null,"fromImage"),y.fromSVG=textureFrom.bind(null,"fromSVG"),y.fromCanvas=textureFrom.bind(null,"fromCanvas"),y.fromVideo=textureFrom.bind(null,"fromVideo"),y.fromFrame=textureFrom.bind(null,"fromFrame"),Object.defineProperty(c.AbstractRenderer.prototype,"autoResize",{get:function(){return Object(T.deprecation)(He,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(c){Object(T.deprecation)(He,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=c}}),Object.defineProperty(c.Renderer.prototype,"textureManager",{get:function(){return Object(T.deprecation)(He,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),c.utils.mixins={mixin:function(){Object(T.deprecation)(He,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){Object(T.deprecation)(He,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){Object(T.deprecation)(He,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(c.BitmapText.prototype,"font",{get:function(){return Object(T.deprecation)("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(l){if(Object(T.deprecation)("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),l){var d={font:l};this._upgradeStyle(d),d.fontSize=d.fontSize||c.BitmapFont.available[d.fontName].size,this._fontName=d.fontName,this._fontSize=d.fontSize,this.dirty=!0}}})}G.B.registerPlugin("accessibility",C),G.B.registerPlugin("extract",V),G.B.registerPlugin("interaction",U),G.B.registerPlugin("particle",J),G.B.registerPlugin("prepare",Bt),G.B.registerPlugin("batch",G.i),G.B.registerPlugin("tilingSprite",zt),Y.b.registerPlugin(se),Y.b.registerPlugin(jt),X.registerPlugin(R.b),X.registerPlugin(Y.a);var ze="5.3.7",Ve={AlphaFilter:ae,BlurFilter:Ie,BlurFilterPass:Oe,ColorMatrixFilter:Ae,DisplacementFilter:Ce,FXAAFilter:Me,NoiseFilter:Re}},function(c,l,d){var f=d(20),m=d(30),_=d(44);c.exports=f?function(c,l,d){return m.f(c,l,_(1,d))}:function(c,l,d){return c[l]=d,c}},function(c,l,d){"use strict";var f=d(91),m=d(93);function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}l.parse=urlParse,l.resolve=function urlResolve(c,l){return urlParse(c,!1,!0).resolve(l)},l.resolveObject=function urlResolveObject(c,l){return c?urlParse(c,!1,!0).resolveObject(l):l},l.format=function urlFormat(c){m.isString(c)&&(c=urlParse(c));return c instanceof Url?c.format():Url.prototype.format.call(c)},l.Url=Url;var _=/^([a-z0-9.+-]+:)/i,y=/:[0-9]*$/,g=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,v=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),b=["'"].concat(v),x=["%","/","?",";","#"].concat(b),T=["/","?","#"],S=/^[+a-z0-9A-Z_-]{0,63}$/,E=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,P={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},O={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},I=d(94);function urlParse(c,l,d){if(c&&m.isObject(c)&&c instanceof Url)return c;var f=new Url;return f.parse(c,l,d),f}Url.prototype.parse=function(c,l,d){if(!m.isString(c))throw new TypeError("Parameter 'url' must be a string, not "+typeof c);var y=c.indexOf("?"),v=-1!==y&&y<c.indexOf("#")?"?":"#",A=c.split(v);A[0]=A[0].replace(/\\/g,"/");var C=c=A.join(v);if(C=C.trim(),!d&&1===c.split("#").length){var R=g.exec(C);if(R)return this.path=C,this.href=C,this.pathname=R[1],R[2]?(this.search=R[2],this.query=l?I.parse(this.search.substr(1)):this.search.substr(1)):l&&(this.search="",this.query={}),this}var D=_.exec(C);if(D){var L=(D=D[0]).toLowerCase();this.protocol=L,C=C.substr(D.length)}if(d||D||C.match(/^\/\/[^@\/]+@[^@\/]+/)){var B="//"===C.substr(0,2);!B||D&&w[D]||(C=C.substr(2),this.slashes=!0)}if(!w[D]&&(B||D&&!O[D])){for(var N,k,j=-1,U=0;U<T.length;U++){-1!==(G=C.indexOf(T[U]))&&(-1===j||G<j)&&(j=G)}-1!==(k=-1===j?C.lastIndexOf("@"):C.lastIndexOf("@",j))&&(N=C.slice(0,k),C=C.slice(k+1),this.auth=decodeURIComponent(N)),j=-1;for(U=0;U<x.length;U++){var G;-1!==(G=C.indexOf(x[U]))&&(-1===j||G<j)&&(j=G)}-1===j&&(j=C.length),this.host=C.slice(0,j),C=C.slice(j),this.parseHost(),this.hostname=this.hostname||"";var X="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!X)for(var H=this.hostname.split(/\./),z=(U=0,H.length);U<z;U++){var V=H[U];if(V&&!V.match(S)){for(var Y="",W=0,q=V.length;W<q;W++)V.charCodeAt(W)>127?Y+="x":Y+=V[W];if(!Y.match(S)){var K=H.slice(0,U),Z=H.slice(U+1),Q=V.match(E);Q&&(K.push(Q[1]),Z.unshift(Q[2])),Z.length&&(C="/"+Z.join(".")+C),this.hostname=K.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),X||(this.hostname=f.toASCII(this.hostname));var J=this.port?":"+this.port:"",$=this.hostname||"";this.host=$+J,this.href+=this.host,X&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==C[0]&&(C="/"+C))}if(!P[L])for(U=0,z=b.length;U<z;U++){var tt=b[U];if(-1!==C.indexOf(tt)){var et=encodeURIComponent(tt);et===tt&&(et=escape(tt)),C=C.split(tt).join(et)}}var rt=C.indexOf("#");-1!==rt&&(this.hash=C.substr(rt),C=C.slice(0,rt));var it=C.indexOf("?");if(-1!==it?(this.search=C.substr(it),this.query=C.substr(it+1),l&&(this.query=I.parse(this.query)),C=C.slice(0,it)):l&&(this.search="",this.query={}),C&&(this.pathname=C),O[L]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){J=this.pathname||"";var nt=this.search||"";this.path=J+nt}return this.href=this.format(),this},Url.prototype.format=function(){var c=this.auth||"";c&&(c=(c=encodeURIComponent(c)).replace(/%3A/i,":"),c+="@");var l=this.protocol||"",d=this.pathname||"",f=this.hash||"",_=!1,y="";this.host?_=c+this.host:this.hostname&&(_=c+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(_+=":"+this.port)),this.query&&m.isObject(this.query)&&Object.keys(this.query).length&&(y=I.stringify(this.query));var g=this.search||y&&"?"+y||"";return l&&":"!==l.substr(-1)&&(l+=":"),this.slashes||(!l||O[l])&&!1!==_?(_="//"+(_||""),d&&"/"!==d.charAt(0)&&(d="/"+d)):_||(_=""),f&&"#"!==f.charAt(0)&&(f="#"+f),g&&"?"!==g.charAt(0)&&(g="?"+g),l+_+(d=d.replace(/[?#]/g,(function(c){return encodeURIComponent(c)})))+(g=g.replace("#","%23"))+f},Url.prototype.resolve=function(c){return this.resolveObject(urlParse(c,!1,!0)).format()},Url.prototype.resolveObject=function(c){if(m.isString(c)){var l=new Url;l.parse(c,!1,!0),c=l}for(var d=new Url,f=Object.keys(this),_=0;_<f.length;_++){var y=f[_];d[y]=this[y]}if(d.hash=c.hash,""===c.href)return d.href=d.format(),d;if(c.slashes&&!c.protocol){for(var g=Object.keys(c),v=0;v<g.length;v++){var b=g[v];"protocol"!==b&&(d[b]=c[b])}return O[d.protocol]&&d.hostname&&!d.pathname&&(d.path=d.pathname="/"),d.href=d.format(),d}if(c.protocol&&c.protocol!==d.protocol){if(!O[c.protocol]){for(var x=Object.keys(c),T=0;T<x.length;T++){var S=x[T];d[S]=c[S]}return d.href=d.format(),d}if(d.protocol=c.protocol,c.host||w[c.protocol])d.pathname=c.pathname;else{for(var E=(c.pathname||"").split("/");E.length&&!(c.host=E.shift()););c.host||(c.host=""),c.hostname||(c.hostname=""),""!==E[0]&&E.unshift(""),E.length<2&&E.unshift(""),d.pathname=E.join("/")}if(d.search=c.search,d.query=c.query,d.host=c.host||"",d.auth=c.auth,d.hostname=c.hostname||c.host,d.port=c.port,d.pathname||d.search){var P=d.pathname||"",I=d.search||"";d.path=P+I}return d.slashes=d.slashes||c.slashes,d.href=d.format(),d}var A=d.pathname&&"/"===d.pathname.charAt(0),C=c.host||c.pathname&&"/"===c.pathname.charAt(0),R=C||A||d.host&&c.pathname,D=R,L=d.pathname&&d.pathname.split("/")||[],B=(E=c.pathname&&c.pathname.split("/")||[],d.protocol&&!O[d.protocol]);if(B&&(d.hostname="",d.port=null,d.host&&(""===L[0]?L[0]=d.host:L.unshift(d.host)),d.host="",c.protocol&&(c.hostname=null,c.port=null,c.host&&(""===E[0]?E[0]=c.host:E.unshift(c.host)),c.host=null),R=R&&(""===E[0]||""===L[0])),C)d.host=c.host||""===c.host?c.host:d.host,d.hostname=c.hostname||""===c.hostname?c.hostname:d.hostname,d.search=c.search,d.query=c.query,L=E;else if(E.length)L||(L=[]),L.pop(),L=L.concat(E),d.search=c.search,d.query=c.query;else if(!m.isNullOrUndefined(c.search)){if(B)d.hostname=d.host=L.shift(),(G=!!(d.host&&d.host.indexOf("@")>0)&&d.host.split("@"))&&(d.auth=G.shift(),d.host=d.hostname=G.shift());return d.search=c.search,d.query=c.query,m.isNull(d.pathname)&&m.isNull(d.search)||(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"")),d.href=d.format(),d}if(!L.length)return d.pathname=null,d.search?d.path="/"+d.search:d.path=null,d.href=d.format(),d;for(var N=L.slice(-1)[0],k=(d.host||c.host||L.length>1)&&("."===N||".."===N)||""===N,j=0,U=L.length;U>=0;U--)"."===(N=L[U])?L.splice(U,1):".."===N?(L.splice(U,1),j++):j&&(L.splice(U,1),j--);if(!R&&!D)for(;j--;j)L.unshift("..");!R||""===L[0]||L[0]&&"/"===L[0].charAt(0)||L.unshift(""),k&&"/"!==L.join("/").substr(-1)&&L.push("");var G,X=""===L[0]||L[0]&&"/"===L[0].charAt(0);B&&(d.hostname=d.host=X?"":L.length?L.shift():"",(G=!!(d.host&&d.host.indexOf("@")>0)&&d.host.split("@"))&&(d.auth=G.shift(),d.host=d.hostname=G.shift()));return(R=R||d.host&&L.length)&&!X&&L.unshift(""),L.length?d.pathname=L.join("/"):(d.pathname=null,d.path=null),m.isNull(d.pathname)&&m.isNull(d.search)||(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"")),d.auth=c.auth||d.auth,d.slashes=d.slashes||c.slashes,d.href=d.format(),d},Url.prototype.parseHost=function(){var c=this.host,l=y.exec(c);l&&(":"!==(l=l[0])&&(this.port=l.substr(1)),c=c.substr(0,c.length-l.length)),c&&(this.hostname=c)}},function(c,l,d){var f={};f[d(38)("toStringTag")]="z",c.exports="[object z]"===String(f)},function(c,l,d){var f=d(8),m=d(26);c.exports=function(c,l){try{m(f,c,l)}catch(d){f[c]=l}return l}},function(c,l,d){var f=d(20),m=d(41),_=d(11),y=d(43),g=Object.defineProperty;l.f=f?g:function defineProperty(c,l,d){if(_(c),l=y(l,!0),_(d),m)try{return g(c,l,d)}catch(c){}if("get"in d||"set"in d)throw TypeError("Accessors not supported");return"value"in d&&(c[l]=d.value),c}},function(c,l,d){var f=d(8),m=d(26),_=d(14),y=d(29),g=d(47),v=d(62),b=v.get,x=v.enforce,T=String(String).split("String");(c.exports=function(c,l,d,g){var v=!!g&&!!g.unsafe,b=!!g&&!!g.enumerable,S=!!g&&!!g.noTargetGet;"function"==typeof d&&("string"!=typeof l||_(d,"name")||m(d,"name",l),x(d).source=T.join("string"==typeof l?l:"")),c!==f?(v?!S&&c[l]&&(b=!0):delete c[l],b?c[l]=d:m(c,l,d)):b?c[l]=d:y(l,d)})(Function.prototype,"toString",(function toString(){return"function"==typeof this&&b(this).source||g(this)}))},function(c,l){c.exports={}},function(c,l,d){var f=d(68),m=d(69);c.exports=function(c){return f(m(c))}},function(c,l,d){var f=d(72),m=d(8),aFunction=function(c){return"function"==typeof c?c:void 0};c.exports=function(c,l){return arguments.length<2?aFunction(f[c])||aFunction(m[c]):f[c]&&f[c][l]||m[c]&&m[c][l]}},function(c,l){c.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(c,l,d){"use strict";c.exports=function parseURI(c,l){if(c){l=l||{};for(var d={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},f=d.parser[l.strictMode?"strict":"loose"].exec(c),m={},_=14;_--;)m[d.key[_]]=f[_]||"";return m[d.q.name]={},m[d.key[12]].replace(d.q.parser,(function(c,l,f){l&&(m[d.q.name][l]=f)})),m}}},,function(c,l,d){var f=d(8),m=d(39),_=d(14),y=d(45),g=d(46),v=d(61),b=m("wks"),x=f.Symbol,T=v?x:x&&x.withoutSetter||y;c.exports=function(c){return _(b,c)||(g&&_(x,c)?b[c]=x[c]:b[c]=T("Symbol."+c)),b[c]}},function(c,l,d){var f=d(60),m=d(40);(c.exports=function(c,l){return m[c]||(m[c]=void 0!==l?l:{})})("versions",[]).push({version:"3.6.5",mode:f?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(c,l,d){var f=d(8),m=d(29),_="__core-js_shared__",y=f[_]||m(_,{});c.exports=y},function(c,l,d){var f=d(20),m=d(10),_=d(42);c.exports=!f&&!m((function(){return 7!=Object.defineProperty(_("div"),"a",{get:function(){return 7}}).a}))},function(c,l,d){var f=d(8),m=d(13),_=f.document,y=m(_)&&m(_.createElement);c.exports=function(c){return y?_.createElement(c):{}}},function(c,l,d){var f=d(13);c.exports=function(c,l){if(!f(c))return c;var d,m;if(l&&"function"==typeof(d=c.toString)&&!f(m=d.call(c)))return m;if("function"==typeof(d=c.valueOf)&&!f(m=d.call(c)))return m;if(!l&&"function"==typeof(d=c.toString)&&!f(m=d.call(c)))return m;throw TypeError("Can't convert object to primitive value")}},function(c,l){c.exports=function(c,l){return{enumerable:!(1&c),configurable:!(2&c),writable:!(4&c),value:l}}},function(c,l){var d=0,f=Math.random();c.exports=function(c){return"Symbol("+String(void 0===c?"":c)+")_"+(++d+f).toString(36)}},function(c,l,d){var f=d(10);c.exports=!!Object.getOwnPropertySymbols&&!f((function(){return!String(Symbol())}))},function(c,l,d){var f=d(40),m=Function.toString;"function"!=typeof f.inspectSource&&(f.inspectSource=function(c){return m.call(c)}),c.exports=f.inspectSource},function(c,l,d){var f=d(39),m=d(45),_=f("keys");c.exports=function(c){return _[c]||(_[c]=m(c))}},function(c,l){var d={}.toString;c.exports=function(c){return d.call(c).slice(8,-1)}},function(c,l,d){var f=d(20),m=d(67),_=d(44),y=d(33),g=d(43),v=d(14),b=d(41),x=Object.getOwnPropertyDescriptor;l.f=f?x:function getOwnPropertyDescriptor(c,l){if(c=y(c),l=g(l,!0),b)try{return x(c,l)}catch(c){}if(v(c,l))return _(!m.f.call(c,l),c[l])}},function(c,l,d){var f=d(14),m=d(33),_=d(74).indexOf,y=d(32);c.exports=function(c,l){var d,g=m(c),v=0,b=[];for(d in g)!f(y,d)&&f(g,d)&&b.push(d);for(;l.length>v;)f(g,d=l[v++])&&(~_(b,d)||b.push(d));return b}},function(c,l){var d=Math.ceil,f=Math.floor;c.exports=function(c){return isNaN(c=+c)?0:(c>0?f:d)(c)}},function(c,l){c.exports=function(c){if("function"!=typeof c)throw TypeError(String(c)+" is not a function");return c}},function(c,l){c.exports=function _assertThisInitialized(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}},function(c,l,d){"use strict";var f=Object.prototype.hasOwnProperty,m="~";function Events(){}function EE(c,l,d){this.fn=c,this.context=l,this.once=d||!1}function addListener(c,l,d,f,_){if("function"!=typeof d)throw new TypeError("The listener must be a function");var y=new EE(d,f||c,_),g=m?m+l:l;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],y]:c._events[g].push(y):(c._events[g]=y,c._eventsCount++),c}function clearEvent(c,l){0==--c._eventsCount?c._events=new Events:delete c._events[l]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(m=!1)),EventEmitter.prototype.eventNames=function eventNames(){var c,l,d=[];if(0===this._eventsCount)return d;for(l in c=this._events)f.call(c,l)&&d.push(m?l.slice(1):l);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(c)):d},EventEmitter.prototype.listeners=function listeners(c){var l=m?m+c:c,d=this._events[l];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,_=d.length,y=new Array(_);f<_;f++)y[f]=d[f].fn;return y},EventEmitter.prototype.listenerCount=function listenerCount(c){var l=m?m+c:c,d=this._events[l];return d?d.fn?1:d.length:0},EventEmitter.prototype.emit=function emit(c,l,d,f,_,y){var g=m?m+c:c;if(!this._events[g])return!1;var v,b,x=this._events[g],T=arguments.length;if(x.fn){switch(x.once&&this.removeListener(c,x.fn,void 0,!0),T){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,l),!0;case 3:return x.fn.call(x.context,l,d),!0;case 4:return x.fn.call(x.context,l,d,f),!0;case 5:return x.fn.call(x.context,l,d,f,_),!0;case 6:return x.fn.call(x.context,l,d,f,_,y),!0}for(b=1,v=new Array(T-1);b<T;b++)v[b-1]=arguments[b];x.fn.apply(x.context,v)}else{var S,E=x.length;for(b=0;b<E;b++)switch(x[b].once&&this.removeListener(c,x[b].fn,void 0,!0),T){case 1:x[b].fn.call(x[b].context);break;case 2:x[b].fn.call(x[b].context,l);break;case 3:x[b].fn.call(x[b].context,l,d);break;case 4:x[b].fn.call(x[b].context,l,d,f);break;default:if(!v)for(S=1,v=new Array(T-1);S<T;S++)v[S-1]=arguments[S];x[b].fn.apply(x[b].context,v)}}return!0},EventEmitter.prototype.on=function on(c,l,d){return addListener(this,c,l,d,!1)},EventEmitter.prototype.once=function once(c,l,d){return addListener(this,c,l,d,!0)},EventEmitter.prototype.removeListener=function removeListener(c,l,d,f){var _=m?m+c:c;if(!this._events[_])return this;if(!l)return clearEvent(this,_),this;var y=this._events[_];if(y.fn)y.fn!==l||f&&!y.once||d&&y.context!==d||clearEvent(this,_);else{for(var g=0,v=[],b=y.length;g<b;g++)(y[g].fn!==l||f&&!y[g].once||d&&y[g].context!==d)&&v.push(y[g]);v.length?this._events[_]=1===v.length?v[0]:v:clearEvent(this,_)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(c){var l;return c?(l=m?m+c:c,this._events[l]&&clearEvent(this,l)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=m,EventEmitter.EventEmitter=EventEmitter,c.exports=EventEmitter},function(c,l,d){"use strict";function earcut(c,l,d){d=d||2;var f,m,_,y,g,v,b,x=l&&l.length,T=x?l[0]*d:c.length,S=linkedList(c,0,T,d,!0),E=[];if(!S||S.next===S.prev)return E;if(x&&(S=function eliminateHoles(c,l,d,f){var m,_,y,g=[];for(m=0,_=l.length;m<_;m++)(y=linkedList(c,l[m]*f,m<_-1?l[m+1]*f:c.length,f,!1))===y.next&&(y.steiner=!0),g.push(getLeftmost(y));for(g.sort(compareX),m=0;m<g.length;m++)eliminateHole(g[m],d),d=filterPoints(d,d.next);return d}(c,l,S,d)),c.length>80*d){f=_=c[0],m=y=c[1];for(var P=d;P<T;P+=d)(g=c[P])<f&&(f=g),(v=c[P+1])<m&&(m=v),g>_&&(_=g),v>y&&(y=v);b=0!==(b=Math.max(_-f,y-m))?1/b:0}return earcutLinked(S,E,d,f,m,b),E}function linkedList(c,l,d,f,m){var _,y;if(m===signedArea(c,l,d,f)>0)for(_=l;_<d;_+=f)y=insertNode(_,c[_],c[_+1],y);else for(_=d-f;_>=l;_-=f)y=insertNode(_,c[_],c[_+1],y);return y&&equals(y,y.next)&&(removeNode(y),y=y.next),y}function filterPoints(c,l){if(!c)return c;l||(l=c);var d,f=c;do{if(d=!1,f.steiner||!equals(f,f.next)&&0!==area(f.prev,f,f.next))f=f.next;else{if(removeNode(f),(f=l=f.prev)===f.next)break;d=!0}}while(d||f!==l);return l}function earcutLinked(c,l,d,f,m,_,y){if(c){!y&&_&&function indexCurve(c,l,d,f){var m=c;do{null===m.z&&(m.z=zOrder(m.x,m.y,l,d,f)),m.prevZ=m.prev,m.nextZ=m.next,m=m.next}while(m!==c);m.prevZ.nextZ=null,m.prevZ=null,function sortLinked(c){var l,d,f,m,_,y,g,v,b=1;do{for(d=c,c=null,_=null,y=0;d;){for(y++,f=d,g=0,l=0;l<b&&(g++,f=f.nextZ);l++);for(v=b;g>0||v>0&&f;)0!==g&&(0===v||!f||d.z<=f.z)?(m=d,d=d.nextZ,g--):(m=f,f=f.nextZ,v--),_?_.nextZ=m:c=m,m.prevZ=_,_=m;d=f}_.nextZ=null,b*=2}while(y>1);return c}(m)}(c,f,m,_);for(var g,v,b=c;c.prev!==c.next;)if(g=c.prev,v=c.next,_?isEarHashed(c,f,m,_):isEar(c))l.push(g.i/d),l.push(c.i/d),l.push(v.i/d),removeNode(c),c=v.next,b=v.next;else if((c=v)===b){y?1===y?earcutLinked(c=cureLocalIntersections(filterPoints(c),l,d),l,d,f,m,_,2):2===y&&splitEarcut(c,l,d,f,m,_):earcutLinked(filterPoints(c),l,d,f,m,_,1);break}}}function isEar(c){var l=c.prev,d=c,f=c.next;if(area(l,d,f)>=0)return!1;for(var m=c.next.next;m!==c.prev;){if(pointInTriangle(l.x,l.y,d.x,d.y,f.x,f.y,m.x,m.y)&&area(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function isEarHashed(c,l,d,f){var m=c.prev,_=c,y=c.next;if(area(m,_,y)>=0)return!1;for(var g=m.x<_.x?m.x<y.x?m.x:y.x:_.x<y.x?_.x:y.x,v=m.y<_.y?m.y<y.y?m.y:y.y:_.y<y.y?_.y:y.y,b=m.x>_.x?m.x>y.x?m.x:y.x:_.x>y.x?_.x:y.x,x=m.y>_.y?m.y>y.y?m.y:y.y:_.y>y.y?_.y:y.y,T=zOrder(g,v,l,d,f),S=zOrder(b,x,l,d,f),E=c.prevZ,P=c.nextZ;E&&E.z>=T&&P&&P.z<=S;){if(E!==c.prev&&E!==c.next&&pointInTriangle(m.x,m.y,_.x,_.y,y.x,y.y,E.x,E.y)&&area(E.prev,E,E.next)>=0)return!1;if(E=E.prevZ,P!==c.prev&&P!==c.next&&pointInTriangle(m.x,m.y,_.x,_.y,y.x,y.y,P.x,P.y)&&area(P.prev,P,P.next)>=0)return!1;P=P.nextZ}for(;E&&E.z>=T;){if(E!==c.prev&&E!==c.next&&pointInTriangle(m.x,m.y,_.x,_.y,y.x,y.y,E.x,E.y)&&area(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;P&&P.z<=S;){if(P!==c.prev&&P!==c.next&&pointInTriangle(m.x,m.y,_.x,_.y,y.x,y.y,P.x,P.y)&&area(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function cureLocalIntersections(c,l,d){var f=c;do{var m=f.prev,_=f.next.next;!equals(m,_)&&intersects(m,f,f.next,_)&&locallyInside(m,_)&&locallyInside(_,m)&&(l.push(m.i/d),l.push(f.i/d),l.push(_.i/d),removeNode(f),removeNode(f.next),f=c=_),f=f.next}while(f!==c);return filterPoints(f)}function splitEarcut(c,l,d,f,m,_){var y=c;do{for(var g=y.next.next;g!==y.prev;){if(y.i!==g.i&&isValidDiagonal(y,g)){var v=splitPolygon(y,g);return y=filterPoints(y,y.next),v=filterPoints(v,v.next),earcutLinked(y,l,d,f,m,_),void earcutLinked(v,l,d,f,m,_)}g=g.next}y=y.next}while(y!==c)}function compareX(c,l){return c.x-l.x}function eliminateHole(c,l){if(l=function findHoleBridge(c,l){var d,f=l,m=c.x,_=c.y,y=-1/0;do{if(_<=f.y&&_>=f.next.y&&f.next.y!==f.y){var g=f.x+(_-f.y)*(f.next.x-f.x)/(f.next.y-f.y);if(g<=m&&g>y){if(y=g,g===m){if(_===f.y)return f;if(_===f.next.y)return f.next}d=f.x<f.next.x?f:f.next}}f=f.next}while(f!==l);if(!d)return null;if(m===y)return d;var v,b=d,x=d.x,T=d.y,S=1/0;f=d;do{m>=f.x&&f.x>=x&&m!==f.x&&pointInTriangle(_<T?m:y,_,x,T,_<T?y:m,_,f.x,f.y)&&(v=Math.abs(_-f.y)/(m-f.x),locallyInside(f,c)&&(v<S||v===S&&(f.x>d.x||f.x===d.x&&sectorContainsSector(d,f)))&&(d=f,S=v)),f=f.next}while(f!==b);return d}(c,l)){var d=splitPolygon(l,c);filterPoints(l,l.next),filterPoints(d,d.next)}}function sectorContainsSector(c,l){return area(c.prev,c,l.prev)<0&&area(l.next,c,c.next)<0}function zOrder(c,l,d,f,m){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-d)*m)|c<<8))|c<<4))|c<<2))|c<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=32767*(l-f)*m)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function getLeftmost(c){var l=c,d=c;do{(l.x<d.x||l.x===d.x&&l.y<d.y)&&(d=l),l=l.next}while(l!==c);return d}function pointInTriangle(c,l,d,f,m,_,y,g){return(m-y)*(l-g)-(c-y)*(_-g)>=0&&(c-y)*(f-g)-(d-y)*(l-g)>=0&&(d-y)*(_-g)-(m-y)*(f-g)>=0}function isValidDiagonal(c,l){return c.next.i!==l.i&&c.prev.i!==l.i&&!function intersectsPolygon(c,l){var d=c;do{if(d.i!==c.i&&d.next.i!==c.i&&d.i!==l.i&&d.next.i!==l.i&&intersects(d,d.next,c,l))return!0;d=d.next}while(d!==c);return!1}(c,l)&&(locallyInside(c,l)&&locallyInside(l,c)&&function middleInside(c,l){var d=c,f=!1,m=(c.x+l.x)/2,_=(c.y+l.y)/2;do{d.y>_!=d.next.y>_&&d.next.y!==d.y&&m<(d.next.x-d.x)*(_-d.y)/(d.next.y-d.y)+d.x&&(f=!f),d=d.next}while(d!==c);return f}(c,l)&&(area(c.prev,c,l.prev)||area(c,l.prev,l))||equals(c,l)&&area(c.prev,c,c.next)>0&&area(l.prev,l,l.next)>0)}function area(c,l,d){return(l.y-c.y)*(d.x-l.x)-(l.x-c.x)*(d.y-l.y)}function equals(c,l){return c.x===l.x&&c.y===l.y}function intersects(c,l,d,f){var m=sign(area(c,l,d)),_=sign(area(c,l,f)),y=sign(area(d,f,c)),g=sign(area(d,f,l));return m!==_&&y!==g||(!(0!==m||!onSegment(c,d,l))||(!(0!==_||!onSegment(c,f,l))||(!(0!==y||!onSegment(d,c,f))||!(0!==g||!onSegment(d,l,f)))))}function onSegment(c,l,d){return l.x<=Math.max(c.x,d.x)&&l.x>=Math.min(c.x,d.x)&&l.y<=Math.max(c.y,d.y)&&l.y>=Math.min(c.y,d.y)}function sign(c){return c>0?1:c<0?-1:0}function locallyInside(c,l){return area(c.prev,c,c.next)<0?area(c,l,c.next)>=0&&area(c,c.prev,l)>=0:area(c,l,c.prev)<0||area(c,c.next,l)<0}function splitPolygon(c,l){var d=new Node(c.i,c.x,c.y),f=new Node(l.i,l.x,l.y),m=c.next,_=l.prev;return c.next=l,l.prev=c,d.next=m,m.prev=d,f.next=d,d.prev=f,_.next=f,f.prev=_,f}function insertNode(c,l,d,f){var m=new Node(c,l,d);return f?(m.next=f.next,m.prev=f,f.next.prev=m,f.next=m):(m.prev=m,m.next=m),m}function removeNode(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function Node(c,l,d){this.i=c,this.x=l,this.y=d,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(c,l,d,f){for(var m=0,_=l,y=d-f;_<d;_+=f)m+=(c[y]-c[_])*(c[_+1]+c[y+1]),y=_;return m}c.exports=earcut,c.exports.default=earcut,earcut.deviation=function(c,l,d,f){var m=l&&l.length,_=m?l[0]*d:c.length,y=Math.abs(signedArea(c,0,_,d));if(m)for(var g=0,v=l.length;g<v;g++){var b=l[g]*d,x=g<v-1?l[g+1]*d:c.length;y-=Math.abs(signedArea(c,b,x,d))}var T=0;for(g=0;g<f.length;g+=3){var S=f[g]*d,E=f[g+1]*d,P=f[g+2]*d;T+=Math.abs((c[S]-c[P])*(c[E+1]-c[S+1])-(c[S]-c[E])*(c[P+1]-c[S+1]))}return 0===y&&0===T?0:Math.abs((T-y)/y)},earcut.flatten=function(c){for(var l=c[0][0].length,d={vertices:[],holes:[],dimensions:l},f=0,m=0;m<c.length;m++){for(var _=0;_<c[m].length;_++)for(var y=0;y<l;y++)d.vertices.push(c[m][_][y]);m>0&&(f+=c[m-1].length,d.holes.push(f))}return d}},function(c,l,d){"use strict";function _assertThisInitialized(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function _inheritsLoose(c,l){c.prototype=Object.create(l.prototype),c.prototype.constructor=c,c.__proto__=l}d.r(l),d.d(l,"gsap",(function(){return pn})),d.d(l,"default",(function(){return pn})),d.d(l,"CSSPlugin",(function(){return dn})),d.d(l,"TweenMax",(function(){return fn})),d.d(l,"TweenLite",(function(){return dr})),d.d(l,"TimelineMax",(function(){return ir})),d.d(l,"TimelineLite",(function(){return ir})),d.d(l,"Power0",(function(){return jr})),d.d(l,"Power1",(function(){return Ur})),d.d(l,"Power2",(function(){return Gr})),d.d(l,"Power3",(function(){return Xr})),d.d(l,"Power4",(function(){return Hr})),d.d(l,"Linear",(function(){return zr})),d.d(l,"Quad",(function(){return Vr})),d.d(l,"Cubic",(function(){return Yr})),d.d(l,"Quart",(function(){return Wr})),d.d(l,"Quint",(function(){return qr})),d.d(l,"Strong",(function(){return Kr})),d.d(l,"Elastic",(function(){return Zr})),d.d(l,"Back",(function(){return Qr})),d.d(l,"SteppedEase",(function(){return Jr})),d.d(l,"Bounce",(function(){return $r})),d.d(l,"Sine",(function(){return ti})),d.d(l,"Expo",(function(){return ei})),d.d(l,"Circ",(function(){return ri}));var f,m,_,y,g,v,b,x,T,S,E,P,w,O,I,A,C,R,D,L,B,N,k,j,U,G,X,H,z={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},V={duration:.5,overwrite:!1,delay:0},Y=1e8,W=1e-8,q=2*Math.PI,K=q/4,Z=0,Q=Math.sqrt,J=Math.cos,$=Math.sin,tt=function _isString(c){return"string"==typeof c},et=function _isFunction(c){return"function"==typeof c},rt=function _isNumber(c){return"number"==typeof c},it=function _isUndefined(c){return void 0===c},nt=function _isObject(c){return"object"==typeof c},ot=function _isNotFalse(c){return!1!==c},st=function _windowExists(){return"undefined"!=typeof window},at=function _isFuncOrString(c){return et(c)||tt(c)},ut="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},ht=Array.isArray,ct=/(?:-?\.?\d|\.)+/gi,lt=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,dt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,pt=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ft=/[+-]=-?[.\d]+/,mt=/[#\-+.]*\b[a-z\d-=+%.]+/gi,_t=/[\d.+\-=]+(?:e[-+]\d*)*/i,yt={},gt={},vt=function _install(c){return(gt=Vt(c,yt))&&Cr},bt=function _missingPlugin(c,l){return console.warn("Invalid property",c,"set to",l,"Missing plugin? gsap.registerPlugin()")},xt=function _warn(c,l){return!l&&console.warn(c)},Tt=function _addGlobal(c,l){return c&&(yt[c]=l)&&gt&&(gt[c]=l)||yt},St=function _emptyFunc(){return 0},Et={},Pt=[],wt={},Ot={},It={},At=30,Ct=[],Mt="",Rt=function _harness(c){var l,d,f=c[0];if(nt(f)||et(f)||(c=[c]),!(l=(f._gsap||{}).harness)){for(d=Ct.length;d--&&!Ct[d].targetTest(f););l=Ct[d]}for(d=c.length;d--;)c[d]&&(c[d]._gsap||(c[d]._gsap=new er(c[d],l)))||c.splice(d,1);return c},Dt=function _getCache(c){return c._gsap||Rt(be(c))[0]._gsap},Ft=function _getProperty(c,l,d){return(d=c[l])&&et(d)?c[l]():it(d)&&c.getAttribute&&c.getAttribute(l)||d},Lt=function _forEachName(c,l){return(c=c.split(",")).forEach(l)||c},Bt=function _round(c){return Math.round(1e5*c)/1e5||0},Nt=function _arrayContainsAny(c,l){for(var d=l.length,f=0;c.indexOf(l[f])<0&&++f<d;);return f<d},kt=function _parseVars(c,l,d){var f,m=rt(c[1]),_=(m?2:1)+(l<2?0:1),y=c[_];if(m&&(y.duration=c[1]),y.parent=d,l){for(f=y;d&&!("immediateRender"in f);)f=d.vars.defaults||{},d=ot(d.vars.inherit)&&d.parent;y.immediateRender=ot(f.immediateRender),l<2?y.runBackwards=1:y.startAt=c[_-1]}return y},jt=function _lazyRender(){var c,l,d=Pt.length,f=Pt.slice(0);for(wt={},Pt.length=0,c=0;c<d;c++)(l=f[c])&&l._lazy&&(l.render(l._lazy[0],l._lazy[1],!0)._lazy=0)},Ut=function _lazySafeRender(c,l,d,f){Pt.length&&jt(),c.render(l,d,f),Pt.length&&jt()},Gt=function _numericIfPossible(c){var l=parseFloat(c);return(l||0===l)&&(c+"").match(mt).length<2?l:tt(c)?c.trim():c},Xt=function _passThrough(c){return c},Ht=function _setDefaults(c,l){for(var d in l)d in c||(c[d]=l[d]);return c},zt=function _setKeyframeDefaults(c,l){for(var d in l)d in c||"duration"===d||"ease"===d||(c[d]=l[d])},Vt=function _merge(c,l){for(var d in l)c[d]=l[d];return c},Yt=function _mergeDeep(c,l){for(var d in l)"__proto__"!==d&&"constructor"!==d&&"prototype"!==d&&(c[d]=nt(l[d])?_mergeDeep(c[d]||(c[d]={}),l[d]):l[d]);return c},Wt=function _copyExcluding(c,l){var d,f={};for(d in c)d in l||(f[d]=c[d]);return f},qt=function _inheritDefaults(c){var l=c.parent||m,d=c.keyframes?zt:Ht;if(ot(c.inherit))for(;l;)d(c,l.vars.defaults),l=l.parent||l._dp;return c},Kt=function _removeLinkedListItem(c,l,d,f){void 0===d&&(d="_first"),void 0===f&&(f="_last");var m=l._prev,_=l._next;m?m._next=_:c[d]===l&&(c[d]=_),_?_._prev=m:c[f]===l&&(c[f]=m),l._next=l._prev=l.parent=null},Zt=function _removeFromParent(c,l){c.parent&&(!l||c.parent.autoRemoveChildren)&&c.parent.remove(c),c._act=0},Qt=function _uncache(c,l){if(c&&(!l||l._end>c._dur||l._start<0))for(var d=c;d;)d._dirty=1,d=d.parent;return c},Jt=function _recacheAncestors(c){for(var l=c.parent;l&&l.parent;)l._dirty=1,l.totalDuration(),l=l.parent;return c},$t=function _hasNoPausedAncestors(c){return!c||c._ts&&_hasNoPausedAncestors(c.parent)},te=function _elapsedCycleDuration(c){return c._repeat?ee(c._tTime,c=c.duration()+c._rDelay)*c:0},ee=function _animationCycle(c,l){var d=Math.floor(c/=l);return c&&d===c?d-1:d},re=function _parentToChildTotalTime(c,l){return(c-l._start)*l._ts+(l._ts>=0?0:l._dirty?l.totalDuration():l._tDur)},ie=function _setEnd(c){return c._end=Bt(c._start+(c._tDur/Math.abs(c._ts||c._rts||W)||0))},ne=function _alignPlayhead(c,l){var d=c._dp;return d&&d.smoothChildTiming&&c._ts&&(c._start=Bt(d._time-(c._ts>0?l/c._ts:((c._dirty?c.totalDuration():c._tDur)-l)/-c._ts)),ie(c),d._dirty||Qt(d,c)),c},oe=function _postAddChecks(c,l){var d;if((l._time||l._initted&&!l._dur)&&(d=re(c.rawTime(),l),(!l._dur||me(0,l.totalDuration(),d)-l._tTime>W)&&l.render(d,!0)),Qt(c,l)._dp&&c._initted&&c._time>=c._dur&&c._ts){if(c._dur<c.duration())for(d=c;d._dp;)d.rawTime()>=0&&d.totalTime(d._tTime),d=d._dp;c._zTime=-1e-8}},se=function _addToTimeline(c,l,d,f){return l.parent&&Zt(l),l._start=Bt(d+l._delay),l._end=Bt(l._start+(l.totalDuration()/Math.abs(l.timeScale())||0)),function _addLinkedListItem(c,l,d,f,m){void 0===d&&(d="_first"),void 0===f&&(f="_last");var _,y=c[f];if(m)for(_=l[m];y&&y[m]>_;)y=y._prev;y?(l._next=y._next,y._next=l):(l._next=c[d],c[d]=l),l._next?l._next._prev=l:c[f]=l,l._prev=y,l.parent=l._dp=c}(c,l,"_first","_last",c._sort?"_start":0),c._recent=l,f||oe(c,l),c},ae=function _scrollTrigger(c,l){return(yt.ScrollTrigger||bt("scrollTrigger",l))&&yt.ScrollTrigger.create(l,c)},ue=function _attemptInitTween(c,l,d,f){return ur(c,l),c._initted?!d&&c._pt&&(c._dur&&!1!==c.vars.lazy||!c._dur&&c.vars.lazy)&&b!==Xe.frame?(Pt.push(c),c._lazy=[l,f],1):void 0:1},he=function _parentPlayheadIsBeforeStart(c){var l=c.parent;return l&&l._ts&&l._initted&&!l._lock&&(l.rawTime()<0||_parentPlayheadIsBeforeStart(l))},ce=function _setDuration(c,l,d,f){var m=c._repeat,_=Bt(l)||0,y=c._tTime/c._tDur;return y&&!f&&(c._time*=_/c._dur),c._dur=_,c._tDur=m?m<0?1e10:Bt(_*(m+1)+c._rDelay*m):_,y&&!f?ne(c,c._tTime=c._tDur*y):c.parent&&ie(c),d||Qt(c.parent,c),c},le=function _onUpdateTotalDuration(c){return c instanceof ir?Qt(c):ce(c,c._dur)},de={_start:0,endTime:St},pe=function _parsePosition(c,l){var d,f,m=c.labels,_=c._recent||de,y=c.duration()>=Y?_.endTime(!1):c._dur;return tt(l)&&(isNaN(l)||l in m)?"<"===(d=l.charAt(0))||">"===d?("<"===d?_._start:_.endTime(_._repeat>=0))+(parseFloat(l.substr(1))||0):(d=l.indexOf("="))<0?(l in m||(m[l]=y),m[l]):(f=+(l.charAt(d-1)+l.substr(d+1)),d>1?_parsePosition(c,l.substr(0,d-1))+f:y+f):null==l?y:+l},fe=function _conditionalReturn(c,l){return c||0===c?l(c):l},me=function _clamp(c,l,d){return d<c?c:d>l?l:d},_e=function getUnit(c){if("string"!=typeof c)return"";var l=_t.exec(c);return l?c.substr(l.index+l[0].length):""},ye=[].slice,ge=function _isArrayLike(c,l){return c&&nt(c)&&"length"in c&&(!l&&!c.length||c.length-1 in c&&nt(c[0]))&&!c.nodeType&&c!==_},ve=function _flatten(c,l,d){return void 0===d&&(d=[]),c.forEach((function(c){var f;return tt(c)&&!l||ge(c,1)?(f=d).push.apply(f,be(c)):d.push(c)}))||d},be=function toArray(c,l){return!tt(c)||l||!y&&He()?ht(c)?ve(c,l):ge(c)?ye.call(c,0):c?[c]:[]:ye.call(g.querySelectorAll(c),0)},xe=function shuffle(c){return c.sort((function(){return.5-Math.random()}))},Te=function distribute(c){if(et(c))return c;var l=nt(c)?c:{each:c},d=Ze(l.ease),f=l.from||0,m=parseFloat(l.base)||0,_={},y=f>0&&f<1,g=isNaN(f)||y,v=l.axis,b=f,x=f;return tt(f)?b=x={center:.5,edges:.5,end:1}[f]||0:!y&&g&&(b=f[0],x=f[1]),function(c,y,T){var S,E,P,w,O,I,A,C,R,D=(T||l).length,L=_[D];if(!L){if(!(R="auto"===l.grid?0:(l.grid||[1,Y])[1])){for(A=-Y;A<(A=T[R++].getBoundingClientRect().left)&&R<D;);R--}for(L=_[D]=[],S=g?Math.min(R,D)*b-.5:f%R,E=g?D*x/R-.5:f/R|0,A=0,C=Y,I=0;I<D;I++)P=I%R-S,w=E-(I/R|0),L[I]=O=v?Math.abs("y"===v?w:P):Q(P*P+w*w),O>A&&(A=O),O<C&&(C=O);"random"===f&&xe(L),L.max=A-C,L.min=C,L.v=D=(parseFloat(l.amount)||parseFloat(l.each)*(R>D?D-1:v?"y"===v?D/R:R:Math.max(R,D/R))||0)*("edges"===f?-1:1),L.b=D<0?m-D:m,L.u=_e(l.amount||l.each)||0,d=d&&D<0?qe(d):d}return D=(L[c]-L.min)/L.max||0,Bt(L.b+(d?d(D):D)*L.v)+L.u}},Se=function _roundModifier(c){var l=c<1?Math.pow(10,(c+"").length-2):1;return function(d){var f=Math.round(parseFloat(d)/c)*c*l;return(f-f%1)/l+(rt(d)?0:_e(d))}},Ee=function snap(c,l){var d,f,m=ht(c);return!m&&nt(c)&&(d=m=c.radius||Y,c.values?(c=be(c.values),(f=!rt(c[0]))&&(d*=d)):c=Se(c.increment)),fe(l,m?et(c)?function(l){return f=c(l),Math.abs(f-l)<=d?f:l}:function(l){for(var m,_,y=parseFloat(f?l.x:l),g=parseFloat(f?l.y:0),v=Y,b=0,x=c.length;x--;)(m=f?(m=c[x].x-y)*m+(_=c[x].y-g)*_:Math.abs(c[x]-y))<v&&(v=m,b=x);return b=!d||v<=d?c[b]:l,f||b===l||rt(l)?b:b+_e(l)}:Se(c))},Pe=function random(c,l,d,f){return fe(ht(c)?!l:!0===d?!!(d=0):!f,(function(){return ht(c)?c[~~(Math.random()*c.length)]:(d=d||1e-5)&&(f=d<1?Math.pow(10,(d+"").length-2):1)&&Math.floor(Math.round((c-d/2+Math.random()*(l-c+.99*d))/d)*d*f)/f}))},we=function _wrapArray(c,l,d){return fe(d,(function(d){return c[~~l(d)]}))},Oe=function _replaceRandom(c){for(var l,d,f,m,_=0,y="";~(l=c.indexOf("random(",_));)f=c.indexOf(")",l),m="["===c.charAt(l+7),d=c.substr(l+7,f-l-7).match(m?mt:ct),y+=c.substr(_,l-_)+Pe(m?d:+d[0],m?0:+d[1],+d[2]||1e-5),_=f+1;return y+c.substr(_,c.length-_)},Ie=function mapRange(c,l,d,f,m){var _=l-c,y=f-d;return fe(m,(function(l){return d+((l-c)/_*y||0)}))},Ae=function _getLabelInDirection(c,l,d){var f,m,_,y=c.labels,g=Y;for(f in y)(m=y[f]-l)<0==!!d&&m&&g>(m=Math.abs(m))&&(_=f,g=m);return _},Ce=function _callback(c,l,d){var f,m,_=c.vars,y=_[l];if(y)return f=_[l+"Params"],m=_.callbackScope||c,d&&Pt.length&&jt(),f?y.apply(m,f):y.call(m)},Me=function _interrupt(c){return Zt(c),c.progress()<1&&Ce(c,"onInterrupt"),c},Re=function _createPlugin(c){var l=(c=!c.name&&c.default||c).name,d=et(c),f=l&&!d&&c.init?function(){this._props=[]}:c,m={init:St,render:xr,add:sr,kill:Sr,modifier:Tr,rawVars:0},_={targetTest:0,get:0,getSetter:yr,aliases:{},register:0};if(He(),c!==f){if(Ot[l])return;Ht(f,Ht(Wt(c,m),_)),Vt(f.prototype,Vt(m,Wt(c,_))),Ot[f.prop=l]=f,c.targetTest&&(Ct.push(f),Et[l]=1),l=("css"===l?"CSS":l.charAt(0).toUpperCase()+l.substr(1))+"Plugin"}Tt(l,f),c.register&&c.register(Cr,f,wr)},De=255,Fe={aqua:[0,De,De],lime:[0,De,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,De],navy:[0,0,128],white:[De,De,De],olive:[128,128,0],yellow:[De,De,0],orange:[De,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[De,0,0],pink:[De,192,203],cyan:[0,De,De],transparent:[De,De,De,0]},Le=function _hue(c,l,d){return(6*(c=c<0?c+1:c>1?c-1:c)<1?l+(d-l)*c*6:c<.5?d:3*c<2?l+(d-l)*(2/3-c)*6:l)*De+.5|0},Be=function splitColor(c,l,d){var f,m,_,y,g,v,b,x,T,S,E=c?rt(c)?[c>>16,c>>8&De,c&De]:0:Fe.black;if(!E){if(","===c.substr(-1)&&(c=c.substr(0,c.length-1)),Fe[c])E=Fe[c];else if("#"===c.charAt(0)){if(c.length<6&&(f=c.charAt(1),m=c.charAt(2),_=c.charAt(3),c="#"+f+f+m+m+_+_+(5===c.length?c.charAt(4)+c.charAt(4):"")),9===c.length)return[(E=parseInt(c.substr(1,6),16))>>16,E>>8&De,E&De,parseInt(c.substr(7),16)/255];E=[(c=parseInt(c.substr(1),16))>>16,c>>8&De,c&De]}else if("hsl"===c.substr(0,3))if(E=S=c.match(ct),l){if(~c.indexOf("="))return E=c.match(lt),d&&E.length<4&&(E[3]=1),E}else y=+E[0]%360/360,g=+E[1]/100,f=2*(v=+E[2]/100)-(m=v<=.5?v*(g+1):v+g-v*g),E.length>3&&(E[3]*=1),E[0]=Le(y+1/3,f,m),E[1]=Le(y,f,m),E[2]=Le(y-1/3,f,m);else E=c.match(ct)||Fe.transparent;E=E.map(Number)}return l&&!S&&(f=E[0]/De,m=E[1]/De,_=E[2]/De,v=((b=Math.max(f,m,_))+(x=Math.min(f,m,_)))/2,b===x?y=g=0:(T=b-x,g=v>.5?T/(2-b-x):T/(b+x),y=b===f?(m-_)/T+(m<_?6:0):b===m?(_-f)/T+2:(f-m)/T+4,y*=60),E[0]=~~(y+.5),E[1]=~~(100*g+.5),E[2]=~~(100*v+.5)),d&&E.length<4&&(E[3]=1),E},Ne=function _colorOrderData(c){var l=[],d=[],f=-1;return c.split(je).forEach((function(c){var m=c.match(dt)||[];l.push.apply(l,m),d.push(f+=m.length+1)})),l.c=d,l},ke=function _formatColors(c,l,d){var f,m,_,y,g="",v=(c+g).match(je),b=l?"hsla(":"rgba(",x=0;if(!v)return c;if(v=v.map((function(c){return(c=Be(c,l,1))&&b+(l?c[0]+","+c[1]+"%,"+c[2]+"%,"+c[3]:c.join(","))+")"})),d&&(_=Ne(c),(f=d.c).join(g)!==_.c.join(g)))for(y=(m=c.replace(je,"1").split(dt)).length-1;x<y;x++)g+=m[x]+(~f.indexOf(x)?v.shift()||b+"0,0,0,0)":(_.length?_:v.length?v:d).shift());if(!m)for(y=(m=c.split(je)).length-1;x<y;x++)g+=m[x]+v[x];return g+m[y]},je=function(){var c,l="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(c in Fe)l+="|"+c+"\\b";return new RegExp(l+")","gi")}(),Ue=/hsl[a]?\(/,Ge=function _colorStringFilter(c){var l,d=c.join(" ");if(je.lastIndex=0,je.test(d))return l=Ue.test(d),c[1]=ke(c[1],l),c[0]=ke(c[0],l,Ne(c[1])),!0},Xe=(A=Date.now,C=500,R=33,D=A(),L=D,N=B=1e3/240,j=function _tick(c){var l,d,f,m,_=A()-L,y=!0===c;if(_>C&&(D+=_-R),((l=(f=(L+=_)-D)-N)>0||y)&&(m=++w.frame,O=f-1e3*w.time,w.time=f/=1e3,N+=l+(l>=B?4:B-l),d=1),y||(S=E(_tick)),d)for(I=0;I<k.length;I++)k[I](f,O,m,c)},w={time:0,frame:0,tick:function tick(){j(!0)},deltaRatio:function deltaRatio(c){return O/(1e3/(c||60))},wake:function wake(){v&&(!y&&st()&&(_=y=window,g=_.document||{},yt.gsap=Cr,(_.gsapVersions||(_.gsapVersions=[])).push(Cr.version),vt(gt||_.GreenSockGlobals||!_.gsap&&_||{}),P=_.requestAnimationFrame),S&&w.sleep(),E=P||function(c){return setTimeout(c,N-1e3*w.time+1|0)},T=1,j(2))},sleep:function sleep(){(P?_.cancelAnimationFrame:clearTimeout)(S),T=0,E=St},lagSmoothing:function lagSmoothing(c,l){C=c||1e8,R=Math.min(l,C,0)},fps:function fps(c){B=1e3/(c||240),N=1e3*w.time+B},add:function add(c){k.indexOf(c)<0&&k.push(c),He()},remove:function remove(c){var l;~(l=k.indexOf(c))&&k.splice(l,1)&&I>=l&&I--},_listeners:k=[]}),He=function _wake(){return!T&&Xe.wake()},ze={},Ve=/^[\d.\-M][\d.\-,\s]/,Ye=/["']/g,We=function _parseObjectInString(c){for(var l,d,f,m={},_=c.substr(1,c.length-3).split(":"),y=_[0],g=1,v=_.length;g<v;g++)d=_[g],l=g!==v-1?d.lastIndexOf(","):d.length,f=d.substr(0,l),m[y]=isNaN(f)?f.replace(Ye,"").trim():+f,y=d.substr(l+1).trim();return m},qe=function _invertEase(c){return function(l){return 1-c(1-l)}},Ke=function _propagateYoyoEase(c,l){for(var d,f=c._first;f;)f instanceof ir?_propagateYoyoEase(f,l):!f.vars.yoyoEase||f._yoyo&&f._repeat||f._yoyo===l||(f.timeline?_propagateYoyoEase(f.timeline,l):(d=f._ease,f._ease=f._yEase,f._yEase=d,f._yoyo=l)),f=f._next},Ze=function _parseEase(c,l){return c&&(et(c)?c:ze[c]||function _configEaseFromString(c){var l=(c+"").split("("),d=ze[l[0]];return d&&l.length>1&&d.config?d.config.apply(null,~c.indexOf("{")?[We(l[1])]:function _valueInParentheses(c){var l=c.indexOf("(")+1,d=c.indexOf(")"),f=c.indexOf("(",l);return c.substring(l,~f&&f<d?c.indexOf(")",d+1):d)}(c).split(",").map(Gt)):ze._CE&&Ve.test(c)?ze._CE("",c):d}(c))||l},Qe=function _insertEase(c,l,d,f){void 0===d&&(d=function easeOut(c){return 1-l(1-c)}),void 0===f&&(f=function easeInOut(c){return c<.5?l(2*c)/2:1-l(2*(1-c))/2});var m,_={easeIn:l,easeOut:d,easeInOut:f};return Lt(c,(function(c){for(var l in ze[c]=yt[c]=_,ze[m=c.toLowerCase()]=d,_)ze[m+("easeIn"===l?".in":"easeOut"===l?".out":".inOut")]=ze[c+"."+l]=_[l]})),_},Je=function _easeInOutFromOut(c){return function(l){return l<.5?(1-c(1-2*l))/2:.5+c(2*(l-.5))/2}},$e=function _configElastic(c,l,d){var f=l>=1?l:1,m=(d||(c?.3:.45))/(l<1?l:1),_=m/q*(Math.asin(1/f)||0),y=function easeOut(c){return 1===c?1:f*Math.pow(2,-10*c)*$((c-_)*m)+1},g="out"===c?y:"in"===c?function(c){return 1-y(1-c)}:Je(y);return m=q/m,g.config=function(l,d){return _configElastic(c,l,d)},g},tr=function _configBack(c,l){void 0===l&&(l=1.70158);var d=function easeOut(c){return c?--c*c*((l+1)*c+l)+1:0},f="out"===c?d:"in"===c?function(c){return 1-d(1-c)}:Je(d);return f.config=function(l){return _configBack(c,l)},f};Lt("Linear,Quad,Cubic,Quart,Quint,Strong",(function(c,l){var d=l<5?l+1:l;Qe(c+",Power"+(d-1),l?function(c){return Math.pow(c,d)}:function(c){return c},(function(c){return 1-Math.pow(1-c,d)}),(function(c){return c<.5?Math.pow(2*c,d)/2:1-Math.pow(2*(1-c),d)/2}))})),ze.Linear.easeNone=ze.none=ze.Linear.easeIn,Qe("Elastic",$e("in"),$e("out"),$e()),U=7.5625,X=1/(G=2.75),Qe("Bounce",(function(c){return 1-H(1-c)}),H=function easeOut(c){return c<X?U*c*c:c<.7272727272727273?U*Math.pow(c-1.5/G,2)+.75:c<.9090909090909092?U*(c-=2.25/G)*c+.9375:U*Math.pow(c-2.625/G,2)+.984375}),Qe("Expo",(function(c){return c?Math.pow(2,10*(c-1)):0})),Qe("Circ",(function(c){return-(Q(1-c*c)-1)})),Qe("Sine",(function(c){return 1===c?1:1-J(c*K)})),Qe("Back",tr("in"),tr("out"),tr()),ze.SteppedEase=ze.steps=yt.SteppedEase={config:function config(c,l){void 0===c&&(c=1);var d=1/c,f=c+(l?0:1),m=l?1:0;return function(c){return((f*me(0,.99999999,c)|0)+m)*d}}},V.ease=ze["quad.out"],Lt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(c){return Mt+=c+","+c+"Params,"}));var er=function GSCache(c,l){this.id=Z++,c._gsap=this,this.target=c,this.harness=l,this.get=l?l.get:Ft,this.set=l?l.getSetter:yr},rr=function(){function Animation(c,l){var d=c.parent||m;this.vars=c,this._delay=+c.delay||0,(this._repeat=c.repeat===1/0?-2:c.repeat||0)&&(this._rDelay=c.repeatDelay||0,this._yoyo=!!c.yoyo||!!c.yoyoEase),this._ts=1,ce(this,+c.duration,1,1),this.data=c.data,T||Xe.wake(),d&&se(d,this,l||0===l?l:d._time,1),c.reversed&&this.reverse(),c.paused&&this.paused(!0)}var c=Animation.prototype;return c.delay=function delay(c){return c||0===c?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+c-this._delay),this._delay=c,this):this._delay},c.duration=function duration(c){return arguments.length?this.totalDuration(this._repeat>0?c+(c+this._rDelay)*this._repeat:c):this.totalDuration()&&this._dur},c.totalDuration=function totalDuration(c){return arguments.length?(this._dirty=0,ce(this,this._repeat<0?c:(c-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},c.totalTime=function totalTime(c,l){if(He(),!arguments.length)return this._tTime;var d=this._dp;if(d&&d.smoothChildTiming&&this._ts){for(ne(this,c),!d._dp||d.parent||oe(d,this);d.parent;)d.parent._time!==d._start+(d._ts>=0?d._tTime/d._ts:(d.totalDuration()-d._tTime)/-d._ts)&&d.totalTime(d._tTime,!0),d=d.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&c<this._tDur||this._ts<0&&c>0||!this._tDur&&!c)&&se(this._dp,this,this._start-this._delay)}return(this._tTime!==c||!this._dur&&!l||this._initted&&Math.abs(this._zTime)===W||!c&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=c),Ut(this,c,l)),this},c.time=function time(c,l){return arguments.length?this.totalTime(Math.min(this.totalDuration(),c+te(this))%this._dur||(c?this._dur:0),l):this._time},c.totalProgress=function totalProgress(c,l){return arguments.length?this.totalTime(this.totalDuration()*c,l):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},c.progress=function progress(c,l){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?c:1-c)+te(this),l):this.duration()?Math.min(1,this._time/this._dur):this.ratio},c.iteration=function iteration(c,l){var d=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(c-1)*d,l):this._repeat?ee(this._tTime,d)+1:1},c.timeScale=function timeScale(c){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===c)return this;var l=this.parent&&this._ts?re(this.parent._time,this):this._tTime;return this._rts=+c||0,this._ts=this._ps||-1e-8===c?0:this._rts,Jt(this.totalTime(me(-this._delay,this._tDur,l),!0))},c.paused=function paused(c){return arguments.length?(this._ps!==c&&(this._ps=c,c?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(He(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=W)&&Math.abs(this._zTime)!==W))),this):this._ps},c.startTime=function startTime(c){if(arguments.length){this._start=c;var l=this.parent||this._dp;return l&&(l._sort||!this.parent)&&se(l,this,c-this._delay),this}return this._start},c.endTime=function endTime(c){return this._start+(ot(c)?this.totalDuration():this.duration())/Math.abs(this._ts)},c.rawTime=function rawTime(c){var l=this.parent||this._dp;return l?c&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?re(l.rawTime(c),this):this._tTime:this._tTime},c.globalTime=function globalTime(c){for(var l=this,d=arguments.length?c:l.rawTime();l;)d=l._start+d/(l._ts||1),l=l._dp;return d},c.repeat=function repeat(c){return arguments.length?(this._repeat=c===1/0?-2:c,le(this)):-2===this._repeat?1/0:this._repeat},c.repeatDelay=function repeatDelay(c){return arguments.length?(this._rDelay=c,le(this)):this._rDelay},c.yoyo=function yoyo(c){return arguments.length?(this._yoyo=c,this):this._yoyo},c.seek=function seek(c,l){return this.totalTime(pe(this,c),ot(l))},c.restart=function restart(c,l){return this.play().totalTime(c?-this._delay:0,ot(l))},c.play=function play(c,l){return null!=c&&this.seek(c,l),this.reversed(!1).paused(!1)},c.reverse=function reverse(c,l){return null!=c&&this.seek(c||this.totalDuration(),l),this.reversed(!0).paused(!1)},c.pause=function pause(c,l){return null!=c&&this.seek(c,l),this.paused(!0)},c.resume=function resume(){return this.paused(!1)},c.reversed=function reversed(c){return arguments.length?(!!c!==this.reversed()&&this.timeScale(-this._rts||(c?-1e-8:0)),this):this._rts<0},c.invalidate=function invalidate(){return this._initted=this._act=0,this._zTime=-1e-8,this},c.isActive=function isActive(){var c,l=this.parent||this._dp,d=this._start;return!(l&&!(this._ts&&this._initted&&l.isActive()&&(c=l.rawTime(!0))>=d&&c<this.endTime(!0)-W))},c.eventCallback=function eventCallback(c,l,d){var f=this.vars;return arguments.length>1?(l?(f[c]=l,d&&(f[c+"Params"]=d),"onUpdate"===c&&(this._onUpdate=l)):delete f[c],this):f[c]},c.then=function then(c){var l=this;return new Promise((function(d){var f=et(c)?c:Xt,m=function _resolve(){var c=l.then;l.then=null,et(f)&&(f=f(l))&&(f.then||f===l)&&(l.then=c),d(f),l.then=c};l._initted&&1===l.totalProgress()&&l._ts>=0||!l._tTime&&l._ts<0?m():l._prom=m}))},c.kill=function kill(){Me(this)},Animation}();Ht(rr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var ir=function(c){function Timeline(l,d){var f;return void 0===l&&(l={}),(f=c.call(this,l,d)||this).labels={},f.smoothChildTiming=!!l.smoothChildTiming,f.autoRemoveChildren=!!l.autoRemoveChildren,f._sort=ot(l.sortChildren),f.parent&&oe(f.parent,_assertThisInitialized(f)),l.scrollTrigger&&ae(_assertThisInitialized(f),l.scrollTrigger),f}_inheritsLoose(Timeline,c);var l=Timeline.prototype;return l.to=function to(c,l,d){return new dr(c,kt(arguments,0,this),pe(this,rt(l)?arguments[3]:d)),this},l.from=function from(c,l,d){return new dr(c,kt(arguments,1,this),pe(this,rt(l)?arguments[3]:d)),this},l.fromTo=function fromTo(c,l,d,f){return new dr(c,kt(arguments,2,this),pe(this,rt(l)?arguments[4]:f)),this},l.set=function set(c,l,d){return l.duration=0,l.parent=this,qt(l).repeatDelay||(l.repeat=0),l.immediateRender=!!l.immediateRender,new dr(c,l,pe(this,d),1),this},l.call=function call(c,l,d){return se(this,dr.delayedCall(0,c,l),pe(this,d))},l.staggerTo=function staggerTo(c,l,d,f,m,_,y){return d.duration=l,d.stagger=d.stagger||f,d.onComplete=_,d.onCompleteParams=y,d.parent=this,new dr(c,d,pe(this,m)),this},l.staggerFrom=function staggerFrom(c,l,d,f,m,_,y){return d.runBackwards=1,qt(d).immediateRender=ot(d.immediateRender),this.staggerTo(c,l,d,f,m,_,y)},l.staggerFromTo=function staggerFromTo(c,l,d,f,m,_,y,g){return f.startAt=d,qt(f).immediateRender=ot(f.immediateRender),this.staggerTo(c,l,f,m,_,y,g)},l.render=function render(c,l,d){var f,_,y,g,v,b,x,T,S,E,P,w,O=this._time,I=this._dirty?this.totalDuration():this._tDur,A=this._dur,C=this!==m&&c>I-W&&c>=0?I:c<W?0:c,R=this._zTime<0!=c<0&&(this._initted||!A);if(C!==this._tTime||d||R){if(O!==this._time&&A&&(C+=this._time-O,c+=this._time-O),f=C,S=this._start,b=!(T=this._ts),R&&(A||(O=this._zTime),(c||!l)&&(this._zTime=c)),this._repeat){if(P=this._yoyo,v=A+this._rDelay,this._repeat<-1&&c<0)return this.totalTime(100*v+c,l,d);if(f=Bt(C%v),C===I?(g=this._repeat,f=A):((g=~~(C/v))&&g===C/v&&(f=A,g--),f>A&&(f=A)),E=ee(this._tTime,v),!O&&this._tTime&&E!==g&&(E=g),P&&1&g&&(f=A-f,w=1),g!==E&&!this._lock){var D=P&&1&E,L=D===(P&&1&g);if(g<E&&(D=!D),O=D?0:A,this._lock=1,this.render(O||(w?0:Bt(g*v)),l,!A)._lock=0,!l&&this.parent&&Ce(this,"onRepeat"),this.vars.repeatRefresh&&!w&&(this.invalidate()._lock=1),O!==this._time||b!==!this._ts)return this;if(A=this._dur,I=this._tDur,L&&(this._lock=2,O=D?A:-1e-4,this.render(O,!0),this.vars.repeatRefresh&&!w&&this.invalidate()),this._lock=0,!this._ts&&!b)return this;Ke(this,w)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(x=function _findNextPauseTween(c,l,d){var f;if(d>l)for(f=c._first;f&&f._start<=d;){if(!f._dur&&"isPause"===f.data&&f._start>l)return f;f=f._next}else for(f=c._last;f&&f._start>=d;){if(!f._dur&&"isPause"===f.data&&f._start<l)return f;f=f._prev}}(this,Bt(O),Bt(f)))&&(C-=f-(f=x._start)),this._tTime=C,this._time=f,this._act=!T,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=c,O=0),!O&&(f||!A&&c>=0)&&!l&&Ce(this,"onStart"),f>=O&&c>=0)for(_=this._first;_;){if(y=_._next,(_._act||f>=_._start)&&_._ts&&x!==_){if(_.parent!==this)return this.render(c,l,d);if(_.render(_._ts>0?(f-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(f-_._start)*_._ts,l,d),f!==this._time||!this._ts&&!b){x=0,y&&(C+=this._zTime=-1e-8);break}}_=y}else{_=this._last;for(var B=c<0?c:f;_;){if(y=_._prev,(_._act||B<=_._end)&&_._ts&&x!==_){if(_.parent!==this)return this.render(c,l,d);if(_.render(_._ts>0?(B-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(B-_._start)*_._ts,l,d),f!==this._time||!this._ts&&!b){x=0,y&&(C+=this._zTime=B?-1e-8:W);break}}_=y}}if(x&&!l&&(this.pause(),x.render(f>=O?0:-1e-8)._zTime=f>=O?1:-1,this._ts))return this._start=S,ie(this),this.render(c,l,d);this._onUpdate&&!l&&Ce(this,"onUpdate",!0),(C===I&&I>=this.totalDuration()||!C&&O)&&(S!==this._start&&Math.abs(T)===Math.abs(this._ts)||this._lock||((c||!A)&&(C===I&&this._ts>0||!C&&this._ts<0)&&Zt(this,1),l||c<0&&!O||!C&&!O||(Ce(this,C===I?"onComplete":"onReverseComplete",!0),this._prom&&!(C<I&&this.timeScale()>0)&&this._prom())))}return this},l.add=function add(c,l){var d=this;if(rt(l)||(l=pe(this,l)),!(c instanceof rr)){if(ht(c))return c.forEach((function(c){return d.add(c,l)})),this;if(tt(c))return this.addLabel(c,l);if(!et(c))return this;c=dr.delayedCall(0,c)}return this!==c?se(this,c,l):this},l.getChildren=function getChildren(c,l,d,f){void 0===c&&(c=!0),void 0===l&&(l=!0),void 0===d&&(d=!0),void 0===f&&(f=-Y);for(var m=[],_=this._first;_;)_._start>=f&&(_ instanceof dr?l&&m.push(_):(d&&m.push(_),c&&m.push.apply(m,_.getChildren(!0,l,d)))),_=_._next;return m},l.getById=function getById(c){for(var l=this.getChildren(1,1,1),d=l.length;d--;)if(l[d].vars.id===c)return l[d]},l.remove=function remove(c){return tt(c)?this.removeLabel(c):et(c)?this.killTweensOf(c):(Kt(this,c),c===this._recent&&(this._recent=this._last),Qt(this))},l.totalTime=function totalTime(l,d){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Bt(Xe.time-(this._ts>0?l/this._ts:(this.totalDuration()-l)/-this._ts))),c.prototype.totalTime.call(this,l,d),this._forcing=0,this):this._tTime},l.addLabel=function addLabel(c,l){return this.labels[c]=pe(this,l),this},l.removeLabel=function removeLabel(c){return delete this.labels[c],this},l.addPause=function addPause(c,l,d){var f=dr.delayedCall(0,l||St,d);return f.data="isPause",this._hasPause=1,se(this,f,pe(this,c))},l.removePause=function removePause(c){var l=this._first;for(c=pe(this,c);l;)l._start===c&&"isPause"===l.data&&Zt(l),l=l._next},l.killTweensOf=function killTweensOf(c,l,d){for(var f=this.getTweensOf(c,d),m=f.length;m--;)nr!==f[m]&&f[m].kill(c,l);return this},l.getTweensOf=function getTweensOf(c,l){for(var d,f=[],m=be(c),_=this._first,y=rt(l);_;)_ instanceof dr?Nt(_._targets,m)&&(y?(!nr||_._initted&&_._ts)&&_.globalTime(0)<=l&&_.globalTime(_.totalDuration())>l:!l||_.isActive())&&f.push(_):(d=_.getTweensOf(m,l)).length&&f.push.apply(f,d),_=_._next;return f},l.tweenTo=function tweenTo(c,l){l=l||{};var d=this,f=pe(d,c),m=l,_=m.startAt,y=m.onStart,g=m.onStartParams,v=m.immediateRender,b=dr.to(d,Ht({ease:"none",lazy:!1,immediateRender:!1,time:f,overwrite:"auto",duration:l.duration||Math.abs((f-(_&&"time"in _?_.time:d._time))/d.timeScale())||W,onStart:function onStart(){d.pause();var c=l.duration||Math.abs((f-d._time)/d.timeScale());b._dur!==c&&ce(b,c,0,1).render(b._time,!0,!0),y&&y.apply(b,g||[])}},l));return v?b.render(0):b},l.tweenFromTo=function tweenFromTo(c,l,d){return this.tweenTo(l,Ht({startAt:{time:pe(this,c)}},d))},l.recent=function recent(){return this._recent},l.nextLabel=function nextLabel(c){return void 0===c&&(c=this._time),Ae(this,pe(this,c))},l.previousLabel=function previousLabel(c){return void 0===c&&(c=this._time),Ae(this,pe(this,c),1)},l.currentLabel=function currentLabel(c){return arguments.length?this.seek(c,!0):this.previousLabel(this._time+W)},l.shiftChildren=function shiftChildren(c,l,d){void 0===d&&(d=0);for(var f,m=this._first,_=this.labels;m;)m._start>=d&&(m._start+=c,m._end+=c),m=m._next;if(l)for(f in _)_[f]>=d&&(_[f]+=c);return Qt(this)},l.invalidate=function invalidate(){var l=this._first;for(this._lock=0;l;)l.invalidate(),l=l._next;return c.prototype.invalidate.call(this)},l.clear=function clear(c){void 0===c&&(c=!0);for(var l,d=this._first;d;)l=d._next,this.remove(d),d=l;return this._dp&&(this._time=this._tTime=this._pTime=0),c&&(this.labels={}),Qt(this)},l.totalDuration=function totalDuration(c){var l,d,f,_=0,y=this,g=y._last,v=Y;if(arguments.length)return y.timeScale((y._repeat<0?y.duration():y.totalDuration())/(y.reversed()?-c:c));if(y._dirty){for(f=y.parent;g;)l=g._prev,g._dirty&&g.totalDuration(),(d=g._start)>v&&y._sort&&g._ts&&!y._lock?(y._lock=1,se(y,g,d-g._delay,1)._lock=0):v=d,d<0&&g._ts&&(_-=d,(!f&&!y._dp||f&&f.smoothChildTiming)&&(y._start+=d/y._ts,y._time-=d,y._tTime-=d),y.shiftChildren(-d,!1,-Infinity),v=0),g._end>_&&g._ts&&(_=g._end),g=l;ce(y,y===m&&y._time>_?y._time:_,1,1),y._dirty=0}return y._tDur},Timeline.updateRoot=function updateRoot(c){if(m._ts&&(Ut(m,re(c,m)),b=Xe.frame),Xe.frame>=At){At+=z.autoSleep||120;var l=m._first;if((!l||!l._ts)&&z.autoSleep&&Xe._listeners.length<2){for(;l&&!l._ts;)l=l._next;l||Xe.sleep()}}},Timeline}(rr);Ht(ir.prototype,{_lock:0,_hasPause:0,_forcing:0});var nr,or=function _addComplexStringPropTween(c,l,d,f,m,_,y){var g,v,b,x,T,S,E,P,w=new wr(this._pt,c,l,0,1,br,null,m),O=0,I=0;for(w.b=d,w.e=f,d+="",(E=~(f+="").indexOf("random("))&&(f=Oe(f)),_&&(_(P=[d,f],c,l),d=P[0],f=P[1]),v=d.match(pt)||[];g=pt.exec(f);)x=g[0],T=f.substring(O,g.index),b?b=(b+1)%5:"rgba("===T.substr(-5)&&(b=1),x!==v[I++]&&(S=parseFloat(v[I-1])||0,w._pt={_next:w._pt,p:T||1===I?T:",",s:S,c:"="===x.charAt(1)?parseFloat(x.substr(2))*("-"===x.charAt(0)?-1:1):parseFloat(x)-S,m:b&&b<4?Math.round:0},O=pt.lastIndex);return w.c=O<f.length?f.substring(O,f.length):"",w.fp=y,(ft.test(f)||E)&&(w.e=0),this._pt=w,w},sr=function _addPropTween(c,l,d,f,m,_,y,g,v){et(f)&&(f=f(m||0,c,_));var b,x=c[l],T="get"!==d?d:et(x)?v?c[l.indexOf("set")||!et(c["get"+l.substr(3)])?l:"get"+l.substr(3)](v):c[l]():x,S=et(x)?v?mr:fr:pr;if(tt(f)&&(~f.indexOf("random(")&&(f=Oe(f)),"="===f.charAt(1)&&(f=parseFloat(T)+parseFloat(f.substr(2))*("-"===f.charAt(0)?-1:1)+(_e(T)||0))),T!==f)return isNaN(T*f)?(!x&&!(l in c)&&bt(l,f),or.call(this,c,l,T,f,S,g||z.stringFilter,v)):(b=new wr(this._pt,c,l,+T||0,f-(T||0),"boolean"==typeof x?vr:gr,0,S),v&&(b.fp=v),y&&b.modifier(y,this,c),this._pt=b)},ar=function _checkPlugin(c,l,d,f,m,_){var y,g,v,b;if(Ot[c]&&!1!==(y=new Ot[c]).init(m,y.rawVars?l[c]:function _processVars(c,l,d,f,m){if(et(c)&&(c=hr(c,m,l,d,f)),!nt(c)||c.style&&c.nodeType||ht(c)||ut(c))return tt(c)?hr(c,m,l,d,f):c;var _,y={};for(_ in c)y[_]=hr(c[_],m,l,d,f);return y}(l[c],f,m,_,d),d,f,_)&&(d._pt=g=new wr(d._pt,m,c,0,1,y.render,y,0,y.priority),d!==x))for(v=d._ptLookup[d._targets.indexOf(m)],b=y._props.length;b--;)v[y._props[b]]=g;return y},ur=function _initTween(c,l){var d,_,y,g,v,b,x,T,S,E,P,w,O,I=c.vars,A=I.ease,C=I.startAt,R=I.immediateRender,D=I.lazy,L=I.onUpdate,B=I.onUpdateParams,N=I.callbackScope,k=I.runBackwards,j=I.yoyoEase,U=I.keyframes,G=I.autoRevert,X=c._dur,H=c._startAt,z=c._targets,Y=c.parent,q=Y&&"nested"===Y.data?Y.parent._targets:z,K="auto"===c._overwrite&&!f,Z=c.timeline;if(Z&&(!U||!A)&&(A="none"),c._ease=Ze(A,V.ease),c._yEase=j?qe(Ze(!0===j?A:j,V.ease)):0,j&&c._yoyo&&!c._repeat&&(j=c._yEase,c._yEase=c._ease,c._ease=j),!Z){if(w=(T=z[0]?Dt(z[0]).harness:0)&&I[T.prop],d=Wt(I,Et),H&&H.render(-1,!0).kill(),C){if(Zt(c._startAt=dr.set(z,Ht({data:"isStart",overwrite:!1,parent:Y,immediateRender:!0,lazy:ot(D),startAt:null,delay:0,onUpdate:L,onUpdateParams:B,callbackScope:N,stagger:0},C))),R)if(l>0)G||(c._startAt=0);else if(X&&!(l<0&&H))return void(l&&(c._zTime=l))}else if(k&&X)if(H)!G&&(c._startAt=0);else if(l&&(R=!1),y=Ht({overwrite:!1,data:"isFromStart",lazy:R&&ot(D),immediateRender:R,stagger:0,parent:Y},d),w&&(y[T.prop]=w),Zt(c._startAt=dr.set(z,y)),R){if(!l)return}else _initTween(c._startAt,W);for(c._pt=0,D=X&&ot(D)||D&&!X,_=0;_<z.length;_++){if(x=(v=z[_])._gsap||Rt(z)[_]._gsap,c._ptLookup[_]=E={},wt[x.id]&&Pt.length&&jt(),P=q===z?_:q.indexOf(v),T&&!1!==(S=new T).init(v,w||d,c,P,q)&&(c._pt=g=new wr(c._pt,v,S.name,0,1,S.render,S,0,S.priority),S._props.forEach((function(c){E[c]=g})),S.priority&&(b=1)),!T||w)for(y in d)Ot[y]&&(S=ar(y,d,c,P,v,q))?S.priority&&(b=1):E[y]=g=sr.call(c,v,y,"get",d[y],P,q,0,I.stringFilter);c._op&&c._op[_]&&c.kill(v,c._op[_]),K&&c._pt&&(nr=c,m.killTweensOf(v,E,c.globalTime(0)),O=!c.parent,nr=0),c._pt&&D&&(wt[x.id]=1)}b&&Pr(c),c._onInit&&c._onInit(c)}c._from=!Z&&!!I.runBackwards,c._onUpdate=L,c._initted=(!c._op||c._pt)&&!O},hr=function _parseFuncOrString(c,l,d,f,m){return et(c)?c.call(l,d,f,m):tt(c)&&~c.indexOf("random(")?Oe(c):c},cr=Mt+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",lr=(cr+",id,stagger,delay,duration,paused,scrollTrigger").split(","),dr=function(c){function Tween(l,d,_,y){var g;"number"==typeof d&&(_.duration=d,d=_,_=null);var v,b,x,T,S,E,P,w,O=(g=c.call(this,y?d:qt(d),_)||this).vars,I=O.duration,A=O.delay,C=O.immediateRender,R=O.stagger,D=O.overwrite,L=O.keyframes,B=O.defaults,N=O.scrollTrigger,k=O.yoyoEase,j=g.parent,U=(ht(l)||ut(l)?rt(l[0]):"length"in d)?[l]:be(l);if(g._targets=U.length?Rt(U):xt("GSAP target "+l+" not found. https://greensock.com",!z.nullTargetWarn)||[],g._ptLookup=[],g._overwrite=D,L||R||at(I)||at(A)){if(d=g.vars,(v=g.timeline=new ir({data:"nested",defaults:B||{}})).kill(),v.parent=v._dp=_assertThisInitialized(g),v._start=0,L)Ht(v.vars.defaults,{ease:"none"}),L.forEach((function(c){return v.to(U,c,">")}));else{if(T=U.length,P=R?Te(R):St,nt(R))for(S in R)~cr.indexOf(S)&&(w||(w={}),w[S]=R[S]);for(b=0;b<T;b++){for(S in x={},d)lr.indexOf(S)<0&&(x[S]=d[S]);x.stagger=0,k&&(x.yoyoEase=k),w&&Vt(x,w),E=U[b],x.duration=+hr(I,_assertThisInitialized(g),b,E,U),x.delay=(+hr(A,_assertThisInitialized(g),b,E,U)||0)-g._delay,!R&&1===T&&x.delay&&(g._delay=A=x.delay,g._start+=A,x.delay=0),v.to(E,x,P(b,E,U))}v.duration()?I=A=0:g.timeline=0}I||g.duration(I=v.duration())}else g.timeline=0;return!0!==D||f||(nr=_assertThisInitialized(g),m.killTweensOf(U),nr=0),j&&oe(j,_assertThisInitialized(g)),(C||!I&&!L&&g._start===Bt(j._time)&&ot(C)&&$t(_assertThisInitialized(g))&&"nested"!==j.data)&&(g._tTime=-1e-8,g.render(Math.max(0,-A))),N&&ae(_assertThisInitialized(g),N),g}_inheritsLoose(Tween,c);var l=Tween.prototype;return l.render=function render(c,l,d){var f,m,_,y,g,v,b,x,T,S=this._time,E=this._tDur,P=this._dur,w=c>E-W&&c>=0?E:c<W?0:c;if(P){if(w!==this._tTime||!c||d||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=c<0){if(f=w,x=this.timeline,this._repeat){if(y=P+this._rDelay,this._repeat<-1&&c<0)return this.totalTime(100*y+c,l,d);if(f=Bt(w%y),w===E?(_=this._repeat,f=P):((_=~~(w/y))&&_===w/y&&(f=P,_--),f>P&&(f=P)),(v=this._yoyo&&1&_)&&(T=this._yEase,f=P-f),g=ee(this._tTime,y),f===S&&!d&&this._initted)return this;_!==g&&(x&&this._yEase&&Ke(x,v),!this.vars.repeatRefresh||v||this._lock||(this._lock=d=1,this.render(Bt(y*_),!0).invalidate()._lock=0))}if(!this._initted){if(ue(this,c<0?c:f,d,l))return this._tTime=0,this;if(P!==this._dur)return this.render(c,l,d)}for(this._tTime=w,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(T||this._ease)(f/P),this._from&&(this.ratio=b=1-b),f&&!S&&!l&&Ce(this,"onStart"),m=this._pt;m;)m.r(b,m.d),m=m._next;x&&x.render(c<0?c:!f&&v?-1e-8:x._dur*b,l,d)||this._startAt&&(this._zTime=c),this._onUpdate&&!l&&(c<0&&this._startAt&&this._startAt.render(c,!0,d),Ce(this,"onUpdate")),this._repeat&&_!==g&&this.vars.onRepeat&&!l&&this.parent&&Ce(this,"onRepeat"),w!==this._tDur&&w||this._tTime!==w||(c<0&&this._startAt&&!this._onUpdate&&this._startAt.render(c,!0,!0),(c||!P)&&(w===this._tDur&&this._ts>0||!w&&this._ts<0)&&Zt(this,1),l||c<0&&!S||!w&&!S||(Ce(this,w===E?"onComplete":"onReverseComplete",!0),this._prom&&!(w<E&&this.timeScale()>0)&&this._prom()))}}else!function _renderZeroDurationTween(c,l,d,f){var m,_,y,g=c.ratio,v=l<0||!l&&(!c._start&&he(c)||(c._ts<0||c._dp._ts<0)&&"isFromStart"!==c.data&&"isStart"!==c.data)?0:1,b=c._rDelay,x=0;if(b&&c._repeat&&(x=me(0,c._tDur,l),_=ee(x,b),y=ee(c._tTime,b),c._yoyo&&1&_&&(v=1-v),_!==y&&(g=1-v,c.vars.repeatRefresh&&c._initted&&c.invalidate())),v!==g||f||c._zTime===W||!l&&c._zTime){if(!c._initted&&ue(c,l,f,d))return;for(y=c._zTime,c._zTime=l||(d?W:0),d||(d=l&&!y),c.ratio=v,c._from&&(v=1-v),c._time=0,c._tTime=x,d||Ce(c,"onStart"),m=c._pt;m;)m.r(v,m.d),m=m._next;c._startAt&&l<0&&c._startAt.render(l,!0,!0),c._onUpdate&&!d&&Ce(c,"onUpdate"),x&&c._repeat&&!d&&c.parent&&Ce(c,"onRepeat"),(l>=c._tDur||l<0)&&c.ratio===v&&(v&&Zt(c,1),d||(Ce(c,v?"onComplete":"onReverseComplete",!0),c._prom&&c._prom()))}else c._zTime||(c._zTime=l)}(this,c,l,d);return this},l.targets=function targets(){return this._targets},l.invalidate=function invalidate(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),c.prototype.invalidate.call(this)},l.kill=function kill(c,l){if(void 0===l&&(l="all"),!(c||l&&"all"!==l))return this._lazy=this._pt=0,this.parent?Me(this):this;if(this.timeline){var d=this.timeline.totalDuration();return this.timeline.killTweensOf(c,l,nr&&!0!==nr.vars.overwrite)._first||Me(this),this.parent&&d!==this.timeline.totalDuration()&&ce(this,this._dur*this.timeline._tDur/d,0,1),this}var f,m,_,y,g,v,b,x=this._targets,T=c?be(c):x,S=this._ptLookup,E=this._pt;if((!l||"all"===l)&&function _arraysMatch(c,l){for(var d=c.length,f=d===l.length;f&&d--&&c[d]===l[d];);return d<0}(x,T))return"all"===l&&(this._pt=0),Me(this);for(f=this._op=this._op||[],"all"!==l&&(tt(l)&&(g={},Lt(l,(function(c){return g[c]=1})),l=g),l=function _addAliasesToVars(c,l){var d,f,m,_,y=c[0]?Dt(c[0]).harness:0,g=y&&y.aliases;if(!g)return l;for(f in d=Vt({},l),g)if(f in d)for(m=(_=g[f].split(",")).length;m--;)d[_[m]]=d[f];return d}(x,l)),b=x.length;b--;)if(~T.indexOf(x[b]))for(g in m=S[b],"all"===l?(f[b]=l,y=m,_={}):(_=f[b]=f[b]||{},y=l),y)(v=m&&m[g])&&("kill"in v.d&&!0!==v.d.kill(g)||Kt(this,v,"_pt"),delete m[g]),"all"!==_&&(_[g]=1);return this._initted&&!this._pt&&E&&Me(this),this},Tween.to=function to(c,l){return new Tween(c,l,arguments[2])},Tween.from=function from(c,l){return new Tween(c,kt(arguments,1))},Tween.delayedCall=function delayedCall(c,l,d,f){return new Tween(l,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:c,onComplete:l,onReverseComplete:l,onCompleteParams:d,onReverseCompleteParams:d,callbackScope:f})},Tween.fromTo=function fromTo(c,l,d){return new Tween(c,kt(arguments,2))},Tween.set=function set(c,l){return l.duration=0,l.repeatDelay||(l.repeat=0),new Tween(c,l)},Tween.killTweensOf=function killTweensOf(c,l,d){return m.killTweensOf(c,l,d)},Tween}(rr);Ht(dr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Lt("staggerTo,staggerFrom,staggerFromTo",(function(c){dr[c]=function(){var l=new ir,d=ye.call(arguments,0);return d.splice("staggerFromTo"===c?5:4,0,0),l[c].apply(l,d)}}));var pr=function _setterPlain(c,l,d){return c[l]=d},fr=function _setterFunc(c,l,d){return c[l](d)},mr=function _setterFuncWithParam(c,l,d,f){return c[l](f.fp,d)},_r=function _setterAttribute(c,l,d){return c.setAttribute(l,d)},yr=function _getSetter(c,l){return et(c[l])?fr:it(c[l])&&c.setAttribute?_r:pr},gr=function _renderPlain(c,l){return l.set(l.t,l.p,Math.round(1e4*(l.s+l.c*c))/1e4,l)},vr=function _renderBoolean(c,l){return l.set(l.t,l.p,!!(l.s+l.c*c),l)},br=function _renderComplexString(c,l){var d=l._pt,f="";if(!c&&l.b)f=l.b;else if(1===c&&l.e)f=l.e;else{for(;d;)f=d.p+(d.m?d.m(d.s+d.c*c):Math.round(1e4*(d.s+d.c*c))/1e4)+f,d=d._next;f+=l.c}l.set(l.t,l.p,f,l)},xr=function _renderPropTweens(c,l){for(var d=l._pt;d;)d.r(c,d.d),d=d._next},Tr=function _addPluginModifier(c,l,d,f){for(var m,_=this._pt;_;)m=_._next,_.p===f&&_.modifier(c,l,d),_=m},Sr=function _killPropTweensOf(c){for(var l,d,f=this._pt;f;)d=f._next,f.p===c&&!f.op||f.op===c?Kt(this,f,"_pt"):f.dep||(l=1),f=d;return!l},Er=function _setterWithModifier(c,l,d,f){f.mSet(c,l,f.m.call(f.tween,d,f.mt),f)},Pr=function _sortPropTweensByPriority(c){for(var l,d,f,m,_=c._pt;_;){for(l=_._next,d=f;d&&d.pr>_.pr;)d=d._next;(_._prev=d?d._prev:m)?_._prev._next=_:f=_,(_._next=d)?d._prev=_:m=_,_=l}c._pt=f},wr=function(){function PropTween(c,l,d,f,m,_,y,g,v){this.t=l,this.s=f,this.c=m,this.p=d,this.r=_||gr,this.d=y||this,this.set=g||pr,this.pr=v||0,this._next=c,c&&(c._prev=this)}return PropTween.prototype.modifier=function modifier(c,l,d){this.mSet=this.mSet||this.set,this.set=Er,this.m=c,this.mt=d,this.tween=l},PropTween}();Lt(Mt+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(c){return Et[c]=1})),yt.TweenMax=yt.TweenLite=dr,yt.TimelineLite=yt.TimelineMax=ir,m=new ir({sortChildren:!1,defaults:V,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),z.stringFilter=Ge;var Or={registerPlugin:function registerPlugin(){for(var c=arguments.length,l=new Array(c),d=0;d<c;d++)l[d]=arguments[d];l.forEach((function(c){return Re(c)}))},timeline:function timeline(c){return new ir(c)},getTweensOf:function getTweensOf(c,l){return m.getTweensOf(c,l)},getProperty:function getProperty(c,l,d,f){tt(c)&&(c=be(c)[0]);var m=Dt(c||{}).get,_=d?Xt:Gt;return"native"===d&&(d=""),c?l?_((Ot[l]&&Ot[l].get||m)(c,l,d,f)):function(l,d,f){return _((Ot[l]&&Ot[l].get||m)(c,l,d,f))}:c},quickSetter:function quickSetter(c,l,d){if((c=be(c)).length>1){var f=c.map((function(c){return Cr.quickSetter(c,l,d)})),m=f.length;return function(c){for(var l=m;l--;)f[l](c)}}c=c[0]||{};var _=Ot[l],y=Dt(c),g=y.harness&&(y.harness.aliases||{})[l]||l,v=_?function(l){var f=new _;x._pt=0,f.init(c,d?l+d:l,x,0,[c]),f.render(1,f),x._pt&&xr(1,x)}:y.set(c,g);return _?v:function(l){return v(c,g,d?l+d:l,y,1)}},isTweening:function isTweening(c){return m.getTweensOf(c,!0).length>0},defaults:function defaults(c){return c&&c.ease&&(c.ease=Ze(c.ease,V.ease)),Yt(V,c||{})},config:function config(c){return Yt(z,c||{})},registerEffect:function registerEffect(c){var l=c.name,d=c.effect,f=c.plugins,m=c.defaults,_=c.extendTimeline;(f||"").split(",").forEach((function(c){return c&&!Ot[c]&&!yt[c]&&xt(l+" effect requires "+c+" plugin.")})),It[l]=function(c,l,f){return d(be(c),Ht(l||{},m),f)},_&&(ir.prototype[l]=function(c,d,f){return this.add(It[l](c,nt(d)?d:(f=d)&&{},this),f)})},registerEase:function registerEase(c,l){ze[c]=Ze(l)},parseEase:function parseEase(c,l){return arguments.length?Ze(c,l):ze},getById:function getById(c){return m.getById(c)},exportRoot:function exportRoot(c,l){void 0===c&&(c={});var d,f,_=new ir(c);for(_.smoothChildTiming=ot(c.smoothChildTiming),m.remove(_),_._dp=0,_._time=_._tTime=m._time,d=m._first;d;)f=d._next,!l&&!d._dur&&d instanceof dr&&d.vars.onComplete===d._targets[0]||se(_,d,d._start-d._delay),d=f;return se(m,_,0),_},utils:{wrap:function wrap(c,l,d){var f=l-c;return ht(c)?we(c,wrap(0,c.length),l):fe(d,(function(l){return(f+(l-c)%f)%f+c}))},wrapYoyo:function wrapYoyo(c,l,d){var f=l-c,m=2*f;return ht(c)?we(c,wrapYoyo(0,c.length-1),l):fe(d,(function(l){return c+((l=(m+(l-c)%m)%m||0)>f?m-l:l)}))},distribute:Te,random:Pe,snap:Ee,normalize:function normalize(c,l,d){return Ie(c,l,0,1,d)},getUnit:_e,clamp:function clamp(c,l,d){return fe(d,(function(d){return me(c,l,d)}))},splitColor:Be,toArray:be,mapRange:Ie,pipe:function pipe(){for(var c=arguments.length,l=new Array(c),d=0;d<c;d++)l[d]=arguments[d];return function(c){return l.reduce((function(c,l){return l(c)}),c)}},unitize:function unitize(c,l){return function(d){return c(parseFloat(d))+(l||_e(d))}},interpolate:function interpolate(c,l,d,f){var m=isNaN(c+l)?0:function(d){return(1-d)*c+d*l};if(!m){var _,y,g,v,b,x=tt(c),T={};if(!0===d&&(f=1)&&(d=null),x)c={p:c},l={p:l};else if(ht(c)&&!ht(l)){for(g=[],v=c.length,b=v-2,y=1;y<v;y++)g.push(interpolate(c[y-1],c[y]));v--,m=function func(c){c*=v;var l=Math.min(b,~~c);return g[l](c-l)},d=l}else f||(c=Vt(ht(c)?[]:{},c));if(!g){for(_ in l)sr.call(T,c,_,"get",l[_]);m=function func(l){return xr(l,T)||(x?c.p:c)}}}return fe(d,m)},shuffle:xe},install:vt,effects:It,ticker:Xe,updateRoot:ir.updateRoot,plugins:Ot,globalTimeline:m,core:{PropTween:wr,globals:Tt,Tween:dr,Timeline:ir,Animation:rr,getCache:Dt,_removeLinkedListItem:Kt,suppressOverwrites:function suppressOverwrites(c){return f=c}}};Lt("to,from,fromTo,delayedCall,set,killTweensOf",(function(c){return Or[c]=dr[c]})),Xe.add(ir.updateRoot),x=Or.to({},{duration:0});var Ir=function _getPluginPropTween(c,l){for(var d=c._pt;d&&d.p!==l&&d.op!==l&&d.fp!==l;)d=d._next;return d},Ar=function _buildModifierPlugin(c,l){return{name:c,rawVars:1,init:function init(c,d,f){f._onInit=function(c){var f,m;if(tt(d)&&(f={},Lt(d,(function(c){return f[c]=1})),d=f),l){for(m in f={},d)f[m]=l(d[m]);d=f}!function _addModifiers(c,l){var d,f,m,_=c._targets;for(d in l)for(f=_.length;f--;)(m=c._ptLookup[f][d])&&(m=m.d)&&(m._pt&&(m=Ir(m,d)),m&&m.modifier&&m.modifier(l[d],c,_[f],d))}(c,d)}}}},Cr=Or.registerPlugin({name:"attr",init:function init(c,l,d,f,m){var _,y;for(_ in l)(y=this.add(c,"setAttribute",(c.getAttribute(_)||0)+"",l[_],f,m,0,0,_))&&(y.op=_),this._props.push(_)}},{name:"endArray",init:function init(c,l){for(var d=l.length;d--;)this.add(c,d,c[d]||0,l[d])}},Ar("roundProps",Se),Ar("modifiers"),Ar("snap",Ee))||Or;dr.version=ir.version=Cr.version="3.6.0",v=1,st()&&He();var Mr,Rr,Dr,Fr,Lr,Br,Nr,kr,jr=ze.Power0,Ur=ze.Power1,Gr=ze.Power2,Xr=ze.Power3,Hr=ze.Power4,zr=ze.Linear,Vr=ze.Quad,Yr=ze.Cubic,Wr=ze.Quart,qr=ze.Quint,Kr=ze.Strong,Zr=ze.Elastic,Qr=ze.Back,Jr=ze.SteppedEase,$r=ze.Bounce,ti=ze.Sine,ei=ze.Expo,ri=ze.Circ,ii={},ni=180/Math.PI,oi=Math.PI/180,si=Math.atan2,ai=/([A-Z])/g,ui=/(?:left|right|width|margin|padding|x)/i,hi=/[\s,\(]\S/,ci={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},li=function _renderCSSProp(c,l){return l.set(l.t,l.p,Math.round(1e4*(l.s+l.c*c))/1e4+l.u,l)},di=function _renderPropWithEnd(c,l){return l.set(l.t,l.p,1===c?l.e:Math.round(1e4*(l.s+l.c*c))/1e4+l.u,l)},pi=function _renderCSSPropWithBeginning(c,l){return l.set(l.t,l.p,c?Math.round(1e4*(l.s+l.c*c))/1e4+l.u:l.b,l)},fi=function _renderRoundedCSSProp(c,l){var d=l.s+l.c*c;l.set(l.t,l.p,~~(d+(d<0?-.5:.5))+l.u,l)},mi=function _renderNonTweeningValue(c,l){return l.set(l.t,l.p,c?l.e:l.b,l)},_i=function _renderNonTweeningValueOnlyAtEnd(c,l){return l.set(l.t,l.p,1!==c?l.b:l.e,l)},yi=function _setterCSSStyle(c,l,d){return c.style[l]=d},gi=function _setterCSSProp(c,l,d){return c.style.setProperty(l,d)},vi=function _setterTransform(c,l,d){return c._gsap[l]=d},bi=function _setterScale(c,l,d){return c._gsap.scaleX=c._gsap.scaleY=d},xi=function _setterScaleWithRender(c,l,d,f,m){var _=c._gsap;_.scaleX=_.scaleY=d,_.renderTransform(m,_)},Ti=function _setterTransformWithRender(c,l,d,f,m){var _=c._gsap;_[l]=d,_.renderTransform(m,_)},Si="transform",Ei=Si+"Origin",Pi=function _createElement(c,l){var d=Rr.createElementNS?Rr.createElementNS((l||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),c):Rr.createElement(c);return d.style?d:Rr.createElement(c)},wi=function _getComputedProperty(c,l,d){var f=getComputedStyle(c);return f[l]||f.getPropertyValue(l.replace(ai,"-$1").toLowerCase())||f.getPropertyValue(l)||!d&&_getComputedProperty(c,Ii(l)||l,1)||""},Oi="O,Moz,ms,Ms,Webkit".split(","),Ii=function _checkPropPrefix(c,l,d){var f=(l||Lr).style,m=5;if(c in f&&!d)return c;for(c=c.charAt(0).toUpperCase()+c.substr(1);m--&&!(Oi[m]+c in f););return m<0?null:(3===m?"ms":m>=0?Oi[m]:"")+c},Ai=function _initCore(){(function _windowExists(){return"undefined"!=typeof window})()&&window.document&&(Mr=window,Rr=Mr.document,Dr=Rr.documentElement,Lr=Pi("div")||{style:{}},Br=Pi("div"),Si=Ii(Si),Ei=Si+"Origin",Lr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",kr=!!Ii("perspective"),Fr=1)},Ci=function _getBBoxHack(c){var l,d=Pi("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),f=this.parentNode,m=this.nextSibling,_=this.style.cssText;if(Dr.appendChild(d),d.appendChild(this),this.style.display="block",c)try{l=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=_getBBoxHack}catch(c){}else this._gsapBBox&&(l=this._gsapBBox());return f&&(m?f.insertBefore(this,m):f.appendChild(this)),Dr.removeChild(d),this.style.cssText=_,l},Mi=function _getAttributeFallbacks(c,l){for(var d=l.length;d--;)if(c.hasAttribute(l[d]))return c.getAttribute(l[d])},Ri=function _getBBox(c){var l;try{l=c.getBBox()}catch(d){l=Ci.call(c,!0)}return l&&(l.width||l.height)||c.getBBox===Ci||(l=Ci.call(c,!0)),!l||l.width||l.x||l.y?l:{x:+Mi(c,["x","cx","x1"])||0,y:+Mi(c,["y","cy","y1"])||0,width:0,height:0}},Di=function _isSVG(c){return!(!c.getCTM||c.parentNode&&!c.ownerSVGElement||!Ri(c))},Fi=function _removeProperty(c,l){if(l){var d=c.style;l in ii&&l!==Ei&&(l=Si),d.removeProperty?("ms"!==l.substr(0,2)&&"webkit"!==l.substr(0,6)||(l="-"+l),d.removeProperty(l.replace(ai,"-$1").toLowerCase())):d.removeAttribute(l)}},Li=function _addNonTweeningPT(c,l,d,f,m,_){var y=new wr(c._pt,l,d,0,1,_?_i:mi);return c._pt=y,y.b=f,y.e=m,c._props.push(d),y},Bi={deg:1,rad:1,turn:1},Ni=function _convertToUnit(c,l,d,f){var m,_,y,g,v=parseFloat(d)||0,b=(d+"").trim().substr((v+"").length)||"px",x=Lr.style,T=ui.test(l),S="svg"===c.tagName.toLowerCase(),E=(S?"client":"offset")+(T?"Width":"Height"),P=100,w="px"===f,O="%"===f;return f===b||!v||Bi[f]||Bi[b]?v:("px"!==b&&!w&&(v=_convertToUnit(c,l,d,"px")),g=c.getCTM&&Di(c),!O&&"%"!==b||!ii[l]&&!~l.indexOf("adius")?(x[T?"width":"height"]=P+(w?b:f),_=~l.indexOf("adius")||"em"===f&&c.appendChild&&!S?c:c.parentNode,g&&(_=(c.ownerSVGElement||{}).parentNode),_&&_!==Rr&&_.appendChild||(_=Rr.body),(y=_._gsap)&&O&&y.width&&T&&y.time===Xe.time?Bt(v/y.width*P):((O||"%"===b)&&(x.position=wi(c,"position")),_===c&&(x.position="static"),_.appendChild(Lr),m=Lr[E],_.removeChild(Lr),x.position="absolute",T&&O&&((y=Dt(_)).time=Xe.time,y.width=_[E]),Bt(w?m*v/P:m&&v?P/m*v:0))):(m=g?c.getBBox()[T?"width":"height"]:c[E],Bt(O?v/m*P:v/100*m)))},ki=function _get(c,l,d,f){var m;return Fr||Ai(),l in ci&&"transform"!==l&&~(l=ci[l]).indexOf(",")&&(l=l.split(",")[0]),ii[l]&&"transform"!==l?(m=Zi(c,f),m="transformOrigin"!==l?m[l]:Qi(wi(c,Ei))+" "+m.zOrigin+"px"):(!(m=c.style[l])||"auto"===m||f||~(m+"").indexOf("calc("))&&(m=Hi[l]&&Hi[l](c,l,d)||wi(c,l)||Ft(c,l)||("opacity"===l?1:0)),d&&!~(m+"").trim().indexOf(" ")?Ni(c,l,m,d)+d:m},ji=function _tweenComplexCSSString(c,l,d,f){if(!d||"none"===d){var m=Ii(l,c,1),_=m&&wi(c,m,1);_&&_!==d?(l=m,d=_):"borderColor"===l&&(d=wi(c,"borderTopColor"))}var y,g,v,b,x,T,S,E,P,w,O,I,A=new wr(this._pt,c.style,l,0,1,br),C=0,R=0;if(A.b=d,A.e=f,d+="","auto"===(f+="")&&(c.style[l]=f,f=wi(c,l)||f,c.style[l]=d),Ge(y=[d,f]),f=y[1],v=(d=y[0]).match(dt)||[],(f.match(dt)||[]).length){for(;g=dt.exec(f);)S=g[0],P=f.substring(C,g.index),x?x=(x+1)%5:"rgba("!==P.substr(-5)&&"hsla("!==P.substr(-5)||(x=1),S!==(T=v[R++]||"")&&(b=parseFloat(T)||0,O=T.substr((b+"").length),(I="="===S.charAt(1)?+(S.charAt(0)+"1"):0)&&(S=S.substr(2)),E=parseFloat(S),w=S.substr((E+"").length),C=dt.lastIndex-w.length,w||(w=w||z.units[l]||O,C===f.length&&(f+=w,A.e+=w)),O!==w&&(b=Ni(c,l,T,w)||0),A._pt={_next:A._pt,p:P||1===R?P:",",s:b,c:I?I*E:E-b,m:x&&x<4||"zIndex"===l?Math.round:0});A.c=C<f.length?f.substring(C,f.length):""}else A.r="display"===l&&"none"===f?_i:mi;return ft.test(f)&&(A.e=0),this._pt=A,A},Ui={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Gi=function _convertKeywordsToPercentages(c){var l=c.split(" "),d=l[0],f=l[1]||"50%";return"top"!==d&&"bottom"!==d&&"left"!==f&&"right"!==f||(c=d,d=f,f=c),l[0]=Ui[d]||d,l[1]=Ui[f]||f,l.join(" ")},Xi=function _renderClearProps(c,l){if(l.tween&&l.tween._time===l.tween._dur){var d,f,m,_=l.t,y=_.style,g=l.u,v=_._gsap;if("all"===g||!0===g)y.cssText="",f=1;else for(m=(g=g.split(",")).length;--m>-1;)d=g[m],ii[d]&&(f=1,d="transformOrigin"===d?Ei:Si),Fi(_,d);f&&(Fi(_,Si),v&&(v.svg&&_.removeAttribute("transform"),Zi(_,1),v.uncache=1))}},Hi={clearProps:function clearProps(c,l,d,f,m){if("isFromStart"!==m.data){var _=c._pt=new wr(c._pt,l,d,0,0,Xi);return _.u=f,_.pr=-10,_.tween=m,c._props.push(d),1}}},zi=[1,0,0,1,0,0],Vi={},Yi=function _isNullTransform(c){return"matrix(1, 0, 0, 1, 0, 0)"===c||"none"===c||!c},Wi=function _getComputedTransformMatrixAsArray(c){var l=wi(c,Si);return Yi(l)?zi:l.substr(7).match(lt).map(Bt)},qi=function _getMatrix(c,l){var d,f,m,_,y=c._gsap||Dt(c),g=c.style,v=Wi(c);return y.svg&&c.getAttribute("transform")?"1,0,0,1,0,0"===(v=[(m=c.transform.baseVal.consolidate().matrix).a,m.b,m.c,m.d,m.e,m.f]).join(",")?zi:v:(v!==zi||c.offsetParent||c===Dr||y.svg||(m=g.display,g.display="block",(d=c.parentNode)&&c.offsetParent||(_=1,f=c.nextSibling,Dr.appendChild(c)),v=Wi(c),m?g.display=m:Fi(c,"display"),_&&(f?d.insertBefore(c,f):d?d.appendChild(c):Dr.removeChild(c))),l&&v.length>6?[v[0],v[1],v[4],v[5],v[12],v[13]]:v)},Ki=function _applySVGOrigin(c,l,d,f,m,_){var y,g,v,b=c._gsap,x=m||qi(c,!0),T=b.xOrigin||0,S=b.yOrigin||0,E=b.xOffset||0,P=b.yOffset||0,w=x[0],O=x[1],I=x[2],A=x[3],C=x[4],R=x[5],D=l.split(" "),L=parseFloat(D[0])||0,B=parseFloat(D[1])||0;d?x!==zi&&(g=w*A-O*I)&&(v=L*(-O/g)+B*(w/g)-(w*R-O*C)/g,L=L*(A/g)+B*(-I/g)+(I*R-A*C)/g,B=v):(L=(y=Ri(c)).x+(~D[0].indexOf("%")?L/100*y.width:L),B=y.y+(~(D[1]||D[0]).indexOf("%")?B/100*y.height:B)),f||!1!==f&&b.smooth?(C=L-T,R=B-S,b.xOffset=E+(C*w+R*I)-C,b.yOffset=P+(C*O+R*A)-R):b.xOffset=b.yOffset=0,b.xOrigin=L,b.yOrigin=B,b.smooth=!!f,b.origin=l,b.originIsAbsolute=!!d,c.style[Ei]="0px 0px",_&&(Li(_,b,"xOrigin",T,L),Li(_,b,"yOrigin",S,B),Li(_,b,"xOffset",E,b.xOffset),Li(_,b,"yOffset",P,b.yOffset)),c.setAttribute("data-svg-origin",L+" "+B)},Zi=function _parseTransform(c,l){var d=c._gsap||new er(c);if("x"in d&&!l&&!d.uncache)return d;var f,m,_,y,g,v,b,x,T,S,E,P,w,O,I,A,C,R,D,L,B,N,k,j,U,G,X,H,V,Y,W,q,K=c.style,Z=d.scaleX<0,Q="px",J="deg",$=wi(c,Ei)||"0";return f=m=_=v=b=x=T=S=E=0,y=g=1,d.svg=!(!c.getCTM||!Di(c)),O=qi(c,d.svg),d.svg&&(j=!d.uncache&&c.getAttribute("data-svg-origin"),Ki(c,j||$,!!j||d.originIsAbsolute,!1!==d.smooth,O)),P=d.xOrigin||0,w=d.yOrigin||0,O!==zi&&(R=O[0],D=O[1],L=O[2],B=O[3],f=N=O[4],m=k=O[5],6===O.length?(y=Math.sqrt(R*R+D*D),g=Math.sqrt(B*B+L*L),v=R||D?si(D,R)*ni:0,(T=L||B?si(L,B)*ni+v:0)&&(g*=Math.cos(T*oi)),d.svg&&(f-=P-(P*R+w*L),m-=w-(P*D+w*B))):(q=O[6],Y=O[7],X=O[8],H=O[9],V=O[10],W=O[11],f=O[12],m=O[13],_=O[14],b=(I=si(q,V))*ni,I&&(j=N*(A=Math.cos(-I))+X*(C=Math.sin(-I)),U=k*A+H*C,G=q*A+V*C,X=N*-C+X*A,H=k*-C+H*A,V=q*-C+V*A,W=Y*-C+W*A,N=j,k=U,q=G),x=(I=si(-L,V))*ni,I&&(A=Math.cos(-I),W=B*(C=Math.sin(-I))+W*A,R=j=R*A-X*C,D=U=D*A-H*C,L=G=L*A-V*C),v=(I=si(D,R))*ni,I&&(j=R*(A=Math.cos(I))+D*(C=Math.sin(I)),U=N*A+k*C,D=D*A-R*C,k=k*A-N*C,R=j,N=U),b&&Math.abs(b)+Math.abs(v)>359.9&&(b=v=0,x=180-x),y=Bt(Math.sqrt(R*R+D*D+L*L)),g=Bt(Math.sqrt(k*k+q*q)),I=si(N,k),T=Math.abs(I)>2e-4?I*ni:0,E=W?1/(W<0?-W:W):0),d.svg&&(j=c.getAttribute("transform"),d.forceCSS=c.setAttribute("transform","")||!Yi(wi(c,Si)),j&&c.setAttribute("transform",j))),Math.abs(T)>90&&Math.abs(T)<270&&(Z?(y*=-1,T+=v<=0?180:-180,v+=v<=0?180:-180):(g*=-1,T+=T<=0?180:-180)),d.x=f-((d.xPercent=f&&(d.xPercent||(Math.round(c.offsetWidth/2)===Math.round(-f)?-50:0)))?c.offsetWidth*d.xPercent/100:0)+Q,d.y=m-((d.yPercent=m&&(d.yPercent||(Math.round(c.offsetHeight/2)===Math.round(-m)?-50:0)))?c.offsetHeight*d.yPercent/100:0)+Q,d.z=_+Q,d.scaleX=Bt(y),d.scaleY=Bt(g),d.rotation=Bt(v)+J,d.rotationX=Bt(b)+J,d.rotationY=Bt(x)+J,d.skewX=T+J,d.skewY=S+J,d.transformPerspective=E+Q,(d.zOrigin=parseFloat($.split(" ")[2])||0)&&(K[Ei]=Qi($)),d.xOffset=d.yOffset=0,d.force3D=z.force3D,d.renderTransform=d.svg?sn:kr?nn:$i,d.uncache=0,d},Qi=function _firstTwoOnly(c){return(c=c.split(" "))[0]+" "+c[1]},Ji=function _addPxTranslate(c,l,d){var f=_e(l);return Bt(parseFloat(l)+parseFloat(Ni(c,"x",d+"px",f)))+f},$i=function _renderNon3DTransforms(c,l){l.z="0px",l.rotationY=l.rotationX="0deg",l.force3D=0,nn(c,l)},tn="0deg",en="0px",rn=") ",nn=function _renderCSSTransforms(c,l){var d=l||this,f=d.xPercent,m=d.yPercent,_=d.x,y=d.y,g=d.z,v=d.rotation,b=d.rotationY,x=d.rotationX,T=d.skewX,S=d.skewY,E=d.scaleX,P=d.scaleY,w=d.transformPerspective,O=d.force3D,I=d.target,A=d.zOrigin,C="",R="auto"===O&&c&&1!==c||!0===O;if(A&&(x!==tn||b!==tn)){var D,L=parseFloat(b)*oi,B=Math.sin(L),N=Math.cos(L);L=parseFloat(x)*oi,D=Math.cos(L),_=Ji(I,_,B*D*-A),y=Ji(I,y,-Math.sin(L)*-A),g=Ji(I,g,N*D*-A+A)}w!==en&&(C+="perspective("+w+rn),(f||m)&&(C+="translate("+f+"%, "+m+"%) "),(R||_!==en||y!==en||g!==en)&&(C+=g!==en||R?"translate3d("+_+", "+y+", "+g+") ":"translate("+_+", "+y+rn),v!==tn&&(C+="rotate("+v+rn),b!==tn&&(C+="rotateY("+b+rn),x!==tn&&(C+="rotateX("+x+rn),T===tn&&S===tn||(C+="skew("+T+", "+S+rn),1===E&&1===P||(C+="scale("+E+", "+P+rn),I.style[Si]=C||"translate(0, 0)"},sn=function _renderSVGTransforms(c,l){var d,f,m,_,y,g=l||this,v=g.xPercent,b=g.yPercent,x=g.x,T=g.y,S=g.rotation,E=g.skewX,P=g.skewY,w=g.scaleX,O=g.scaleY,I=g.target,A=g.xOrigin,C=g.yOrigin,R=g.xOffset,D=g.yOffset,L=g.forceCSS,B=parseFloat(x),N=parseFloat(T);S=parseFloat(S),E=parseFloat(E),(P=parseFloat(P))&&(E+=P=parseFloat(P),S+=P),S||E?(S*=oi,E*=oi,d=Math.cos(S)*w,f=Math.sin(S)*w,m=Math.sin(S-E)*-O,_=Math.cos(S-E)*O,E&&(P*=oi,y=Math.tan(E-P),m*=y=Math.sqrt(1+y*y),_*=y,P&&(y=Math.tan(P),d*=y=Math.sqrt(1+y*y),f*=y)),d=Bt(d),f=Bt(f),m=Bt(m),_=Bt(_)):(d=w,_=O,f=m=0),(B&&!~(x+"").indexOf("px")||N&&!~(T+"").indexOf("px"))&&(B=Ni(I,"x",x,"px"),N=Ni(I,"y",T,"px")),(A||C||R||D)&&(B=Bt(B+A-(A*d+C*m)+R),N=Bt(N+C-(A*f+C*_)+D)),(v||b)&&(y=I.getBBox(),B=Bt(B+v/100*y.width),N=Bt(N+b/100*y.height)),y="matrix("+d+","+f+","+m+","+_+","+B+","+N+")",I.setAttribute("transform",y),L&&(I.style[Si]=y)},an=function _addRotationalPropTween(c,l,d,f,m,_){var y,g,v=360,b=tt(m),x=parseFloat(m)*(b&&~m.indexOf("rad")?ni:1),T=_?x*_:x-f,S=f+T+"deg";return b&&("short"===(y=m.split("_")[1])&&(T%=v)!==T%180&&(T+=T<0?v:-360),"cw"===y&&T<0?T=(T+36e9)%v-~~(T/v)*v:"ccw"===y&&T>0&&(T=(T-36e9)%v-~~(T/v)*v)),c._pt=g=new wr(c._pt,l,d,f,T,di),g.e=S,g.u="deg",c._props.push(d),g},un=function _addRawTransformPTs(c,l,d){var f,m,_,y,g,v,b,x=Br.style,T=d._gsap;for(m in x.cssText=getComputedStyle(d).cssText+";position:absolute;display:block;",x[Si]=l,Rr.body.appendChild(Br),f=Zi(Br,1),ii)(_=T[m])!==(y=f[m])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(m)<0&&(g=_e(_)!==(b=_e(y))?Ni(d,m,_,b):parseFloat(_),v=parseFloat(y),c._pt=new wr(c._pt,T,m,g,v-g,li),c._pt.u=b||0,c._props.push(m));Rr.body.removeChild(Br)};Lt("padding,margin,Width,Radius",(function(c,l){var d="Top",f="Right",m="Bottom",_="Left",y=(l<3?[d,f,m,_]:[d+_,d+f,m+f,m+_]).map((function(d){return l<2?c+d:"border"+d+c}));Hi[l>1?"border"+c:c]=function(c,l,d,f,m){var _,g;if(arguments.length<4)return _=y.map((function(l){return ki(c,l,d)})),5===(g=_.join(" ")).split(_[0]).length?_[0]:g;_=(f+"").split(" "),g={},y.forEach((function(c,l){return g[c]=_[l]=_[l]||_[(l-1)/2|0]})),c.init(l,g,m)}}));var hn,cn,ln,dn={name:"css",register:Ai,targetTest:function targetTest(c){return c.style&&c.nodeType},init:function init(c,l,d,f,m){var _,y,g,v,b,x,T,S,E,P,w,O,I,A,C,R=this._props,D=c.style,L=d.vars.startAt;for(T in Fr||Ai(),l)if("autoRound"!==T&&(y=l[T],!Ot[T]||!ar(T,l,d,f,c,m)))if(b=typeof y,x=Hi[T],"function"===b&&(b=typeof(y=y.call(d,f,c,m))),"string"===b&&~y.indexOf("random(")&&(y=Oe(y)),x)x(this,c,T,y,d)&&(C=1);else if("--"===T.substr(0,2))_=(getComputedStyle(c).getPropertyValue(T)+"").trim(),y+="",S=_e(_),(E=_e(y))?S!==E&&(_=Ni(c,T,_,E)+E):S&&(y+=S),this.add(D,"setProperty",_,y,f,m,0,0,T);else if("undefined"!==b){if(L&&T in L?(_="function"==typeof L[T]?L[T].call(d,f,c,m):L[T],T in z.units&&!_e(_)&&(_+=z.units[T]),"="===(_+"").charAt(1)&&(_=ki(c,T))):_=ki(c,T),v=parseFloat(_),(P="string"===b&&"="===y.charAt(1)?+(y.charAt(0)+"1"):0)&&(y=y.substr(2)),g=parseFloat(y),T in ci&&("autoAlpha"===T&&(1===v&&"hidden"===ki(c,"visibility")&&g&&(v=0),Li(this,D,"visibility",v?"inherit":"hidden",g?"inherit":"hidden",!g)),"scale"!==T&&"transform"!==T&&~(T=ci[T]).indexOf(",")&&(T=T.split(",")[0])),w=T in ii)if(O||((I=c._gsap).renderTransform&&!l.parseTransform||Zi(c,l.parseTransform),A=!1!==l.smoothOrigin&&I.smooth,(O=this._pt=new wr(this._pt,D,Si,0,1,I.renderTransform,I,0,-1)).dep=1),"scale"===T)this._pt=new wr(this._pt,I,"scaleY",I.scaleY,P?P*g:g-I.scaleY),R.push("scaleY",T),T+="X";else{if("transformOrigin"===T){y=Gi(y),I.svg?Ki(c,y,0,A,0,this):((E=parseFloat(y.split(" ")[2])||0)!==I.zOrigin&&Li(this,I,"zOrigin",I.zOrigin,E),Li(this,D,T,Qi(_),Qi(y)));continue}if("svgOrigin"===T){Ki(c,y,1,A,0,this);continue}if(T in Vi){an(this,I,T,v,y,P);continue}if("smoothOrigin"===T){Li(this,I,"smooth",I.smooth,y);continue}if("force3D"===T){I[T]=y;continue}if("transform"===T){un(this,y,c);continue}}else T in D||(T=Ii(T)||T);if(w||(g||0===g)&&(v||0===v)&&!hi.test(y)&&T in D)g||(g=0),(S=(_+"").substr((v+"").length))!==(E=_e(y)||(T in z.units?z.units[T]:S))&&(v=Ni(c,T,_,E)),this._pt=new wr(this._pt,w?I:D,T,v,P?P*g:g-v,w||"px"!==E&&"zIndex"!==T||!1===l.autoRound?li:fi),this._pt.u=E||0,S!==E&&(this._pt.b=_,this._pt.r=pi);else if(T in D)ji.call(this,c,T,_,y);else{if(!(T in c)){bt(T,y);continue}this.add(c,T,c[T],y,f,m)}R.push(T)}C&&Pr(this)},get:ki,aliases:ci,getSetter:function getSetter(c,l,d){var f=ci[l];return f&&f.indexOf(",")<0&&(l=f),l in ii&&l!==Ei&&(c._gsap.x||ki(c,"x"))?d&&Nr===d?"scale"===l?bi:vi:(Nr=d||{})&&("scale"===l?xi:Ti):c.style&&!it(c.style[l])?yi:~l.indexOf("-")?gi:yr(c,l)},core:{_removeProperty:Fi,_getMatrix:qi}};Cr.utils.checkPrefix=Ii,ln=Lt((hn="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(cn="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(c){ii[c]=1})),Lt(cn,(function(c){z.units[c]="deg",Vi[c]=1})),ci[ln[13]]=hn+","+cn,Lt("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(c){var l=c.split(":");ci[l[1]]=ln[l[0]]})),Lt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(c){z.units[c]="px"})),Cr.registerPlugin(dn);var pn=Cr.registerPlugin(dn)||Cr,fn=pn.core.Tween},function(c,l,d){(function(f,m){var _;!function(f){var y=f.Promise,g=y&&"resolve"in y&&"reject"in y&&"all"in y&&"race"in y&&function(){var c;return new y((function(l){c=l})),"function"==typeof c}();l?(l.Promise=g?y:Promise,l.Polyfill=Promise):void 0===(_=function(){return g?y:Promise}.call(l,d,l,c))||(c.exports=_);var v="pending",b="sealed",x="fulfilled",T="rejected",NOOP=function(){};function isArray(c){return"[object Array]"===Object.prototype.toString.call(c)}var S,E=void 0!==m?m:setTimeout,P=[];function asyncFlush(){for(var c=0;c<P.length;c++)P[c][0](P[c][1]);P=[],S=!1}function asyncCall(c,l){P.push([c,l]),S||(S=!0,E(asyncFlush,0))}function invokeCallback(c){var l=c.owner,d=l.state_,f=l.data_,m=c[d],_=c.then;if("function"==typeof m){d=x;try{f=m(f)}catch(c){reject(_,c)}}handleThenable(_,f)||(d===x&&resolve(_,f),d===T&&reject(_,f))}function handleThenable(c,l){var d;try{if(c===l)throw new TypeError("A promises callback cannot return that same promise.");if(l&&("function"==typeof l||"object"==typeof l)){var f=l.then;if("function"==typeof f)return f.call(l,(function(f){d||(d=!0,l!==f?resolve(c,f):fulfill(c,f))}),(function(l){d||(d=!0,reject(c,l))})),!0}}catch(l){return d||reject(c,l),!0}return!1}function resolve(c,l){c!==l&&handleThenable(c,l)||fulfill(c,l)}function fulfill(c,l){c.state_===v&&(c.state_=b,c.data_=l,asyncCall(publishFulfillment,c))}function reject(c,l){c.state_===v&&(c.state_=b,c.data_=l,asyncCall(publishRejection,c))}function publish(c){var l=c.then_;c.then_=void 0;for(var d=0;d<l.length;d++)invokeCallback(l[d])}function publishFulfillment(c){c.state_=x,publish(c)}function publishRejection(c){c.state_=T,publish(c)}function Promise(c){if("function"!=typeof c)throw new TypeError("Promise constructor takes a function argument");if(this instanceof Promise==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function invokeResolver(c,l){function rejectPromise(c){reject(l,c)}try{c((function resolvePromise(c){resolve(l,c)}),rejectPromise)}catch(c){rejectPromise(c)}}(c,this)}Promise.prototype={constructor:Promise,state_:v,then_:null,data_:void 0,then:function(c,l){var d={owner:this,then:new this.constructor(NOOP),fulfilled:c,rejected:l};return this.state_===x||this.state_===T?asyncCall(invokeCallback,d):this.then_.push(d),d.then},catch:function(c){return this.then(null,c)}},Promise.all=function(c){if(!isArray(c))throw new TypeError("You must pass an array to Promise.all().");return new this((function(l,d){var f=[],m=0;function resolver(c){return m++,function(d){f[c]=d,--m||l(f)}}for(var _,y=0;y<c.length;y++)(_=c[y])&&"function"==typeof _.then?_.then(resolver(y),d):f[y]=_;m||l(f)}))},Promise.race=function(c){if(!isArray(c))throw new TypeError("You must pass an array to Promise.race().");return new this((function(l,d){for(var f,m=0;m<c.length;m++)(f=c[m])&&"function"==typeof f.then?f.then(l,d):l(f)}))},Promise.resolve=function(c){return c&&"object"==typeof c&&c.constructor===this?c:new this((function(l){l(c)}))},Promise.reject=function(c){return new this((function(l,d){d(c)}))}}("undefined"!=typeof window?window:void 0!==f?f:"undefined"!=typeof self?self:this)}).call(this,d(19),d(88).setImmediate)},function(c,l,d){"use strict";var f=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;function toObject(c){if(null==c)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(c)}c.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var c=new String("abc");if(c[5]="de","5"===Object.getOwnPropertyNames(c)[0])return!1;for(var l={},d=0;d<10;d++)l["_"+String.fromCharCode(d)]=d;if("0123456789"!==Object.getOwnPropertyNames(l).map((function(c){return l[c]})).join(""))return!1;var f={};return"abcdefghijklmnopqrst".split("").forEach((function(c){f[c]=c})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},f)).join("")}catch(c){return!1}}()?Object.assign:function(c,l){for(var d,y,g=toObject(c),v=1;v<arguments.length;v++){for(var b in d=Object(arguments[v]))m.call(d,b)&&(g[b]=d[b]);if(f){y=f(d);for(var x=0;x<y.length;x++)_.call(d,y[x])&&(g[y[x]]=d[y[x]])}}return g}},function(c,l){c.exports=!1},function(c,l,d){var f=d(46);c.exports=f&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(c,l,d){var f,m,_,y=d(63),g=d(8),v=d(13),b=d(26),x=d(14),T=d(48),S=d(32),E=g.WeakMap;if(y){var P=new E,w=P.get,O=P.has,I=P.set;f=function(c,l){return I.call(P,c,l),l},m=function(c){return w.call(P,c)||{}},_=function(c){return O.call(P,c)}}else{var A=T("state");S[A]=!0,f=function(c,l){return b(c,A,l),l},m=function(c){return x(c,A)?c[A]:{}},_=function(c){return x(c,A)}}c.exports={set:f,get:m,has:_,enforce:function(c){return _(c)?m(c):f(c,{})},getterFor:function(c){return function(l){var d;if(!v(l)||(d=m(l)).type!==c)throw TypeError("Incompatible receiver, "+c+" required");return d}}}},function(c,l,d){var f=d(8),m=d(47),_=f.WeakMap;c.exports="function"==typeof _&&/native code/.test(m(_))},function(c,l,d){"use strict";var f=d(28),m=d(65);c.exports=f?{}.toString:function toString(){return"[object "+m(this)+"]"}},function(c,l,d){var f=d(28),m=d(49),_=d(38)("toStringTag"),y="Arguments"==m(function(){return arguments}());c.exports=f?m:function(c){var l,d,f;return void 0===c?"Undefined":null===c?"Null":"string"==typeof(d=function(c,l){try{return c[l]}catch(c){}}(l=Object(c),_))?d:y?m(l):"Object"==(f=m(l))&&"function"==typeof l.callee?"Arguments":f}},function(c,l,d){var f=d(8),m=d(50).f,_=d(26),y=d(31),g=d(29),v=d(70),b=d(78);c.exports=function(c,l){var d,x,T,S,E,P=c.target,w=c.global,O=c.stat;if(d=w?f:O?f[P]||g(P,{}):(f[P]||{}).prototype)for(x in l){if(S=l[x],T=c.noTargetGet?(E=m(d,x))&&E.value:d[x],!b(w?x:P+(O?".":"#")+x,c.forced)&&void 0!==T){if(typeof S==typeof T)continue;v(S,T)}(c.sham||T&&T.sham)&&_(S,"sham",!0),y(d,x,S,c)}}},function(c,l,d){"use strict";var f={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,_=m&&!f.call({1:2},1);l.f=_?function propertyIsEnumerable(c){var l=m(this,c);return!!l&&l.enumerable}:f},function(c,l,d){var f=d(10),m=d(49),_="".split;c.exports=f((function(){return!Object("z").propertyIsEnumerable(0)}))?function(c){return"String"==m(c)?_.call(c,""):Object(c)}:Object},function(c,l){c.exports=function(c){if(null==c)throw TypeError("Can't call method on "+c);return c}},function(c,l,d){var f=d(14),m=d(71),_=d(50),y=d(30);c.exports=function(c,l){for(var d=m(l),g=y.f,v=_.f,b=0;b<d.length;b++){var x=d[b];f(c,x)||g(c,x,v(l,x))}}},function(c,l,d){var f=d(34),m=d(73),_=d(77),y=d(11);c.exports=f("Reflect","ownKeys")||function ownKeys(c){var l=m.f(y(c)),d=_.f;return d?l.concat(d(c)):l}},function(c,l,d){var f=d(8);c.exports=f},function(c,l,d){var f=d(51),m=d(35).concat("length","prototype");l.f=Object.getOwnPropertyNames||function getOwnPropertyNames(c){return f(c,m)}},function(c,l,d){var f=d(33),m=d(75),_=d(76),createMethod=function(c){return function(l,d,y){var g,v=f(l),b=m(v.length),x=_(y,b);if(c&&d!=d){for(;b>x;)if((g=v[x++])!=g)return!0}else for(;b>x;x++)if((c||x in v)&&v[x]===d)return c||x||0;return!c&&-1}};c.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},function(c,l,d){var f=d(52),m=Math.min;c.exports=function(c){return c>0?m(f(c),9007199254740991):0}},function(c,l,d){var f=d(52),m=Math.max,_=Math.min;c.exports=function(c,l){var d=f(c);return d<0?m(d+l,0):_(d,l)}},function(c,l){l.f=Object.getOwnPropertySymbols},function(c,l,d){var f=d(10),m=/#|\.prototype\./,isForced=function(c,l){var d=y[_(c)];return d==v||d!=g&&("function"==typeof l?f(l):!!l)},_=isForced.normalize=function(c){return String(c).replace(m,".").toLowerCase()},y=isForced.data={},g=isForced.NATIVE="N",v=isForced.POLYFILL="P";c.exports=isForced},function(c,l,d){var f,m=d(11),_=d(80),y=d(35),g=d(32),v=d(82),b=d(42),x=d(48),T=x("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(c){return"<script>"+c+"</"+"script>"},NullProtoObject=function(){try{f=document.domain&&new ActiveXObject("htmlfile")}catch(c){}var c,l;NullProtoObject=f?function(c){c.write(scriptTag("")),c.close();var l=c.parentWindow.Object;return c=null,l}(f):((l=b("iframe")).style.display="none",v.appendChild(l),l.src=String("javascript:"),(c=l.contentWindow.document).open(),c.write(scriptTag("document.F=Object")),c.close(),c.F);for(var d=y.length;d--;)delete NullProtoObject.prototype[y[d]];return NullProtoObject()};g[T]=!0,c.exports=Object.create||function create(c,l){var d;return null!==c?(EmptyConstructor.prototype=m(c),d=new EmptyConstructor,EmptyConstructor.prototype=null,d[T]=c):d=NullProtoObject(),void 0===l?d:_(d,l)}},function(c,l,d){var f=d(20),m=d(30),_=d(11),y=d(81);c.exports=f?Object.defineProperties:function defineProperties(c,l){_(c);for(var d,f=y(l),g=f.length,v=0;g>v;)m.f(c,d=f[v++],l[d]);return c}},function(c,l,d){var f=d(51),m=d(35);c.exports=Object.keys||function keys(c){return f(c,m)}},function(c,l,d){var f=d(34);c.exports=f("document","documentElement")},function(c,l,d){"use strict";var f=d(53),m=d(13),_=[].slice,y={},construct=function(c,l,d){if(!(l in y)){for(var f=[],m=0;m<l;m++)f[m]="a["+m+"]";y[l]=Function("C,a","return new C("+f.join(",")+")")}return y[l](c,d)};c.exports=Function.bind||function bind(c){var l=f(this),d=_.call(arguments,1),y=function bound(){var f=d.concat(_.call(arguments));return this instanceof y?construct(l,f.length,f):l.apply(c,f)};return m(l.prototype)&&(y.prototype=l.prototype),y}},function(c,l,d){"use strict";var f=d(11);c.exports=function(){var c=f(this),l="";return c.global&&(l+="g"),c.ignoreCase&&(l+="i"),c.multiline&&(l+="m"),c.dotAll&&(l+="s"),c.unicode&&(l+="u"),c.sticky&&(l+="y"),l}},function(c,l){function _setPrototypeOf(l,d){return c.exports=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(c,l){return c.__proto__=l,c},_setPrototypeOf(l,d)}c.exports=_setPrototypeOf},function(c,l){function _typeof(l){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?c.exports=_typeof=function _typeof(c){return typeof c}:c.exports=_typeof=function _typeof(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},_typeof(l)}c.exports=_typeof},,function(c,l,d){(function(c){var f=void 0!==c&&c||"undefined"!=typeof self&&self||window,m=Function.prototype.apply;function Timeout(c,l){this._id=c,this._clearFn=l}l.setTimeout=function(){return new Timeout(m.call(setTimeout,f,arguments),clearTimeout)},l.setInterval=function(){return new Timeout(m.call(setInterval,f,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(c){c&&c.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(f,this._id)},l.enroll=function(c,l){clearTimeout(c._idleTimeoutId),c._idleTimeout=l},l.unenroll=function(c){clearTimeout(c._idleTimeoutId),c._idleTimeout=-1},l._unrefActive=l.active=function(c){clearTimeout(c._idleTimeoutId);var l=c._idleTimeout;l>=0&&(c._idleTimeoutId=setTimeout((function onTimeout(){c._onTimeout&&c._onTimeout()}),l))},d(89),l.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==c&&c.setImmediate||this&&this.setImmediate,l.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==c&&c.clearImmediate||this&&this.clearImmediate}).call(this,d(19))},function(c,l,d){(function(c,l){!function(c,d){"use strict";if(!c.setImmediate){var f,m=1,_={},y=!1,g=c.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(c);v=v&&v.setTimeout?v:c,"[object process]"==={}.toString.call(c.process)?function installNextTickImplementation(){f=function(c){l.nextTick((function(){runIfPresent(c)}))}}():!function canUsePostMessage(){if(c.postMessage&&!c.importScripts){var l=!0,d=c.onmessage;return c.onmessage=function(){l=!1},c.postMessage("","*"),c.onmessage=d,l}}()?c.MessageChannel?function installMessageChannelImplementation(){var c=new MessageChannel;c.port1.onmessage=function(c){runIfPresent(c.data)},f=function(l){c.port2.postMessage(l)}}():g&&"onreadystatechange"in g.createElement("script")?function installReadyStateChangeImplementation(){var c=g.documentElement;f=function(l){var d=g.createElement("script");d.onreadystatechange=function(){runIfPresent(l),d.onreadystatechange=null,c.removeChild(d),d=null},c.appendChild(d)}}():function installSetTimeoutImplementation(){f=function(c){setTimeout(runIfPresent,0,c)}}():function installPostMessageImplementation(){var l="setImmediate$"+Math.random()+"$",onGlobalMessage=function(d){d.source===c&&"string"==typeof d.data&&0===d.data.indexOf(l)&&runIfPresent(+d.data.slice(l.length))};c.addEventListener?c.addEventListener("message",onGlobalMessage,!1):c.attachEvent("onmessage",onGlobalMessage),f=function(d){c.postMessage(l+d,"*")}}(),v.setImmediate=function setImmediate(c){"function"!=typeof c&&(c=new Function(""+c));for(var l=new Array(arguments.length-1),d=0;d<l.length;d++)l[d]=arguments[d+1];var y={callback:c,args:l};return _[m]=y,f(m),m++},v.clearImmediate=clearImmediate}function clearImmediate(c){delete _[c]}function runIfPresent(c){if(y)setTimeout(runIfPresent,0,c);else{var l=_[c];if(l){y=!0;try{!function run(c){var l=c.callback,d=c.args;switch(d.length){case 0:l();break;case 1:l(d[0]);break;case 2:l(d[0],d[1]);break;case 3:l(d[0],d[1],d[2]);break;default:l.apply(void 0,d)}}(l)}finally{clearImmediate(c),y=!1}}}}}("undefined"==typeof self?void 0===c?this:c:self)}).call(this,d(19),d(90))},function(c,l){var d,f,m=c.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(c){if(d===setTimeout)return setTimeout(c,0);if((d===defaultSetTimout||!d)&&setTimeout)return d=setTimeout,setTimeout(c,0);try{return d(c,0)}catch(l){try{return d.call(null,c,0)}catch(l){return d.call(this,c,0)}}}!function(){try{d="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(c){d=defaultSetTimout}try{f="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(c){f=defaultClearTimeout}}();var _,y=[],g=!1,v=-1;function cleanUpNextTick(){g&&_&&(g=!1,_.length?y=_.concat(y):v=-1,y.length&&drainQueue())}function drainQueue(){if(!g){var c=runTimeout(cleanUpNextTick);g=!0;for(var l=y.length;l;){for(_=y,y=[];++v<l;)_&&_[v].run();v=-1,l=y.length}_=null,g=!1,function runClearTimeout(c){if(f===clearTimeout)return clearTimeout(c);if((f===defaultClearTimeout||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(c);try{return f(c)}catch(l){try{return f.call(null,c)}catch(l){return f.call(this,c)}}}(c)}}function Item(c,l){this.fun=c,this.array=l}function noop(){}m.nextTick=function(c){var l=new Array(arguments.length-1);if(arguments.length>1)for(var d=1;d<arguments.length;d++)l[d-1]=arguments[d];y.push(new Item(c,l)),1!==y.length||g||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=noop,m.addListener=noop,m.once=noop,m.off=noop,m.removeListener=noop,m.removeAllListeners=noop,m.emit=noop,m.prependListener=noop,m.prependOnceListener=noop,m.listeners=function(c){return[]},m.binding=function(c){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(c){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},function(c,l,d){(function(c,f){var m;!function(_){l&&l.nodeType,c&&c.nodeType;var y="object"==typeof f&&f;y.global!==y&&y.window!==y&&y.self;var g,v=2147483647,b=36,x=/^xn--/,T=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=Math.floor,w=String.fromCharCode;function error(c){throw RangeError(E[c])}function map(c,l){for(var d=c.length,f=[];d--;)f[d]=l(c[d]);return f}function mapDomain(c,l){var d=c.split("@"),f="";return d.length>1&&(f=d[0]+"@",c=d[1]),f+map((c=c.replace(S,".")).split("."),l).join(".")}function ucs2decode(c){for(var l,d,f=[],m=0,_=c.length;m<_;)(l=c.charCodeAt(m++))>=55296&&l<=56319&&m<_?56320==(64512&(d=c.charCodeAt(m++)))?f.push(((1023&l)<<10)+(1023&d)+65536):(f.push(l),m--):f.push(l);return f}function ucs2encode(c){return map(c,(function(c){var l="";return c>65535&&(l+=w((c-=65536)>>>10&1023|55296),c=56320|1023&c),l+=w(c)})).join("")}function digitToBasic(c,l){return c+22+75*(c<26)-((0!=l)<<5)}function adapt(c,l,d){var f=0;for(c=d?P(c/700):c>>1,c+=P(c/l);c>455;f+=b)c=P(c/35);return P(f+36*c/(c+38))}function decode(c){var l,d,f,m,_,y,g,x,T,S,E,w=[],O=c.length,I=0,A=128,C=72;for((d=c.lastIndexOf("-"))<0&&(d=0),f=0;f<d;++f)c.charCodeAt(f)>=128&&error("not-basic"),w.push(c.charCodeAt(f));for(m=d>0?d+1:0;m<O;){for(_=I,y=1,g=b;m>=O&&error("invalid-input"),((x=(E=c.charCodeAt(m++))-48<10?E-22:E-65<26?E-65:E-97<26?E-97:b)>=b||x>P((v-I)/y))&&error("overflow"),I+=x*y,!(x<(T=g<=C?1:g>=C+26?26:g-C));g+=b)y>P(v/(S=b-T))&&error("overflow"),y*=S;C=adapt(I-_,l=w.length+1,0==_),P(I/l)>v-A&&error("overflow"),A+=P(I/l),I%=l,w.splice(I++,0,A)}return ucs2encode(w)}function encode(c){var l,d,f,m,_,y,g,x,T,S,E,O,I,A,C,R=[];for(O=(c=ucs2decode(c)).length,l=128,d=0,_=72,y=0;y<O;++y)(E=c[y])<128&&R.push(w(E));for(f=m=R.length,m&&R.push("-");f<O;){for(g=v,y=0;y<O;++y)(E=c[y])>=l&&E<g&&(g=E);for(g-l>P((v-d)/(I=f+1))&&error("overflow"),d+=(g-l)*I,l=g,y=0;y<O;++y)if((E=c[y])<l&&++d>v&&error("overflow"),E==l){for(x=d,T=b;!(x<(S=T<=_?1:T>=_+26?26:T-_));T+=b)C=x-S,A=b-S,R.push(w(digitToBasic(S+C%A,0))),x=P(C/A);R.push(w(digitToBasic(x,0))),_=adapt(d,I,f==m),d=0,++f}++d,++l}return R.join("")}g={version:"1.3.2",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:function toASCII(c){return mapDomain(c,(function(c){return T.test(c)?"xn--"+encode(c):c}))},toUnicode:function toUnicode(c){return mapDomain(c,(function(c){return x.test(c)?decode(c.slice(4).toLowerCase()):c}))}},void 0===(m=function(){return g}.call(l,d,l,c))||(c.exports=m)}()}).call(this,d(92)(c),d(19))},function(c,l){c.exports=function(c){return c.webpackPolyfill||(c.deprecate=function(){},c.paths=[],c.children||(c.children=[]),Object.defineProperty(c,"loaded",{enumerable:!0,get:function(){return c.l}}),Object.defineProperty(c,"id",{enumerable:!0,get:function(){return c.i}}),c.webpackPolyfill=1),c}},function(c,l,d){"use strict";c.exports={isString:function(c){return"string"==typeof c},isObject:function(c){return"object"==typeof c&&null!==c},isNull:function(c){return null===c},isNullOrUndefined:function(c){return null==c}}},function(c,l,d){"use strict";l.decode=l.parse=d(95),l.encode=l.stringify=d(96)},function(c,l,d){"use strict";function hasOwnProperty(c,l){return Object.prototype.hasOwnProperty.call(c,l)}c.exports=function(c,l,d,m){l=l||"&",d=d||"=";var _={};if("string"!=typeof c||0===c.length)return _;var y=/\+/g;c=c.split(l);var g=1e3;m&&"number"==typeof m.maxKeys&&(g=m.maxKeys);var v=c.length;g>0&&v>g&&(v=g);for(var b=0;b<v;++b){var x,T,S,E,P=c[b].replace(y,"%20"),w=P.indexOf(d);w>=0?(x=P.substr(0,w),T=P.substr(w+1)):(x=P,T=""),S=decodeURIComponent(x),E=decodeURIComponent(T),hasOwnProperty(_,S)?f(_[S])?_[S].push(E):_[S]=[_[S],E]:_[S]=E}return _};var f=Array.isArray||function(c){return"[object Array]"===Object.prototype.toString.call(c)}},function(c,l,d){"use strict";var stringifyPrimitive=function(c){switch(typeof c){case"string":return c;case"boolean":return c?"true":"false";case"number":return isFinite(c)?c:"";default:return""}};c.exports=function(c,l,d,_){return l=l||"&",d=d||"=",null===c&&(c=void 0),"object"==typeof c?map(m(c),(function(m){var _=encodeURIComponent(stringifyPrimitive(m))+d;return f(c[m])?map(c[m],(function(c){return _+encodeURIComponent(stringifyPrimitive(c))})).join(l):_+encodeURIComponent(stringifyPrimitive(c[m]))})).join(l):_?encodeURIComponent(stringifyPrimitive(_))+d+encodeURIComponent(stringifyPrimitive(c)):""};var f=Array.isArray||function(c){return"[object Array]"===Object.prototype.toString.call(c)};function map(c,l){if(c.map)return c.map(l);for(var d=[],f=0;f<c.length;f++)d.push(l(c[f],f));return d}var m=Object.keys||function(c){var l=[];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&l.push(d);return l}},,function(c,l,d){var f=d(99);function _get(l,d,m){return"undefined"!=typeof Reflect&&Reflect.get?c.exports=_get=Reflect.get:c.exports=_get=function _get(c,l,d){var m=f(c,l);if(m){var _=Object.getOwnPropertyDescriptor(m,l);return _.get?_.get.call(d):_.value}},_get(l,d,m||l)}c.exports=_get},function(c,l,d){var f=d(17);c.exports=function _superPropBase(c,l){for(;!Object.prototype.hasOwnProperty.call(c,l)&&null!==(c=f(c)););return c}},,,,function(c,l,d){"use strict";d.r(l);var f=d(6),m=d(5),_=d(0),y=d(2),g=function(){function t(c,l){this._output=l,this._input=c}return Object.defineProperty(t.prototype,"destination",{get:function(){return this._input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters},set:function(c){var l=this;if(this._filters&&(this._filters.forEach((function(c){c&&c.disconnect()})),this._filters=null,this._input.connect(this._output)),c&&c.length){this._filters=c.slice(0),this._input.disconnect();var d=null;c.forEach((function(c){null===d?l._input.connect(c.destination):d.connect(c.destination),d=c})),d.connect(this._output)}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},t}(),v=function(){function t(c,l){this.init(c,l)}return t.prototype.init=function(c,l){this.destination=c,this.source=l||c},t.prototype.connect=function(c){this.source.connect(c)},t.prototype.disconnect=function(){this.source.disconnect()},t.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},t}(),u=function(c,l){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d])})(c,l)};function a(c,l){function n(){this.constructor=c}u(c,l),c.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)}var b,p=function(){return(p=Object.assign||function(c){for(var l,d=1,f=arguments.length;d<f;d++)for(var m in l=arguments[d])Object.prototype.hasOwnProperty.call(l,m)&&(c[m]=l[m]);return c}).apply(this,arguments)};function h(){return b}var x,T,S,E,P=function(){function t(){}return t.setParamValue=function(c,l){if(c.setValueAtTime){var d=h().context;c.setValueAtTime(l,d.audioContext.currentTime)}else c.value=l;return l},t}(),w=0,O=function(c){function e(l){var d=c.call(this)||this;return d.id=w++,d._media=null,d._paused=!1,d._muted=!1,d._elapsed=0,d.init(l),d}return a(e,c),e.prototype.set=function(c,l){if(void 0===this[c])throw new Error("Property with name "+c+" does not exist.");return this[c]=l,this},e.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(c){this._speed=c,this.refresh(),this._update(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(c){this._volume=c,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(c){this._muted=c,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(c){this._loop=c,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){if(this._source){var c=this._media.context,l=this._media.parent;this._source.loop=this._loop||l.loop;var d=c.volume*(c.muted?0:1),f=l.volume*(l.muted?0:1),m=this._volume*(this._muted?0:1);P.setParamValue(this._gain.gain,m*f*d),P.setParamValue(this._source.playbackRate,this._speed*l.speed*c.speed)}},e.prototype.refreshPaused=function(){var c=this._media.context,l=this._media.parent,d=this._paused||l.paused||c.paused;d!==this._pausedReal&&(this._pausedReal=d,d?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",d))},e.prototype.play=function(c){var l=c.start,d=c.end,f=c.speed,m=c.loop,_=c.volume,y=c.muted;this._paused=!1;var g=this._media.nodes.cloneBufferSource(),v=g.source,b=g.gain;this._source=v,this._gain=b,this._speed=f,this._volume=_,this._loop=!!m,this._muted=y,this.refresh();var x=this._source.buffer.duration;this._duration=x,this._end=d,this._lastUpdate=this._now(),this._elapsed=l,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=d,this._source.loopStart=l,this._source.start(0,l)):d?this._source.start(0,l,d-l):this._source.start(0,l),this.emit("start"),this._update(!0),this._enabled=!0},e.prototype._toSec=function(c){return c>10&&(c/=1e3),c||0},Object.defineProperty(e.prototype,"_enabled",{set:function(c){m.a.shared.remove(this._updateListener,this),c&&m.a.shared.add(this._updateListener,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(c){this._paused=c,this.refreshPaused()},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1},e.prototype.toString=function(){return"[WebAudioInstance id="+this.id+"]"},e.prototype._now=function(){return this._media.context.audioContext.currentTime},e.prototype._updateListener=function(){this._update()},e.prototype._update=function(c){if(void 0===c&&(c=!1),this._source){var l=this._now(),d=l-this._lastUpdate;if(d>0||c){var f=this._source.playbackRate.value;this._elapsed+=d*f,this._lastUpdate=l;var m=this._duration,_=void 0;if(this._source.loopStart){var y=this._source.loopEnd-this._source.loopStart;_=(this._source.loopStart+this._elapsed%y)/m}else _=this._elapsed%m/m;this._progress=_,this.emit("progress",this._progress,m)}}},e.prototype.init=function(c){this._media=c,c.context.events.on("refresh",this.refresh,this),c.context.events.on("refreshPaused",this.refreshPaused,this)},e.prototype._internalStop=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.stop(0),this._source.disconnect(),this._source=null)},e.prototype._onComplete=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.disconnect()),this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},e}(_.EventEmitter),I=function(c){function e(l){var d=this,f=l.audioContext,m=f.createBufferSource(),_=f.createGain(),y=f.createAnalyser();return m.connect(y),y.connect(_),_.connect(l.destination),(d=c.call(this,y,_)||this).context=l,d.bufferSource=m,d.gain=_,d.analyser=y,d}return a(e,c),Object.defineProperty(e.prototype,"script",{get:function(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(e.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){c.prototype.destroy.call(this),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null},e.prototype.cloneBufferSource=function(){var c=this.bufferSource,l=this.context.audioContext.createBufferSource();l.buffer=c.buffer,P.setParamValue(l.playbackRate,c.playbackRate.value),l.loop=c.loop;var d=this.context.audioContext.createGain();return l.connect(d),d.connect(this.destination),{source:l,gain:d}},Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this.script.bufferSize},enumerable:!0,configurable:!0}),e.BUFFER_SIZE=0,e}(g),A=function(){function t(){}return t.prototype.init=function(c){this.parent=c,this._nodes=new I(this.context),this._source=this._nodes.bufferSource,this.source=c.options.source},t.prototype.destroy=function(){this.parent=null,this._nodes.destroy(),this._nodes=null,this._source=null,this.source=null},t.prototype.create=function(){return new O(this)},Object.defineProperty(t.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlayable",{get:function(){return!!this._source&&!!this._source.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._nodes.filters},set:function(c){this._nodes.filters=c},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._source.buffer.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._source.buffer},set:function(c){this._source.buffer=c},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),t.prototype.load=function(c){this.source?this._decode(this.source,c):this.parent.url?this._loadUrl(c):c&&c(new Error("sound.url or sound.source must be set"))},t.prototype._loadUrl=function(c){var l=this,d=new XMLHttpRequest,f=this.parent.url;d.open("GET",f,!0),d.responseType="arraybuffer",d.onload=function(){l.source=d.response,l._decode(d.response,c)},d.send()},t.prototype._decode=function(c,l){var d=this;this.parent.context.decode(c,(function(c,f){if(c)l&&l(c);else{d.parent.isLoaded=!0,d.buffer=f;var m=d.parent.autoPlayStart();l&&l(null,d.parent,m)}}))},t}(),C=function(c){function e(){var l=this,d=window,f=new e.AudioContext,m=f.createDynamicsCompressor(),y=f.createAnalyser();return y.connect(m),m.connect(f.destination),(l=c.call(this,y,m)||this)._ctx=f,l._offlineCtx=new e.OfflineAudioContext(1,2,d.OfflineAudioContext?f.sampleRate:44100),l._unlocked=!1,l.compressor=m,l.analyser=y,l.events=new _.EventEmitter,l.volume=1,l.speed=1,l.muted=!1,l.paused=!1,"running"!==f.state&&(l._unlock(),l._unlock=l._unlock.bind(l),document.addEventListener("mousedown",l._unlock,!0),document.addEventListener("touchstart",l._unlock,!0),document.addEventListener("touchend",l._unlock,!0)),l}return a(e,c),e.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},e.prototype.playEmptySound=function(){var c=this._ctx.createBufferSource();c.buffer=this._ctx.createBuffer(1,1,22050),c.connect(this._ctx.destination),c.start(0,0,0),"suspended"===c.context.state&&c.context.resume()},Object.defineProperty(e,"AudioContext",{get:function(){var c=window;return c.AudioContext||c.webkitAudioContext||null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OfflineAudioContext",{get:function(){var c=window;return c.OfflineAudioContext||c.webkitOfflineAudioContext||null},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){c.prototype.destroy.call(this);var l=this._ctx;void 0!==l.close&&l.close(),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(e.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(c){c&&"running"===this._ctx.state?this._ctx.suspend():c||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=c},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){this.events.emit("refresh")},e.prototype.refreshPaused=function(){this.events.emit("refreshPaused")},e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this._paused},e.prototype.decode=function(c,l){this._offlineCtx.decodeAudioData(c,(function(c){l(null,c)}),(function(c){l(new Error(c.message||"Unable to decode file"))}))},e}(g),R={WebAudioMedia:A,WebAudioInstance:O,WebAudioNodes:I,WebAudioContext:C,WebAudioUtils:P},D={Filter:v,EqualizerFilter:function(c){function e(l,d,f,m,_,y,g,v,b,x){void 0===l&&(l=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===m&&(m=0),void 0===_&&(_=0),void 0===y&&(y=0),void 0===g&&(g=0),void 0===v&&(v=0),void 0===b&&(b=0),void 0===x&&(x=0);var T=this;if(!h().useLegacy){var S=[{f:e.F32,type:"lowshelf",gain:l},{f:e.F64,type:"peaking",gain:d},{f:e.F125,type:"peaking",gain:f},{f:e.F250,type:"peaking",gain:m},{f:e.F500,type:"peaking",gain:_},{f:e.F1K,type:"peaking",gain:y},{f:e.F2K,type:"peaking",gain:g},{f:e.F4K,type:"peaking",gain:v},{f:e.F8K,type:"peaking",gain:b},{f:e.F16K,type:"highshelf",gain:x}].map((function(c){var l=h().context.audioContext.createBiquadFilter();return l.type=c.type,P.setParamValue(l.Q,1),l.frequency.value=c.f,P.setParamValue(l.gain,c.gain),l}));(T=c.call(this,S[0],S[S.length-1])||this).bands=S,T.bandsMap={};for(var E=0;E<T.bands.length;E++){var w=T.bands[E];E>0&&T.bands[E-1].connect(w),T.bandsMap[w.frequency.value]=w}return T}T=c.call(this,null)||this}return a(e,c),e.prototype.setGain=function(c,l){if(void 0===l&&(l=0),!this.bandsMap[c])throw new Error("No band found for frequency "+c);P.setParamValue(this.bandsMap[c].gain,l)},e.prototype.getGain=function(c){if(!this.bandsMap[c])throw new Error("No band found for frequency "+c);return this.bandsMap[c].gain.value},Object.defineProperty(e.prototype,"f32",{get:function(){return this.getGain(e.F32)},set:function(c){this.setGain(e.F32,c)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f64",{get:function(){return this.getGain(e.F64)},set:function(c){this.setGain(e.F64,c)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f125",{get:function(){return this.getGain(e.F125)},set:function(c){this.setGain(e.F125,c)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f250",{get:function(){return this.getGain(e.F250)},set:function(c){this.setGain(e.F250,c)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f500",{get:function(){return this.getGain(e.F500)},set:function(c){this.setGain(e.F500,c)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f1k",{get:function(){return this.getGain(e.F1K)},set:function(c){this.setGain(e.F1K,c)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f2k",{get:function(){return this.getGain(e.F2K)},set:function(c){this.setGain(e.F2K,c)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f4k",{get:function(){return this.getGain(e.F4K)},set:function(c){this.setGain(e.F4K,c)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f8k",{get:function(){return this.getGain(e.F8K)},set:function(c){this.setGain(e.F8K,c)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f16k",{get:function(){return this.getGain(e.F16K)},set:function(c){this.setGain(e.F16K,c)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.bands.forEach((function(c){P.setParamValue(c.gain,0)}))},e.prototype.destroy=function(){this.bands.forEach((function(c){c.disconnect()})),this.bands=null,this.bandsMap=null},e.F32=32,e.F64=64,e.F125=125,e.F250=250,e.F500=500,e.F1K=1e3,e.F2K=2e3,e.F4K=4e3,e.F8K=8e3,e.F16K=16e3,e}(v),DistortionFilter:function(c){function e(l){void 0===l&&(l=0);var d=this;if(!h().useLegacy){var f=h().context.audioContext.createWaveShaper();return(d=c.call(this,f)||this)._distortion=f,d.amount=l,d}d=c.call(this,null)||this}return a(e,c),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},set:function(c){c*=1e3,this._amount=c;for(var l,d=new Float32Array(44100),f=Math.PI/180,m=0;m<44100;++m)l=2*m/44100-1,d[m]=(3+c)*l*20*f/(Math.PI+c*Math.abs(l));this._distortion.curve=d,this._distortion.oversample="4x"},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._distortion=null,c.prototype.destroy.call(this)},e}(v),StereoFilter:function(c){function e(l){void 0===l&&(l=0);var d=this;if(!h().useLegacy){var f,m,_,y=h().context.audioContext;return y.createStereoPanner?_=f=y.createStereoPanner():((m=y.createPanner()).panningModel="equalpower",_=m),(d=c.call(this,_)||this)._stereo=f,d._panner=m,d.pan=l,d}d=c.call(this,null)||this}return a(e,c),Object.defineProperty(e.prototype,"pan",{get:function(){return this._pan},set:function(c){this._pan=c,this._stereo?P.setParamValue(this._stereo.pan,c):this._panner.setPosition(c,0,1-Math.abs(c))},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){c.prototype.destroy.call(this),this._stereo=null,this._panner=null},e}(v),ReverbFilter:function(c){function e(l,d,f){void 0===l&&(l=3),void 0===d&&(d=2),void 0===f&&(f=!1);var m=this;if(!h().useLegacy)return(m=c.call(this,null)||this)._seconds=m._clamp(l,1,50),m._decay=m._clamp(d,0,100),m._reverse=f,m._rebuild(),m;m=c.call(this,null)||this}return a(e,c),e.prototype._clamp=function(c,l,d){return Math.min(d,Math.max(l,c))},Object.defineProperty(e.prototype,"seconds",{get:function(){return this._seconds},set:function(c){this._seconds=this._clamp(c,1,50),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decay",{get:function(){return this._decay},set:function(c){this._decay=this._clamp(c,0,100),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._reverse},set:function(c){this._reverse=c,this._rebuild()},enumerable:!0,configurable:!0}),e.prototype._rebuild=function(){for(var c,l=h().context.audioContext,d=l.sampleRate,f=d*this._seconds,m=l.createBuffer(2,f,d),_=m.getChannelData(0),y=m.getChannelData(1),g=0;g<f;g++)c=this._reverse?f-g:g,_[g]=(2*Math.random()-1)*Math.pow(1-c/f,this._decay),y[g]=(2*Math.random()-1)*Math.pow(1-c/f,this._decay);var v=h().context.audioContext.createConvolver();v.buffer=m,this.init(v)},e}(v),MonoFilter:function(c){function e(){var l=this;if(!h().useLegacy){var d=h().context.audioContext,f=d.createChannelSplitter(),m=d.createChannelMerger();return m.connect(f),(l=c.call(this,m,f)||this)._merger=m,l}l=c.call(this,null)||this}return a(e,c),e.prototype.destroy=function(){this._merger.disconnect(),this._merger=null,c.prototype.destroy.call(this)},e}(v),TelephoneFilter:function(c){function e(){if(!h().useLegacy){var l=h().context.audioContext,d=l.createBiquadFilter(),f=l.createBiquadFilter(),m=l.createBiquadFilter(),_=l.createBiquadFilter();return d.type="lowpass",P.setParamValue(d.frequency,2e3),f.type="lowpass",P.setParamValue(f.frequency,2e3),m.type="highpass",P.setParamValue(m.frequency,500),_.type="highpass",P.setParamValue(_.frequency,500),d.connect(f),f.connect(m),m.connect(_),c.call(this,d,_)||this}c.call(this,null)}return a(e,c),e}(v)},L=0,B=function(c){function e(l){var d=c.call(this)||this;return d.id=L++,d.init(l),d}return a(e,c),e.prototype.set=function(c,l){if(void 0===this[c])throw new Error("Property with name "+c+" does not exist.");return this[c]=l,this},Object.defineProperty(e.prototype,"progress",{get:function(){return this._source.currentTime/this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(c){this._paused=c,this.refreshPaused()},enumerable:!0,configurable:!0}),e.prototype._onPlay=function(){this._playing=!0},e.prototype._onPause=function(){this._playing=!1},e.prototype.init=function(c){this._playing=!1,this._duration=c.source.duration;var l=this._source=c.source.cloneNode(!1);l.src=c.parent.url,l.onplay=this._onPlay.bind(this),l.onpause=this._onPause.bind(this),c.context.on("refresh",this.refresh,this),c.context.on("refreshPaused",this.refreshPaused,this),this._media=c},e.prototype._internalStop=function(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())},e.prototype.stop=function(){this._internalStop(),this._source&&this.emit("stop")},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(c){this._speed=c,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(c){this._volume=c,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(c){this._loop=c,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(c){this._muted=c,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){var c=this._media.context,l=this._media.parent;this._source.loop=this._loop||l.loop;var d=c.volume*(c.muted?0:1),f=l.volume*(l.muted?0:1),m=this._volume*(this._muted?0:1);this._source.volume=m*d*f,this._source.playbackRate=this._speed*c.speed*l.speed},e.prototype.refreshPaused=function(){var c=this._media.context,l=this._media.parent,d=this._paused||l.paused||c.paused;d!==this._pausedReal&&(this._pausedReal=d,d?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",d))},e.prototype.play=function(c){var l=this,d=c.start,f=c.end,_=c.speed,y=c.loop,g=c.volume,v=c.muted;this._speed=_,this._volume=g,this._loop=!!y,this._muted=v,this.refresh(),this.loop&&null!==f&&(this.loop=!1),this._start=d,this._end=f||this._duration,this._start=Math.max(0,this._start-e.PADDING),this._end=Math.min(this._end+e.PADDING,this._duration),this._source.onloadedmetadata=function(){l._source&&(l._source.currentTime=d,l._source.onloadedmetadata=null,l.emit("progress",d,l._duration),m.a.shared.add(l._onUpdate,l))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")},e.prototype._onUpdate=function(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()},e.prototype._onComplete=function(){m.a.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)},e.prototype.destroy=function(){m.a.shared.remove(this._onUpdate,this),this.removeAllListeners();var c=this._source;c&&(c.onended=null,c.onplay=null,c.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)},e.prototype.toString=function(){return"[HTMLAudioInstance id="+this.id+"]"},e.PADDING=.1,e}(_.EventEmitter),N=function(c){function e(){return null!==c&&c.apply(this,arguments)||this}return a(e,c),e.prototype.init=function(c){this.parent=c,this._source=c.options.source||new Audio,c.url&&(this._source.src=c.url)},e.prototype.create=function(){return new B(this)},Object.defineProperty(e.prototype,"isPlayable",{get:function(){return!!this._source&&4===this._source.readyState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._source.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(c){},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),e.prototype.load=function(c){var l=this._source,d=this.parent;if(4!==l.readyState){if(!d.url)return c(new Error("sound.url or sound.source must be set"));l.src=d.url;var o=function(){l.removeEventListener("canplaythrough",i),l.removeEventListener("load",i),l.removeEventListener("abort",r),l.removeEventListener("error",s)},i=function(){o(),d.isLoaded=!0;var l=d.autoPlayStart();c&&c(null,d,l)},r=function(){o(),c&&c(new Error("Sound loading has been aborted"))},s=function(){o();var d="Failed to load audio element (code: "+l.error.code+")";c&&c(new Error(d))};l.addEventListener("canplaythrough",i,!1),l.addEventListener("load",i,!1),l.addEventListener("abort",r,!1),l.addEventListener("error",s,!1),l.load()}else{d.isLoaded=!0;var f=d.autoPlayStart();c&&setTimeout((function(){c(null,d,f)}),0)}},e}(_.EventEmitter),k=function(c){function e(){var l=c.call(this)||this;return l.speed=1,l.volume=1,l.muted=!1,l.paused=!1,l}return a(e,c),e.prototype.refresh=function(){this.emit("refresh")},e.prototype.refreshPaused=function(){this.emit("refreshPaused")},Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(c){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioContext",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this.paused},e.prototype.destroy=function(){this.removeAllListeners()},e}(_.EventEmitter),j={HTMLAudioMedia:N,HTMLAudioInstance:B,HTMLAudioContext:k},U=["mp3","ogg","oga","opus","mpeg","wav","m4a","aiff","wma","mid"],G=(x={m4a:"mp4",oga:"ogg"},T=document.createElement("audio"),S={},E=/^no$/,U.forEach((function(c){var l=x[c]||c,d=T.canPlayType("audio/"+c).replace(E,""),f=T.canPlayType("audio/"+l).replace(E,"");S[c]=!!d||!!f})),Object.freeze(S)),X=/\.(\{([^\}]+)\})(\?.*)?$/;function M(c){var l=X,d="string"==typeof c?c:c.url;if(l.test(d)){for(var f=l.exec(d),m=f[2].split(","),_=m[m.length-1],y=0,g=m.length;y<g;y++){var v=m[y];if(G[v]){_=v;break}}var b=d.replace(f[1],_);return"string"!=typeof c&&(c.extension=_,c.url=b),b}return d}var H,z=function(){function e(){}return e.add=function(){e.legacy=h().useLegacy},Object.defineProperty(e,"legacy",{set:function(c){var l=U;c?l.forEach((function(c){f.c.setExtensionXhrType(c,f.c.XHR_RESPONSE_TYPE.DEFAULT),f.c.setExtensionLoadType(c,f.c.LOAD_TYPE.AUDIO)})):l.forEach((function(c){f.c.setExtensionXhrType(c,f.c.XHR_RESPONSE_TYPE.BUFFER),f.c.setExtensionLoadType(c,f.c.LOAD_TYPE.XHR)}))},enumerable:!0,configurable:!0}),e.pre=function(c,l){M(c),l()},e.use=function(c,l){c.data&&U.indexOf(c.extension)>-1?c.sound=h().add(c.name,{loaded:l,preload:!0,url:c.url,source:c.data}):l()},e}(),V=function(){function t(c,l){this.parent=c,Object.assign(this,l),this.duration=this.end-this.start}return t.prototype.play=function(c){return this.parent.play({complete:c,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})},t.prototype.destroy=function(){this.parent=null},t}(),Y=function(){function t(c,l){this.media=c,this.options=l,this._instances=[],this._sprites={},this.media.init(this);var d=l.complete;this._autoPlayOptions=d?{complete:d}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=l.autoPlay,this.singleInstance=l.singleInstance,this.preload=l.preload||this.autoPlay,this.url=l.url,this.speed=l.speed,this.volume=l.volume,this.loop=l.loop,l.sprites&&this.addSprites(l.sprites),this.preload&&this._preload(l.loaded)}return t.from=function(c){var l={};return"string"==typeof c?l.url=c:c instanceof ArrayBuffer||c instanceof HTMLAudioElement?l.source=c:l=c,(l=p({autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1},l)).url&&(l.url=M(l.url)),Object.freeze(l),new t(h().useLegacy?new N:new A,l)},Object.defineProperty(t.prototype,"context",{get:function(){return h().context},enumerable:!0,configurable:!0}),t.prototype.pause=function(){return this.isPlaying=!1,this.paused=!0,this},t.prototype.resume=function(){return this.isPlaying=this._instances.length>0,this.paused=!1,this},Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(c){this._paused=c,this.refreshPaused()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(c){this._speed=c,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this.media.filters},set:function(c){this.media.filters=c},enumerable:!0,configurable:!0}),t.prototype.addSprites=function(c,l){if("object"==typeof c){var d={};for(var f in c)d[f]=this.addSprites(f,c[f]);return d}if("string"==typeof c){var m=new V(this,l);return this._sprites[c]=m,m}},t.prototype.destroy=function(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null},t.prototype.removeSprites=function(c){if(c){var l=this._sprites[c];void 0!==l&&(l.destroy(),delete this._sprites[c])}else for(var d in this._sprites)this.removeSprites(d);return this},Object.defineProperty(t.prototype,"isPlayable",{get:function(){return this.isLoaded&&this.media&&this.media.isPlayable},enumerable:!0,configurable:!0}),t.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var c=this._instances.length-1;c>=0;c--)this._instances[c].stop();return this},t.prototype.play=function(c,l){var d,f=this;if("string"==typeof c?d={sprite:_=c,loop:this.loop,complete:l}:"function"==typeof c?(d={}).complete=c:d=c,(d=p({complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1},d||{})).sprite){var m=d.sprite,_=this._sprites[m];d.start=_.start,d.end=_.end,d.speed=_.speed||1,d.loop=_.loop||d.loop,delete d.sprite}if(d.offset&&(d.start=d.offset),!this.isLoaded)return new Promise((function(c,l){f.autoPlay=!0,f._autoPlayOptions=d,f._preload((function(f,m,_){f?l(f):(d.loaded&&d.loaded(f,m,_),c(_))}))}));this.singleInstance&&this._removeInstances();var y=this._createInstance();return this._instances.push(y),this.isPlaying=!0,y.once("end",(function(){d.complete&&d.complete(f),f._onComplete(y)})),y.once("stop",(function(){f._onComplete(y)})),y.play(d),y},t.prototype.refresh=function(){for(var c=this._instances.length,l=0;l<c;l++)this._instances[l].refresh()},t.prototype.refreshPaused=function(){for(var c=this._instances.length,l=0;l<c;l++)this._instances[l].refreshPaused()},Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(c){this._volume=c,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted},set:function(c){this._muted=c,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(c){this._loop=c,this.refresh()},enumerable:!0,configurable:!0}),t.prototype._preload=function(c){this.media.load(c)},Object.defineProperty(t.prototype,"instances",{get:function(){return this._instances},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sprites",{get:function(){return this._sprites},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.media.duration},enumerable:!0,configurable:!0}),t.prototype.autoPlayStart=function(){var c;return this.autoPlay&&(c=this.play(this._autoPlayOptions)),c},t.prototype._removeInstances=function(){for(var c=this._instances.length-1;c>=0;c--)this._poolInstance(this._instances[c]);this._instances.length=0},t.prototype._onComplete=function(c){if(this._instances){var l=this._instances.indexOf(c);l>-1&&this._instances.splice(l,1),this.isPlaying=this._instances.length>0}this._poolInstance(c)},t.prototype._createInstance=function(){if(t._pool.length>0){var c=t._pool.pop();return c.init(this.media),c}return this.media.create()},t.prototype._poolInstance=function(c){c.destroy(),t._pool.indexOf(c)<0&&t._pool.push(c)},t._pool=[],t}(),W=function(){function t(){this.init()}return t.prototype.init=function(){return this.supported&&(this._webAudioContext=new C),this._htmlAudioContext=new k,this._sounds={},this.useLegacy=!this.supported,this},Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filtersAll",{get:function(){return this.useLegacy?[]:this._context.filters},set:function(c){this.useLegacy||(this._context.filters=c)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supported",{get:function(){return null!==C.AudioContext},enumerable:!0,configurable:!0}),t.prototype.add=function(c,l){if("object"==typeof c){var d={};for(var f in c){var m=this._getOptions(c[f],l);d[f]=this.add(f,m)}return d}if("string"==typeof c){if(l instanceof Y)return this._sounds[c]=l,l;m=this._getOptions(l);var _=Y.from(m);return this._sounds[c]=_,_}},t.prototype._getOptions=function(c,l){var d;return d="string"==typeof c?{url:c}:c instanceof ArrayBuffer||c instanceof HTMLAudioElement?{source:c}:c,p({},d,l||{})},Object.defineProperty(t.prototype,"useLegacy",{get:function(){return this._useLegacy},set:function(c){z.legacy=c,this._useLegacy=c,this._context=!c&&this.supported?this._webAudioContext:this._htmlAudioContext},enumerable:!0,configurable:!0}),t.prototype.remove=function(c){return this.exists(c,!0),this._sounds[c].destroy(),delete this._sounds[c],this},Object.defineProperty(t.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(c){this._context.volume=c,this._context.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speedAll",{get:function(){return this._context.speed},set:function(c){this._context.speed=c,this._context.refresh()},enumerable:!0,configurable:!0}),t.prototype.togglePauseAll=function(){return this._context.togglePause()},t.prototype.pauseAll=function(){return this._context.paused=!0,this._context.refreshPaused(),this},t.prototype.resumeAll=function(){return this._context.paused=!1,this._context.refreshPaused(),this},t.prototype.toggleMuteAll=function(){return this._context.toggleMute()},t.prototype.muteAll=function(){return this._context.muted=!0,this._context.refresh(),this},t.prototype.unmuteAll=function(){return this._context.muted=!1,this._context.refresh(),this},t.prototype.removeAll=function(){for(var c in this._sounds)this._sounds[c].destroy(),delete this._sounds[c];return this},t.prototype.stopAll=function(){for(var c in this._sounds)this._sounds[c].stop();return this},t.prototype.exists=function(c,l){return void 0===l&&(l=!1),!!this._sounds[c]},t.prototype.find=function(c){return this.exists(c,!0),this._sounds[c]},t.prototype.play=function(c,l){return this.find(c).play(l)},t.prototype.stop=function(c){return this.find(c).stop()},t.prototype.pause=function(c){return this.find(c).pause()},t.prototype.resume=function(c){return this.find(c).resume()},t.prototype.volume=function(c,l){var d=this.find(c);return void 0!==l&&(d.volume=l),d.volume},t.prototype.speed=function(c,l){var d=this.find(c);return void 0!==l&&(d.speed=l),d.speed},t.prototype.duration=function(c){return this.find(c).duration},t.prototype.close=function(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this},t}(),q=0,K={get PLAY_ID(){return q},playOnce:function(c,l){var d="alias"+q++;return h().add(d,{url:c,preload:!0,autoPlay:!0,loaded:function(c){c&&(h().remove(d),l&&l(c))},complete:function(){h().remove(d),l&&l(null)}}),d},render:function(c,l){var d=document.createElement("canvas");l=p({width:512,height:128,fill:"black"},l||{}),d.width=l.width,d.height=l.height;var f=y.e.from(d);if(!(c.media instanceof A))return f;var m=c.media,_=d.getContext("2d");_.fillStyle=l.fill;for(var g=m.buffer.getChannelData(0),v=Math.ceil(g.length/l.width),b=l.height/2,x=0;x<l.width;x++){for(var T=1,S=-1,E=0;E<v;E++){var P=g[x*v+E];P<T&&(T=P),P>S&&(S=P)}_.fillRect(x,(1+T)*b,1,Math.max(1,(S-T)*b))}return f},resolveUrl:M,sineTone:function(c,l){void 0===c&&(c=200),void 0===l&&(l=1);var d=Y.from({singleInstance:!0});if(!(d.media instanceof A))return d;for(var f=d.media,m=d.context.audioContext.createBuffer(1,48e3*l,48e3),_=m.getChannelData(0),y=0;y<_.length;y++){var g=c*(y/m.sampleRate)*Math.PI;_[y]=2*Math.sin(g)}return f.buffer=m,d.isLoaded=!0,d},extensions:U,supported:G},Z=(H=new W,b=H,H);f.b.registerPlugin(z),Object.defineProperties(Z,{Filterable:{get:function(){return g}},filters:{get:function(){return D}},htmlaudio:{get:function(){return j}},Sound:{get:function(){return Y}},SoundLibrary:{get:function(){return W}},SoundSprite:{get:function(){return V}},utils:{get:function(){return K}},webaudio:{get:function(){return R}},sound:{get:function(){return Z}}}),l.default=Z}]]);